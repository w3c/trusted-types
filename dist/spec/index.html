<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Trusted Types</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <meta content="Bikeshed version 275834c42, updated Wed Jun 11 14:18:15 2025 -0700" name="generator">
  <link href="https://www.w3.org/TR/trusted-types/" rel="canonical">
  <meta content="a63d3cd7a344001ee98e10bec52483bf419f3194" name="revision">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
	--mdn-pass: green;
	--mdn-fail: red;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
		--mdn-pass: #690;
		--mdn-fail: #d22;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: var(--mdn-fail);
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: var(--mdn-pass);
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: var(--mdn-fail);
}
.mdn-anno > .feature > .all-engines-text {
	color: var(--mdn-pass);
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-wpt */
:root {
    --wpt-border: hsl(0, 0%, 60%);
    --wpt-bg: hsl(0, 0%, 95%);
    --wpt-text: var(--text);
    --wptheading-text: hsl(0, 0%, 30%);
}
@media (prefers-color-scheme: dark) {
    :root {
        --wpt-border: hsl(0, 0%, 30%);
        --wpt-bg: var(--borderedblock-bg);
        --wpt-text: var(--text);
        --wptheading-text: hsl(0, 0%, 60%);
    }
}
.wpt-tests-block {
    list-style: none;
    border-left: .5em solid var(--wpt-border);
    background: var(--wpt-bg);
    color: var(--wpt-text);
    margin: 1em auto;
    padding: .5em;
}
.wpt-tests-block summary {
    color: var(--wptheading-text);
    font-weight: normal;
    text-transform: uppercase;
}
.wpt-tests-block summary::marker{
    color: var(--wpt-border);
}
.wpt-tests-block summary:hover::marker{
    color: var(--wpt-text);
}
/*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
.wpt-tests-block:not([open]){
    padding: 0;
    border: none;
    background: none;
    font-size: 0.75em;
    line-height: 1;
    position: relative;
    margin: 1em 0 0;
}
.wpt-tests-block:not([open]) summary {
    position: absolute;
    right: 0;
    bottom: 0;
}
/*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
.wpt-tests-block:not([open]):last-child {
    padding-bottom: 1px;
    margin-bottom: -1px;
}
/*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
li:not(:last-child) > .wpt-tests-block:not([open]):last-child,
dd:not(:last-child) > .wpt-tests-block:not([open]):last-child {
    padding-bottom: 0;
    margin-bottom: 0;
}
.wpt-tests-block:not([open]):not(:hover){
    opacity: 0.5;
}
.wpt-tests-list {
    list-style: none;
    display: grid;
    margin: 0;
    padding: 0;
    grid-template-columns: 1fr max-content auto auto;
    grid-column-gap: .5em;
}
.wpt-tests-block hr:last-child {
    display: none;
}
.wpt-test {
    display: contents;
}
.wpt-test > a {
    text-decoration: underline;
    border: none;
}
.wpt-test > .wpt-name { grid-column: 1; }
.wpt-test > .wpt-results { grid-column: 2; }
.wpt-test > .wpt-live { grid-column: 3; }
.wpt-test > .wpt-source { grid-column: 4; }

.wpt-test > .wpt-results {
    display: flex;
    gap: .1em;
}
.wpt-test .wpt-result {
    display: inline-block;
    height: 1em;
    width: 1em;
    border-radius: 50%;
    position: relative;
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/">
    <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
</a>
</p>
   <h1 class="p-name no-ref" id="title">Trusted Types</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#ED">Editor’s Draft</a>,
    <time class="dt-updated" datetime="2025-06-26">26 June 2025</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3c.github.io/trusted-types/dist/spec/">https://w3c.github.io/trusted-types/dist/spec/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/trusted-types/">https://www.w3.org/TR/trusted-types/</a>
      <dt>Feedback:
      <dd><span><a href="mailto:public-webappsec@w3.org?subject=%5Btrusted-types%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a> with subject line “<kbd>[trusted-types] <i data-lt>… message topic …</i></kbd>” (<a href="https://lists.w3.org/Archives/Public/public-webappsec/" rel="discussion">archives</a>)</span>
      <dd><a href="https://github.com/w3c/trusted-types/issues/">GitHub</a>
      <dd><a href="#issues-index">Inline In Spec</a>
      <dt class="editor">Editor:
      <dd class="editor p-author h-card vcard" data-editor-id="110276"><a class="p-name fn u-email email" href="mailto:koto@google.com">Krzysztof Kotowicz</a> (<a class="p-org org" href="https://google.com">Google LLC</a>)
      <dt class="editor">Former Editor:
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:mkwst@google.com">Mike West</a> (<a class="p-org org" href="https://google.com">Google LLC</a>)
      <dt>Test Suite:
      <dd class="wpt-overview"><a href="https://wpt.fyi/results/trusted-types/">https://wpt.fyi/results/trusted-types/</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2025 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply.
</p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>An API that allows applications to lock down powerful APIs to only accept non-spoofable, typed values in place of strings to prevent vulnerabilities caused by using these APIs with attacker-controlled inputs.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p>
	This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress.

</p>
   <p>
  <strong>Changes to this document may be tracked at
  <a href="https://github.com/w3c/webappsec">https://github.com/w3c/webappsec</a>.</strong>

</p>
   <p>
	The (<a href="https://lists.w3.org/Archives/Public/public-webappsec/">archived</a>) public mailing list
	<a href="mailto:public-webappsec@w3.org?Subject=%5Btrusted-types%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a>
	(see <a href="https://www.w3.org/Mail/Request">instructions</a>)
	is preferred for discussion of this specification.
	When sending e-mail,
	please put the text “trusted-types” in the subject,
	preferably like this:
	“[trusted-types] <em>…summary of comment…</em>”

</p>
   <p>
	This document was produced by the
  <a href="https://www.w3.org/groups/wg/webappsec">Web Application Security Working Group</a>.

</p>
   <p>
	This document was produced by a group operating under
	the <a href="https://www.w3.org/policies/patent-policy/">W3C Patent Policy</a>.
	W3C maintains a <a href="https://www.w3.org/groups/wg/webappsec/ipr" rel="disclosure">public list of any patent disclosures</a>
	made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/policies/patent-policy/#def-essential">Essential Claim(s)</a>
	must disclose the information in accordance with <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">section 6 of the W3C Patent Policy</a>.

</p>
   <p>
  This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>.

</p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#goals"><span class="secno">1.1</span> <span class="content">Goals</span></a>
      <li><a href="#non-goals"><span class="secno">1.2</span> <span class="content">Non-goals</span></a>
      <li><a href="#use-cases"><span class="secno">1.3</span> <span class="content">Use cases</span></a>
     </ol>
    <li>
     <a href="#framework"><span class="secno">2</span> <span class="content">Framework</span></a>
     <ol class="toc">
      <li>
       <a href="#injection-sinks"><span class="secno">2.1</span> <span class="content">Injection sinks</span></a>
       <ol class="toc">
        <li><a href="#dom-xss-injection-sinks"><span class="secno">2.1.1</span> <span class="content">DOM XSS injection sinks</span></a>
       </ol>
      <li>
       <a href="#trusted-types"><span class="secno">2.2</span> <span class="content">Trusted Types</span></a>
       <ol class="toc">
        <li><a href="#trusted-html"><span class="secno">2.2.1</span> <span class="content"><span><code>TrustedHTML</code></span></span></a>
        <li><a href="#trusted-script"><span class="secno">2.2.2</span> <span class="content"><span><code>TrustedScript</code></span></span></a>
        <li><a href="#trused-script-url"><span class="secno">2.2.3</span> <span class="content"><span><code>TrustedScriptURL</code></span></span></a>
       </ol>
      <li>
       <a href="#policies-hdr"><span class="secno">2.3</span> <span class="content"><span>Policies</span></span></a>
       <ol class="toc">
        <li><a href="#trusted-type-policy-factory"><span class="secno">2.3.1</span> <span class="content"><span><code>TrustedTypePolicyFactory</code></span></span></a>
        <li><a href="#trusted-type-policy"><span class="secno">2.3.2</span> <span class="content"><span><code>TrustedTypePolicy</code></span></span></a>
        <li><a href="#trusted-type-policy-options"><span class="secno">2.3.3</span> <span class="content"><span><code>TrustedTypePolicyOptions</code></span></span></a>
        <li><a href="#default-policy-hdr"><span class="secno">2.3.4</span> <span class="content"><span>Default policy</span></span></a>
       </ol>
      <li>
       <a href="#enforcement-hdr"><span class="secno">2.4</span> <span class="content"><span>Enforcement</span></span></a>
       <ol class="toc">
        <li><a href="#content-security-policy-hdr"><span class="secno">2.4.1</span> <span class="content">Content Security Policy</span></a>
       </ol>
     </ol>
    <li>
     <a href="#algorithms"><span class="secno">3</span> <span class="content">Algorithms</span></a>
     <ol class="toc">
      <li><a href="#create-trusted-type-policy-algorithm"><span class="secno">3.1</span> <span class="content"><span>Create a Trusted Type Policy</span></span></a>
      <li><a href="#create-a-trusted-type-algorithm"><span class="secno">3.2</span> <span class="content"><span>Create a Trusted Type</span></span></a>
      <li><a href="#get-trusted-type-policy-value-algorithm"><span class="secno">3.3</span> <span class="content"><span>Get Trusted Type policy value</span></span></a>
      <li><a href="#get-trusted-type-compliant-string-algorithm"><span class="secno">3.4</span> <span class="content"><span>Get Trusted Type compliant string</span></span></a>
      <li><a href="#process-value-with-a-default-policy-algorithm"><span class="secno">3.5</span> <span class="content"><span>Process value with a default policy</span></span></a>
      <li><a href="#prepare-script-text"><span class="secno">3.6</span> <span class="content"><span>Prepare the script text</span></span></a>
      <li><a href="#validate-attribute-mutation"><span class="secno">3.7</span> <span class="content">Get Trusted Types-compliant attribute value</span></a>
      <li><a href="#get-trusted-type-data-for-attribute"><span class="secno">3.8</span> <span class="content">Get Trusted Type data for attribute</span></a>
     </ol>
    <li>
     <a href="#integrations"><span class="secno">4</span> <span class="content">Integrations</span></a>
     <ol class="toc">
      <li>
       <a href="#integration-with-html"><span class="secno">4.1</span> <span class="content">Integration with HTML</span></a>
       <ol class="toc">
        <li><a href="#extensions-to-the-windoworworkerglobalscope-interface"><span class="secno">4.1.1</span> <span class="content">Extensions to the WindowOrWorkerGlobalScope interface</span></a>
        <li>
         <a href="#enforcement-in-scripts"><span class="secno">4.1.2</span> <span class="content">Enforcement for scripts</span></a>
         <ol class="toc">
          <li><a href="#slots-with-trusted-values"><span class="secno">4.1.2.1</span> <span class="content">Slots with trusted values</span></a>
          <li><a href="#the-innerText-idl-attribute"><span class="secno">4.1.2.2</span> <span class="content">The <code class="idl"><span>innerText</span></code> IDL attribute</span></a>
          <li><a href="#the-textContent-idl-attribute"><span class="secno">4.1.2.3</span> <span class="content">The <code class="idl"><span>textContent</span></code> IDL attribute</span></a>
          <li><a href="#the-text-idl-attribute"><span class="secno">4.1.2.4</span> <span class="content">The <code class="idl"><span>text</span></code> IDL attribute</span></a>
          <li><a href="#the-src-idl-attribute"><span class="secno">4.1.2.5</span> <span class="content">The <code class="idl"><span>src</span></code> IDL attribute</span></a>
          <li><a href="#setting-slot-values-from-parser"><span class="secno">4.1.2.6</span> <span class="content">Setting slot values from parser</span></a>
          <li><a href="#slot-value-verification"><span class="secno">4.1.2.7</span> <span class="content">Slot value verification</span></a>
         </ol>
       </ol>
      <li><a href="#integration-with-dom"><span class="secno">4.2</span> <span class="content">Integration with DOM</span></a>
      <li>
       <a href="#integration-with-content-security-policy"><span class="secno">4.3</span> <span class="content">Integration with Content Security Policy</span></a>
       <ol class="toc">
        <li>
         <a href="#require-trusted-types-for-csp-directive"><span class="secno">4.3.1</span> <span class="content"><span>require-trusted-types-for</span> directive</span></a>
         <ol class="toc">
          <li><a href="#require-trusted-types-for-pre-navigation-check"><span class="secno">4.3.1.1</span> <span class="content"><code>require-trusted-types-for</code> Pre-Navigation check</span></a>
         </ol>
        <li><a href="#trusted-types-csp-directive"><span class="secno">4.3.2</span> <span class="content"><span>trusted-types</span> directive</span></a>
        <li><a href="#does-sink-require-trusted-types"><span class="secno">4.3.3</span> <span class="content"><span>Does sink type require trusted types?</span></span></a>
        <li><a href="#should-block-sink-type-mismatch"><span class="secno">4.3.4</span> <span class="content"><span>Should sink type mismatch violation be blocked by Content Security Policy?</span></span></a>
        <li><a href="#should-block-create-policy"><span class="secno">4.3.5</span> <span class="content"><span>Should Trusted Type policy creation be blocked by Content Security Policy?</span></span></a>
       </ol>
     </ol>
    <li>
     <a href="#security-considerations"><span class="secno">5</span> <span class="content">Security Considerations</span></a>
     <ol class="toc">
      <li><a href="#cross-document-vectors"><span class="secno">5.1</span> <span class="content">Cross-document vectors</span></a>
      <li><a href="#deprecated-features"><span class="secno">5.2</span> <span class="content">Deprecated features</span></a>
      <li><a href="#script-gadgets"><span class="secno">5.3</span> <span class="content">Script gadgets</span></a>
      <li><a href="#best-practices-for-policy-design"><span class="secno">5.4</span> <span class="content">Best practices for policy design</span></a>
     </ol>
    <li><a href="#privacy-considerations"><span class="secno">6</span> <span class="content">Privacy Considerations</span></a>
    <li>
     <a href="#implementation-considerations"><span class="secno">7</span> <span class="content">Implementation Considerations</span></a>
     <ol class="toc">
      <li><a href="#vendor-specific-extensions-and-addons"><span class="secno">7.1</span> <span class="content">Vendor-specific Extensions and Addons</span></a>
     </ol>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <details class="wpt-tests-block" dir="ltr" lang="en">
    <summary>Tests</summary>
    <ul class="wpt-tests-list">
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/DOMParser-parseFromString-regression.html" title="trusted-types/DOMParser-parseFromString-regression.html">DOMParser-parseFromString-regression.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/DOMParser-parseFromString-regression.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/DOMParser-parseFromString-regression.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/DOMParser-parseFromString.html" title="trusted-types/DOMParser-parseFromString.html">DOMParser-parseFromString.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/DOMParser-parseFromString.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/DOMParser-parseFromString.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/DedicatedWorker-block-eval-function-constructor.html" title="trusted-types/DedicatedWorker-block-eval-function-constructor.html">DedicatedWorker-block-eval-function-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/DedicatedWorker-block-eval-function-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/DedicatedWorker-block-eval-function-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/DedicatedWorker-constructor-from-DedicatedWorker.html" title="trusted-types/DedicatedWorker-constructor-from-DedicatedWorker.html">DedicatedWorker-constructor-from-DedicatedWorker.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/DedicatedWorker-constructor-from-DedicatedWorker.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/DedicatedWorker-constructor-from-DedicatedWorker.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/DedicatedWorker-constructor-from-SharedWorker.html" title="trusted-types/DedicatedWorker-constructor-from-SharedWorker.html">DedicatedWorker-constructor-from-SharedWorker.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/DedicatedWorker-constructor-from-SharedWorker.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/DedicatedWorker-constructor-from-SharedWorker.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/DedicatedWorker-constructor.https.html" title="trusted-types/DedicatedWorker-constructor.https.html">DedicatedWorker-constructor.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/DedicatedWorker-constructor.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/DedicatedWorker-constructor.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/DedicatedWorker-eval.html" title="trusted-types/DedicatedWorker-eval.html">DedicatedWorker-eval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/DedicatedWorker-eval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/DedicatedWorker-eval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/DedicatedWorker-importScripts.html" title="trusted-types/DedicatedWorker-importScripts.html">DedicatedWorker-importScripts.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/DedicatedWorker-importScripts.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/DedicatedWorker-importScripts.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/DedicatedWorker-setTimeout-setInterval.html" title="trusted-types/DedicatedWorker-setTimeout-setInterval.html">DedicatedWorker-setTimeout-setInterval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/DedicatedWorker-setTimeout-setInterval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/DedicatedWorker-setTimeout-setInterval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Document-execCommand.html" title="trusted-types/Document-execCommand.html">Document-execCommand.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Document-execCommand.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Document-execCommand.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Document-write-appending-line-feed.html" title="trusted-types/Document-write-appending-line-feed.html">Document-write-appending-line-feed.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Document-write-appending-line-feed.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Document-write-appending-line-feed.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Document-write-exception-order.xhtml" title="trusted-types/Document-write-exception-order.xhtml">Document-write-exception-order.xhtml</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Document-write-exception-order.xhtml"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Document-write-exception-order.xhtml"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Document-write.html" title="trusted-types/Document-write.html">Document-write.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Document-write.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Document-write.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Element-insertAdjacentHTML.html" title="trusted-types/Element-insertAdjacentHTML.html">Element-insertAdjacentHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Element-insertAdjacentHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Element-insertAdjacentHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Element-outerHTML.html" title="trusted-types/Element-outerHTML.html">Element-outerHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Element-outerHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Element-outerHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Element-setAttribute-respects-Elements-node-documents-globals-CSP-after-adoption-from-TT-realm.html" title="trusted-types/Element-setAttribute-respects-Elements-node-documents-globals-CSP-after-adoption-from-TT-realm.html">Element-setAttribute-respects-Elements-node-documents-globals-CSP-after-adoption-from-TT-realm.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Element-setAttribute-respects-Elements-node-documents-globals-CSP-after-adoption-from-TT-realm.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Element-setAttribute-respects-Elements-node-documents-globals-CSP-after-adoption-from-TT-realm.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Element-setAttribute-respects-Elements-node-documents-globals-CSP-after-adoption-from-non-TT-realm.html" title="trusted-types/Element-setAttribute-respects-Elements-node-documents-globals-CSP-after-adoption-from-non-TT-realm.html">Element-setAttribute-respects-Elements-node-documents-globals-CSP-after-adoption-from-non-TT-realm.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Element-setAttribute-respects-Elements-node-documents-globals-CSP-after-adoption-from-non-TT-realm.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Element-setAttribute-respects-Elements-node-documents-globals-CSP-after-adoption-from-non-TT-realm.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Element-setAttribute.html" title="trusted-types/Element-setAttribute.html">Element-setAttribute.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Element-setAttribute.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Element-setAttribute.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Element-setAttributeNS.html" title="trusted-types/Element-setAttributeNS.html">Element-setAttributeNS.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Element-setAttributeNS.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Element-setAttributeNS.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Element-toggleAttribute.html" title="trusted-types/Element-toggleAttribute.html">Element-toggleAttribute.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Element-toggleAttribute.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Element-toggleAttribute.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/GlobalEventHandlers-onclick.html" title="trusted-types/GlobalEventHandlers-onclick.html">GlobalEventHandlers-onclick.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/GlobalEventHandlers-onclick.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/GlobalEventHandlers-onclick.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/HTMLElement-generic.html" title="trusted-types/HTMLElement-generic.html">HTMLElement-generic.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/HTMLElement-generic.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/HTMLElement-generic.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/HTMLScriptElement-in-xhtml-document.tentative.https.xhtml" title="trusted-types/HTMLScriptElement-in-xhtml-document.tentative.https.xhtml">HTMLScriptElement-in-xhtml-document.tentative.https.xhtml</a> <a class="wpt-live" href="https://wpt.live/trusted-types/HTMLScriptElement-in-xhtml-document.tentative.https.xhtml"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/HTMLScriptElement-in-xhtml-document.tentative.https.xhtml"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/HTMLScriptElement-internal-slot.html" title="trusted-types/HTMLScriptElement-internal-slot.html">HTMLScriptElement-internal-slot.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/HTMLScriptElement-internal-slot.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/HTMLScriptElement-internal-slot.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Node-multiple-arguments-tt-enforced.html" title="trusted-types/Node-multiple-arguments-tt-enforced.html">Node-multiple-arguments-tt-enforced.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Node-multiple-arguments-tt-enforced.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Node-multiple-arguments-tt-enforced.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Node-multiple-arguments.html" title="trusted-types/Node-multiple-arguments.html">Node-multiple-arguments.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Node-multiple-arguments.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Node-multiple-arguments.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Range-createContextualFragment.html" title="trusted-types/Range-createContextualFragment.html">Range-createContextualFragment.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Range-createContextualFragment.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Range-createContextualFragment.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/SVGScriptElement-internal-slot.html" title="trusted-types/SVGScriptElement-internal-slot.html">SVGScriptElement-internal-slot.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/SVGScriptElement-internal-slot.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/SVGScriptElement-internal-slot.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/ServiceWorker-block-eval-function-constructor.https.html" title="trusted-types/ServiceWorker-block-eval-function-constructor.https.html">ServiceWorker-block-eval-function-constructor.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/ServiceWorker-block-eval-function-constructor.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/ServiceWorker-block-eval-function-constructor.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/ServiceWorker-eval.https.html" title="trusted-types/ServiceWorker-eval.https.html">ServiceWorker-eval.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/ServiceWorker-eval.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/ServiceWorker-eval.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/ServiceWorker-importScripts.https.html" title="trusted-types/ServiceWorker-importScripts.https.html">ServiceWorker-importScripts.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/ServiceWorker-importScripts.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/ServiceWorker-importScripts.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/ServiceWorkerContainer-register-from-DedicatedWorker.https.html" title="trusted-types/ServiceWorkerContainer-register-from-DedicatedWorker.https.html">ServiceWorkerContainer-register-from-DedicatedWorker.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/ServiceWorkerContainer-register-from-DedicatedWorker.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/ServiceWorkerContainer-register-from-DedicatedWorker.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/ServiceWorkerContainer-register-from-ServiceWorker.https.html" title="trusted-types/ServiceWorkerContainer-register-from-ServiceWorker.https.html">ServiceWorkerContainer-register-from-ServiceWorker.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/ServiceWorkerContainer-register-from-ServiceWorker.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/ServiceWorkerContainer-register-from-ServiceWorker.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/ServiceWorkerContainer-register-from-SharedWorker.https.html" title="trusted-types/ServiceWorkerContainer-register-from-SharedWorker.https.html">ServiceWorkerContainer-register-from-SharedWorker.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/ServiceWorkerContainer-register-from-SharedWorker.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/ServiceWorkerContainer-register-from-SharedWorker.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/ServiceWorkerContainer-register.https.html" title="trusted-types/ServiceWorkerContainer-register.https.html">ServiceWorkerContainer-register.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/ServiceWorkerContainer-register.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/ServiceWorkerContainer-register.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/SharedWorker-block-eval-function-constructor.html" title="trusted-types/SharedWorker-block-eval-function-constructor.html">SharedWorker-block-eval-function-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/SharedWorker-block-eval-function-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/SharedWorker-block-eval-function-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/SharedWorker-constructor.https.html" title="trusted-types/SharedWorker-constructor.https.html">SharedWorker-constructor.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/SharedWorker-constructor.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/SharedWorker-constructor.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/SharedWorker-eval.html" title="trusted-types/SharedWorker-eval.html">SharedWorker-eval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/SharedWorker-eval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/SharedWorker-eval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/SharedWorker-importScripts.html" title="trusted-types/SharedWorker-importScripts.html">SharedWorker-importScripts.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/SharedWorker-importScripts.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/SharedWorker-importScripts.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/SharedWorker-setTimeout-setInterval.html" title="trusted-types/SharedWorker-setTimeout-setInterval.html">SharedWorker-setTimeout-setInterval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/SharedWorker-setTimeout-setInterval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/SharedWorker-setTimeout-setInterval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedType-AttributeNodes.html" title="trusted-types/TrustedType-AttributeNodes.html">TrustedType-AttributeNodes.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedType-AttributeNodes.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedType-AttributeNodes.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicy-CSP-no-name.html" title="trusted-types/TrustedTypePolicy-CSP-no-name.html">TrustedTypePolicy-CSP-no-name.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicy-CSP-no-name.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicy-CSP-no-name.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicy-CSP-wildcard.html" title="trusted-types/TrustedTypePolicy-CSP-wildcard.html">TrustedTypePolicy-CSP-wildcard.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicy-CSP-wildcard.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicy-CSP-wildcard.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicy-createXXX.html" title="trusted-types/TrustedTypePolicy-createXXX.html">TrustedTypePolicy-createXXX.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicy-createXXX.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicy-createXXX.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-constants.html" title="trusted-types/TrustedTypePolicyFactory-constants.html">TrustedTypePolicyFactory-constants.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-constants.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-constants.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-createPolicy-createXYZTests.html" title="trusted-types/TrustedTypePolicyFactory-createPolicy-createXYZTests.html">TrustedTypePolicyFactory-createPolicy-createXYZTests.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-createPolicy-createXYZTests.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-createPolicy-createXYZTests.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-noNamesGiven.html" title="trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-noNamesGiven.html">TrustedTypePolicyFactory-createPolicy-cspTests-noNamesGiven.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-noNamesGiven.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-noNamesGiven.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-none-name.html" title="trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-none-name.html">TrustedTypePolicyFactory-createPolicy-cspTests-none-none-name.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-none-name.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-none-name.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-none.html" title="trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-none.html">TrustedTypePolicyFactory-createPolicy-cspTests-none-none.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-none.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-none.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-skip.html" title="trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-skip.html">TrustedTypePolicyFactory-createPolicy-cspTests-none-skip.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-skip.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none-skip.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none.html" title="trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none.html">TrustedTypePolicyFactory-createPolicy-cspTests-none.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-none.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-wildcard.html" title="trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-wildcard.html">TrustedTypePolicyFactory-createPolicy-cspTests-wildcard.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-wildcard.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests-wildcard.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests.html" title="trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests.html">TrustedTypePolicyFactory-createPolicy-cspTests.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-createPolicy-cspTests.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-createPolicy-non-tt-policy-name.html" title="trusted-types/TrustedTypePolicyFactory-createPolicy-non-tt-policy-name.html">TrustedTypePolicyFactory-createPolicy-non-tt-policy-name.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-createPolicy-non-tt-policy-name.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-createPolicy-non-tt-policy-name.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-createPolicy-unenforced.html" title="trusted-types/TrustedTypePolicyFactory-createPolicy-unenforced.html">TrustedTypePolicyFactory-createPolicy-unenforced.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-createPolicy-unenforced.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-createPolicy-unenforced.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-defaultPolicy.html" title="trusted-types/TrustedTypePolicyFactory-defaultPolicy.html">TrustedTypePolicyFactory-defaultPolicy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-defaultPolicy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-defaultPolicy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-getAttributeType-namespace.html" title="trusted-types/TrustedTypePolicyFactory-getAttributeType-namespace.html">TrustedTypePolicyFactory-getAttributeType-namespace.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-getAttributeType-namespace.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-getAttributeType-namespace.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-getAttributeType-svg.html" title="trusted-types/TrustedTypePolicyFactory-getAttributeType-svg.html">TrustedTypePolicyFactory-getAttributeType-svg.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-getAttributeType-svg.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-getAttributeType-svg.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-getAttributeType.html" title="trusted-types/TrustedTypePolicyFactory-getAttributeType.html">TrustedTypePolicyFactory-getAttributeType.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-getAttributeType.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-getAttributeType.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/TrustedTypePolicyFactory-isXXX.html" title="trusted-types/TrustedTypePolicyFactory-isXXX.html">TrustedTypePolicyFactory-isXXX.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/TrustedTypePolicyFactory-isXXX.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/TrustedTypePolicyFactory-isXXX.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Window-TrustedTypes.html" title="trusted-types/Window-TrustedTypes.html">Window-TrustedTypes.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Window-TrustedTypes.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Window-TrustedTypes.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Window-block-eval-function-constructor.html" title="trusted-types/Window-block-eval-function-constructor.html">Window-block-eval-function-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Window-block-eval-function-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Window-block-eval-function-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/Window-setTimeout-setInterval.html" title="trusted-types/Window-setTimeout-setInterval.html">Window-setTimeout-setInterval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/Window-setTimeout-setInterval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/Window-setTimeout-setInterval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-Document-execCommand.html" title="trusted-types/block-Document-execCommand.html">block-Document-execCommand.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-Document-execCommand.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-Document-execCommand.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-DOMParser-parseFromString.html" title="trusted-types/block-string-assignment-to-DOMParser-parseFromString.html">block-string-assignment-to-DOMParser-parseFromString.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-DOMParser-parseFromString.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-DOMParser-parseFromString.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-DedicatedWorker-setTimeout-setInterval.html" title="trusted-types/block-string-assignment-to-DedicatedWorker-setTimeout-setInterval.html">block-string-assignment-to-DedicatedWorker-setTimeout-setInterval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-DedicatedWorker-setTimeout-setInterval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-DedicatedWorker-setTimeout-setInterval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-Document-parseHTMLUnsafe.html" title="trusted-types/block-string-assignment-to-Document-parseHTMLUnsafe.html">block-string-assignment-to-Document-parseHTMLUnsafe.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-Document-parseHTMLUnsafe.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-Document-parseHTMLUnsafe.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-Document-write.html" title="trusted-types/block-string-assignment-to-Document-write.html">block-string-assignment-to-Document-write.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-Document-write.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-Document-write.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-Element-insertAdjacentHTML.html" title="trusted-types/block-string-assignment-to-Element-insertAdjacentHTML.html">block-string-assignment-to-Element-insertAdjacentHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-Element-insertAdjacentHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-Element-insertAdjacentHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-Element-outerHTML.html" title="trusted-types/block-string-assignment-to-Element-outerHTML.html">block-string-assignment-to-Element-outerHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-Element-outerHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-Element-outerHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-Element-setAttribute.html" title="trusted-types/block-string-assignment-to-Element-setAttribute.html">block-string-assignment-to-Element-setAttribute.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-Element-setAttribute.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-Element-setAttribute.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-Element-setAttributeNS.html" title="trusted-types/block-string-assignment-to-Element-setAttributeNS.html">block-string-assignment-to-Element-setAttributeNS.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-Element-setAttributeNS.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-Element-setAttributeNS.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-Element-setHTMLUnsafe.html" title="trusted-types/block-string-assignment-to-Element-setHTMLUnsafe.html">block-string-assignment-to-Element-setHTMLUnsafe.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-Element-setHTMLUnsafe.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-Element-setHTMLUnsafe.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-HTMLElement-generic.html" title="trusted-types/block-string-assignment-to-HTMLElement-generic.html">block-string-assignment-to-HTMLElement-generic.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-HTMLElement-generic.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-HTMLElement-generic.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-HTMLIFrameElement-srcdoc.html" title="trusted-types/block-string-assignment-to-HTMLIFrameElement-srcdoc.html">block-string-assignment-to-HTMLIFrameElement-srcdoc.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-HTMLIFrameElement-srcdoc.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-HTMLIFrameElement-srcdoc.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-Range-createContextualFragment.html" title="trusted-types/block-string-assignment-to-Range-createContextualFragment.html">block-string-assignment-to-Range-createContextualFragment.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-Range-createContextualFragment.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-Range-createContextualFragment.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-ShadowRoot-innerHTML.html" title="trusted-types/block-string-assignment-to-ShadowRoot-innerHTML.html">block-string-assignment-to-ShadowRoot-innerHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-ShadowRoot-innerHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-ShadowRoot-innerHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-ShadowRoot-setHTMLUnsafe.html" title="trusted-types/block-string-assignment-to-ShadowRoot-setHTMLUnsafe.html">block-string-assignment-to-ShadowRoot-setHTMLUnsafe.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-ShadowRoot-setHTMLUnsafe.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-ShadowRoot-setHTMLUnsafe.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-SharedWorker-setTimeout-setInterval.html" title="trusted-types/block-string-assignment-to-SharedWorker-setTimeout-setInterval.html">block-string-assignment-to-SharedWorker-setTimeout-setInterval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-SharedWorker-setTimeout-setInterval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-SharedWorker-setTimeout-setInterval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-Window-setTimeout-setInterval.html" title="trusted-types/block-string-assignment-to-Window-setTimeout-setInterval.html">block-string-assignment-to-Window-setTimeout-setInterval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-Window-setTimeout-setInterval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-Window-setTimeout-setInterval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-attribute-via-attribute-node.html" title="trusted-types/block-string-assignment-to-attribute-via-attribute-node.html">block-string-assignment-to-attribute-via-attribute-node.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-attribute-via-attribute-node.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-attribute-via-attribute-node.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-string-assignment-to-text-and-url-sinks.html" title="trusted-types/block-string-assignment-to-text-and-url-sinks.html">block-string-assignment-to-text-and-url-sinks.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-string-assignment-to-text-and-url-sinks.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-string-assignment-to-text-and-url-sinks.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-text-node-insertion-into-script-element.html" title="trusted-types/block-text-node-insertion-into-script-element.html">block-text-node-insertion-into-script-element.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-text-node-insertion-into-script-element.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-text-node-insertion-into-script-element.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/block-text-node-insertion-into-svg-script-element.html" title="trusted-types/block-text-node-insertion-into-svg-script-element.html">block-text-node-insertion-into-svg-script-element.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/block-text-node-insertion-into-svg-script-element.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/block-text-node-insertion-into-svg-script-element.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/csp-block-eval.html" title="trusted-types/csp-block-eval.html">csp-block-eval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/csp-block-eval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/csp-block-eval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/default-policy-callback-arguments.html" title="trusted-types/default-policy-callback-arguments.html">default-policy-callback-arguments.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/default-policy-callback-arguments.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/default-policy-callback-arguments.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/default-policy-report-only.html" title="trusted-types/default-policy-report-only.html">default-policy-report-only.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/default-policy-report-only.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/default-policy-report-only.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/default-policy.html" title="trusted-types/default-policy.html">default-policy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/default-policy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/default-policy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/empty-default-policy-report-only.html" title="trusted-types/empty-default-policy-report-only.html">empty-default-policy-report-only.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/empty-default-policy-report-only.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/empty-default-policy-report-only.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/empty-default-policy.html" title="trusted-types/empty-default-policy.html">empty-default-policy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/empty-default-policy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/empty-default-policy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/eval-csp-no-tt.html" title="trusted-types/eval-csp-no-tt.html">eval-csp-no-tt.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/eval-csp-no-tt.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/eval-csp-no-tt.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/eval-csp-tt-default-policy-mutate.html" title="trusted-types/eval-csp-tt-default-policy-mutate.html">eval-csp-tt-default-policy-mutate.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/eval-csp-tt-default-policy-mutate.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/eval-csp-tt-default-policy-mutate.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/eval-csp-tt-default-policy.html" title="trusted-types/eval-csp-tt-default-policy.html">eval-csp-tt-default-policy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/eval-csp-tt-default-policy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/eval-csp-tt-default-policy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/eval-csp-tt-no-default-policy.html" title="trusted-types/eval-csp-tt-no-default-policy.html">eval-csp-tt-no-default-policy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/eval-csp-tt-no-default-policy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/eval-csp-tt-no-default-policy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/eval-function-constructor-untrusted-arguments-and-applying-default-policy.html" title="trusted-types/eval-function-constructor-untrusted-arguments-and-applying-default-policy.html">eval-function-constructor-untrusted-arguments-and-applying-default-policy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/eval-function-constructor-untrusted-arguments-and-applying-default-policy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/eval-function-constructor-untrusted-arguments-and-applying-default-policy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/eval-function-constructor-untrusted-arguments-and-default-policy-throwing.html" title="trusted-types/eval-function-constructor-untrusted-arguments-and-default-policy-throwing.html">eval-function-constructor-untrusted-arguments-and-default-policy-throwing.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/eval-function-constructor-untrusted-arguments-and-default-policy-throwing.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/eval-function-constructor-untrusted-arguments-and-default-policy-throwing.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/eval-function-constructor.html" title="trusted-types/eval-function-constructor.html">eval-function-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/eval-function-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/eval-function-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/eval-no-csp-no-tt-default-policy.html" title="trusted-types/eval-no-csp-no-tt-default-policy.html">eval-no-csp-no-tt-default-policy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/eval-no-csp-no-tt-default-policy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/eval-no-csp-no-tt-default-policy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/eval-no-csp-no-tt.html" title="trusted-types/eval-no-csp-no-tt.html">eval-no-csp-no-tt.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/eval-no-csp-no-tt.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/eval-no-csp-no-tt.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/eval-with-permissive-csp.html" title="trusted-types/eval-with-permissive-csp.html">eval-with-permissive-csp.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/eval-with-permissive-csp.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/eval-with-permissive-csp.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/get-trusted-types-compliant-attribute-value.html" title="trusted-types/get-trusted-types-compliant-attribute-value.html">get-trusted-types-compliant-attribute-value.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/get-trusted-types-compliant-attribute-value.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/get-trusted-types-compliant-attribute-value.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/idlharness.window.js" title="trusted-types/idlharness.window.js">idlharness.window.js</a> <a class="wpt-live" href="http://wpt.live/trusted-types/idlharness.window.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/idlharness.window.js"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/inheriting-csp-for-local-schemes.html" title="trusted-types/inheriting-csp-for-local-schemes.html">inheriting-csp-for-local-schemes.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/inheriting-csp-for-local-schemes.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/inheriting-csp-for-local-schemes.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/legacy-trusted-script-urls.html" title="trusted-types/legacy-trusted-script-urls.html">legacy-trusted-script-urls.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/legacy-trusted-script-urls.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/legacy-trusted-script-urls.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/legacy-trusted-scripts.html" title="trusted-types/legacy-trusted-scripts.html">legacy-trusted-scripts.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/legacy-trusted-scripts.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/legacy-trusted-scripts.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/modify-attributes-in-callback.html" title="trusted-types/modify-attributes-in-callback.html">modify-attributes-in-callback.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/modify-attributes-in-callback.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/modify-attributes-in-callback.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/no-require-trusted-types-for-report-only.html" title="trusted-types/no-require-trusted-types-for-report-only.html">no-require-trusted-types-for-report-only.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/no-require-trusted-types-for-report-only.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/no-require-trusted-types-for-report-only.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/no-require-trusted-types-for.html" title="trusted-types/no-require-trusted-types-for.html">no-require-trusted-types-for.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/no-require-trusted-types-for.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/no-require-trusted-types-for.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/require-trusted-types-for-TypeError-belongs-to-the-global-object-realm.html" title="trusted-types/require-trusted-types-for-TypeError-belongs-to-the-global-object-realm.html">require-trusted-types-for-TypeError-belongs-to-the-global-object-realm.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/require-trusted-types-for-TypeError-belongs-to-the-global-object-realm.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/require-trusted-types-for-TypeError-belongs-to-the-global-object-realm.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/require-trusted-types-for-report-only.html" title="trusted-types/require-trusted-types-for-report-only.html">require-trusted-types-for-report-only.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/require-trusted-types-for-report-only.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/require-trusted-types-for-report-only.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/require-trusted-types-for.html" title="trusted-types/require-trusted-types-for.html">require-trusted-types-for.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/require-trusted-types-for.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/require-trusted-types-for.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-001-outerHTML.xhtml" title="trusted-types/script-enforcement-001-outerHTML.xhtml">script-enforcement-001-outerHTML.xhtml</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-001-outerHTML.xhtml"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-001-outerHTML.xhtml"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-001.html" title="trusted-types/script-enforcement-001.html">script-enforcement-001.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-001.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-002-outerHTML.xhtml" title="trusted-types/script-enforcement-002-outerHTML.xhtml">script-enforcement-002-outerHTML.xhtml</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-002-outerHTML.xhtml"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-002-outerHTML.xhtml"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-002.html" title="trusted-types/script-enforcement-002.html">script-enforcement-002.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-002.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-002.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-003.html" title="trusted-types/script-enforcement-003.html">script-enforcement-003.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-003.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-003.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-004.html" title="trusted-types/script-enforcement-004.html">script-enforcement-004.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-004.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-004.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-005.html" title="trusted-types/script-enforcement-005.html">script-enforcement-005.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-005.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-005.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-006.html" title="trusted-types/script-enforcement-006.html">script-enforcement-006.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-006.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-006.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-007.html" title="trusted-types/script-enforcement-007.html">script-enforcement-007.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-007.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-007.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-008.https.html" title="trusted-types/script-enforcement-008.https.html">script-enforcement-008.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/script-enforcement-008.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-008.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-009.https.html" title="trusted-types/script-enforcement-009.https.html">script-enforcement-009.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/script-enforcement-009.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-009.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-010.html" title="trusted-types/script-enforcement-010.html">script-enforcement-010.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-010.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-010.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/script-enforcement-011.html" title="trusted-types/script-enforcement-011.html">script-enforcement-011.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/script-enforcement-011.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/script-enforcement-011.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/set-attributes-no-require-trusted-types.html" title="trusted-types/set-attributes-no-require-trusted-types.html">set-attributes-no-require-trusted-types.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/set-attributes-no-require-trusted-types.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/set-attributes-no-require-trusted-types.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/set-attributes-require-trusted-types-default-policy.html" title="trusted-types/set-attributes-require-trusted-types-default-policy.html">set-attributes-require-trusted-types-default-policy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/set-attributes-require-trusted-types-default-policy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/set-attributes-require-trusted-types-default-policy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/set-attributes-require-trusted-types-no-default-policy.html" title="trusted-types/set-attributes-require-trusted-types-no-default-policy.html">set-attributes-require-trusted-types-no-default-policy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/set-attributes-require-trusted-types-no-default-policy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/set-attributes-require-trusted-types-no-default-policy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-001.html" title="trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-001.html">should-sink-type-mismatch-violation-be-blocked-by-csp-001.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-001.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-002-worker.html" title="trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-002-worker.html">should-sink-type-mismatch-violation-be-blocked-by-csp-002-worker.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-002-worker.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-002-worker.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-003.html" title="trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-003.html">should-sink-type-mismatch-violation-be-blocked-by-csp-003.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-003.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/should-sink-type-mismatch-violation-be-blocked-by-csp-003.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-001.html" title="trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-001.html">should-trusted-type-policy-creation-be-blocked-by-csp-001.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-001.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-002.html" title="trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-002.html">should-trusted-type-policy-creation-be-blocked-by-csp-002.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-002.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-002.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-003.html" title="trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-003.html">should-trusted-type-policy-creation-be-blocked-by-csp-003.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-003.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-003.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-004-worker.html" title="trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-004-worker.html">should-trusted-type-policy-creation-be-blocked-by-csp-004-worker.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-004-worker.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-004-worker.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-005.html" title="trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-005.html">should-trusted-type-policy-creation-be-blocked-by-csp-005.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-005.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/should-trusted-type-policy-creation-be-blocked-by-csp-005.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-createHTMLDocument.html" title="trusted-types/trusted-types-createHTMLDocument.html">trusted-types-createHTMLDocument.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-createHTMLDocument.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-createHTMLDocument.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-duplicate-names-list-report-only.html" title="trusted-types/trusted-types-duplicate-names-list-report-only.html">trusted-types-duplicate-names-list-report-only.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-duplicate-names-list-report-only.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-duplicate-names-list-report-only.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-duplicate-names-list.html" title="trusted-types/trusted-types-duplicate-names-list.html">trusted-types-duplicate-names-list.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-duplicate-names-list.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-duplicate-names-list.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-duplicate-names-without-enforcement.html" title="trusted-types/trusted-types-duplicate-names-without-enforcement.html">trusted-types-duplicate-names-without-enforcement.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-duplicate-names-without-enforcement.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-duplicate-names-without-enforcement.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-duplicate-names.html" title="trusted-types/trusted-types-duplicate-names.html">trusted-types-duplicate-names.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-duplicate-names.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-duplicate-names.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-eval-reporting-no-unsafe-eval.html" title="trusted-types/trusted-types-eval-reporting-no-unsafe-eval.html">trusted-types-eval-reporting-no-unsafe-eval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-eval-reporting-no-unsafe-eval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-eval-reporting-no-unsafe-eval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-eval-reporting-report-only.html" title="trusted-types/trusted-types-eval-reporting-report-only.html">trusted-types-eval-reporting-report-only.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-eval-reporting-report-only.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-eval-reporting-report-only.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-event-handlers.html" title="trusted-types/trusted-types-event-handlers.html">trusted-types-event-handlers.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-event-handlers.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-event-handlers.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-navigation.html" title="trusted-types/trusted-types-navigation.html">trusted-types-navigation.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-navigation.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-navigation.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-report-only.html" title="trusted-types/trusted-types-report-only.html">trusted-types-report-only.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-report-only.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-report-only.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-check-report-DedicatedWorker-create-policy.html" title="trusted-types/trusted-types-reporting-check-report-DedicatedWorker-create-policy.html">trusted-types-reporting-check-report-DedicatedWorker-create-policy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-check-report-DedicatedWorker-create-policy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-check-report-DedicatedWorker-create-policy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-check-report-DedicatedWorker-sink-mismatch.html" title="trusted-types/trusted-types-reporting-check-report-DedicatedWorker-sink-mismatch.html">trusted-types-reporting-check-report-DedicatedWorker-sink-mismatch.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-check-report-DedicatedWorker-sink-mismatch.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-check-report-DedicatedWorker-sink-mismatch.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-check-report-Window-create-policy.html" title="trusted-types/trusted-types-reporting-check-report-Window-create-policy.html">trusted-types-reporting-check-report-Window-create-policy.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-check-report-Window-create-policy.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-check-report-Window-create-policy.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-check-report-Window-sink-mismatch.html" title="trusted-types/trusted-types-reporting-check-report-Window-sink-mismatch.html">trusted-types-reporting-check-report-Window-sink-mismatch.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-check-report-Window-sink-mismatch.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-check-report-Window-sink-mismatch.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-clipping-of-sample.html" title="trusted-types/trusted-types-reporting-clipping-of-sample.html">trusted-types-reporting-clipping-of-sample.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-clipping-of-sample.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-clipping-of-sample.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-DOMParser-parseFromString.html" title="trusted-types/trusted-types-reporting-for-DOMParser-parseFromString.html">trusted-types-reporting-for-DOMParser-parseFromString.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-DOMParser-parseFromString.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-DOMParser-parseFromString.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-DedicatedWorker-DedicatedWorker-constructor.html" title="trusted-types/trusted-types-reporting-for-DedicatedWorker-DedicatedWorker-constructor.html">trusted-types-reporting-for-DedicatedWorker-DedicatedWorker-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-DedicatedWorker-DedicatedWorker-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-DedicatedWorker-DedicatedWorker-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-DedicatedWorker-ServiceWorkerContainer-register.https.html" title="trusted-types/trusted-types-reporting-for-DedicatedWorker-ServiceWorkerContainer-register.https.html">trusted-types-reporting-for-DedicatedWorker-ServiceWorkerContainer-register.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/trusted-types-reporting-for-DedicatedWorker-ServiceWorkerContainer-register.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-DedicatedWorker-ServiceWorkerContainer-register.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-DedicatedWorker-eval.html" title="trusted-types/trusted-types-reporting-for-DedicatedWorker-eval.html">trusted-types-reporting-for-DedicatedWorker-eval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-DedicatedWorker-eval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-DedicatedWorker-eval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-DedicatedWorker-function-constructor.html" title="trusted-types/trusted-types-reporting-for-DedicatedWorker-function-constructor.html">trusted-types-reporting-for-DedicatedWorker-function-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-DedicatedWorker-function-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-DedicatedWorker-function-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-DedicatedWorker-importScripts.html" title="trusted-types/trusted-types-reporting-for-DedicatedWorker-importScripts.html">trusted-types-reporting-for-DedicatedWorker-importScripts.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-DedicatedWorker-importScripts.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-DedicatedWorker-importScripts.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-DedicatedWorker-setTimeout-setInterval.html" title="trusted-types/trusted-types-reporting-for-DedicatedWorker-setTimeout-setInterval.html">trusted-types-reporting-for-DedicatedWorker-setTimeout-setInterval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-DedicatedWorker-setTimeout-setInterval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-DedicatedWorker-setTimeout-setInterval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Document-execCommand.html" title="trusted-types/trusted-types-reporting-for-Document-execCommand.html">trusted-types-reporting-for-Document-execCommand.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Document-execCommand.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Document-execCommand.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Document-parseHTMLUnsafe.html" title="trusted-types/trusted-types-reporting-for-Document-parseHTMLUnsafe.html">trusted-types-reporting-for-Document-parseHTMLUnsafe.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Document-parseHTMLUnsafe.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Document-parseHTMLUnsafe.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Document-write.html" title="trusted-types/trusted-types-reporting-for-Document-write.html">trusted-types-reporting-for-Document-write.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Document-write.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Document-write.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Element-innerHTML.html" title="trusted-types/trusted-types-reporting-for-Element-innerHTML.html">trusted-types-reporting-for-Element-innerHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Element-innerHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Element-innerHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Element-insertAdjacentHTML.html" title="trusted-types/trusted-types-reporting-for-Element-insertAdjacentHTML.html">trusted-types-reporting-for-Element-insertAdjacentHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Element-insertAdjacentHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Element-insertAdjacentHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Element-outerHTML.html" title="trusted-types/trusted-types-reporting-for-Element-outerHTML.html">trusted-types-reporting-for-Element-outerHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Element-outerHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Element-outerHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Element-setAttribute.html" title="trusted-types/trusted-types-reporting-for-Element-setAttribute.html">trusted-types-reporting-for-Element-setAttribute.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Element-setAttribute.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Element-setAttribute.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Element-setHTMLUnsafe.html" title="trusted-types/trusted-types-reporting-for-Element-setHTMLUnsafe.html">trusted-types-reporting-for-Element-setHTMLUnsafe.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Element-setHTMLUnsafe.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Element-setHTMLUnsafe.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-HTMLIFrameElement-srcdoc.html" title="trusted-types/trusted-types-reporting-for-HTMLIFrameElement-srcdoc.html">trusted-types-reporting-for-HTMLIFrameElement-srcdoc.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-HTMLIFrameElement-srcdoc.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-HTMLIFrameElement-srcdoc.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-HTMLScriptElement-children-change.html" title="trusted-types/trusted-types-reporting-for-HTMLScriptElement-children-change.html">trusted-types-reporting-for-HTMLScriptElement-children-change.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-HTMLScriptElement-children-change.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-HTMLScriptElement-children-change.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-HTMLScriptElement-innerHTML.html" title="trusted-types/trusted-types-reporting-for-HTMLScriptElement-innerHTML.html">trusted-types-reporting-for-HTMLScriptElement-innerHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-HTMLScriptElement-innerHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-HTMLScriptElement-innerHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-HTMLScriptElement.html" title="trusted-types/trusted-types-reporting-for-HTMLScriptElement.html">trusted-types-reporting-for-HTMLScriptElement.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-HTMLScriptElement.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-HTMLScriptElement.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Range-createContextualFragment.html" title="trusted-types/trusted-types-reporting-for-Range-createContextualFragment.html">trusted-types-reporting-for-Range-createContextualFragment.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Range-createContextualFragment.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Range-createContextualFragment.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-SVGScriptElement-children-change.html" title="trusted-types/trusted-types-reporting-for-SVGScriptElement-children-change.html">trusted-types-reporting-for-SVGScriptElement-children-change.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-SVGScriptElement-children-change.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-SVGScriptElement-children-change.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-SVGScriptElement-innerHTML.html" title="trusted-types/trusted-types-reporting-for-SVGScriptElement-innerHTML.html">trusted-types-reporting-for-SVGScriptElement-innerHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-SVGScriptElement-innerHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-SVGScriptElement-innerHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-ServiceWorker-ServiceWorkerContainer-register.https.html" title="trusted-types/trusted-types-reporting-for-ServiceWorker-ServiceWorkerContainer-register.https.html">trusted-types-reporting-for-ServiceWorker-ServiceWorkerContainer-register.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/trusted-types-reporting-for-ServiceWorker-ServiceWorkerContainer-register.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-ServiceWorker-ServiceWorkerContainer-register.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-ServiceWorker-eval.https.html" title="trusted-types/trusted-types-reporting-for-ServiceWorker-eval.https.html">trusted-types-reporting-for-ServiceWorker-eval.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/trusted-types-reporting-for-ServiceWorker-eval.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-ServiceWorker-eval.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-ServiceWorker-function-constructor.https.html" title="trusted-types/trusted-types-reporting-for-ServiceWorker-function-constructor.https.html">trusted-types-reporting-for-ServiceWorker-function-constructor.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/trusted-types-reporting-for-ServiceWorker-function-constructor.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-ServiceWorker-function-constructor.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-ServiceWorker-importScripts.https.html" title="trusted-types/trusted-types-reporting-for-ServiceWorker-importScripts.https.html">trusted-types-reporting-for-ServiceWorker-importScripts.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/trusted-types-reporting-for-ServiceWorker-importScripts.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-ServiceWorker-importScripts.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-ServiceWorker-setTimeout-setInterval.https.html" title="trusted-types/trusted-types-reporting-for-ServiceWorker-setTimeout-setInterval.https.html">trusted-types-reporting-for-ServiceWorker-setTimeout-setInterval.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/trusted-types-reporting-for-ServiceWorker-setTimeout-setInterval.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-ServiceWorker-setTimeout-setInterval.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-ShadowRoot-innerHTML.html" title="trusted-types/trusted-types-reporting-for-ShadowRoot-innerHTML.html">trusted-types-reporting-for-ShadowRoot-innerHTML.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-ShadowRoot-innerHTML.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-ShadowRoot-innerHTML.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-ShadowRoot-setHTMLUnsafe.html" title="trusted-types/trusted-types-reporting-for-ShadowRoot-setHTMLUnsafe.html">trusted-types-reporting-for-ShadowRoot-setHTMLUnsafe.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-ShadowRoot-setHTMLUnsafe.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-ShadowRoot-setHTMLUnsafe.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-SharedWorker-DedicatedWorker-constructor.html" title="trusted-types/trusted-types-reporting-for-SharedWorker-DedicatedWorker-constructor.html">trusted-types-reporting-for-SharedWorker-DedicatedWorker-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-SharedWorker-DedicatedWorker-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-SharedWorker-DedicatedWorker-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-SharedWorker-ServiceWorkerContainer-register.https.html" title="trusted-types/trusted-types-reporting-for-SharedWorker-ServiceWorkerContainer-register.https.html">trusted-types-reporting-for-SharedWorker-ServiceWorkerContainer-register.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/trusted-types-reporting-for-SharedWorker-ServiceWorkerContainer-register.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-SharedWorker-ServiceWorkerContainer-register.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-SharedWorker-eval.html" title="trusted-types/trusted-types-reporting-for-SharedWorker-eval.html">trusted-types-reporting-for-SharedWorker-eval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-SharedWorker-eval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-SharedWorker-eval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-SharedWorker-function-constructor.html" title="trusted-types/trusted-types-reporting-for-SharedWorker-function-constructor.html">trusted-types-reporting-for-SharedWorker-function-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-SharedWorker-function-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-SharedWorker-function-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-SharedWorker-importScripts.html" title="trusted-types/trusted-types-reporting-for-SharedWorker-importScripts.html">trusted-types-reporting-for-SharedWorker-importScripts.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-SharedWorker-importScripts.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-SharedWorker-importScripts.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-SharedWorker-setTimeout-setInterval.html" title="trusted-types/trusted-types-reporting-for-SharedWorker-setTimeout-setInterval.html">trusted-types-reporting-for-SharedWorker-setTimeout-setInterval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-SharedWorker-setTimeout-setInterval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-SharedWorker-setTimeout-setInterval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Window-DedicatedWorker-constructor.html" title="trusted-types/trusted-types-reporting-for-Window-DedicatedWorker-constructor.html">trusted-types-reporting-for-Window-DedicatedWorker-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Window-DedicatedWorker-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Window-DedicatedWorker-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Window-ServiceWorkerContainer-register.https.html" title="trusted-types/trusted-types-reporting-for-Window-ServiceWorkerContainer-register.https.html">trusted-types-reporting-for-Window-ServiceWorkerContainer-register.https.html</a> <a class="wpt-live" href="https://wpt.live/trusted-types/trusted-types-reporting-for-Window-ServiceWorkerContainer-register.https.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Window-ServiceWorkerContainer-register.https.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Window-SharedWorker-constructor.html" title="trusted-types/trusted-types-reporting-for-Window-SharedWorker-constructor.html">trusted-types-reporting-for-Window-SharedWorker-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Window-SharedWorker-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Window-SharedWorker-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Window-eval.html" title="trusted-types/trusted-types-reporting-for-Window-eval.html">trusted-types-reporting-for-Window-eval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Window-eval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Window-eval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Window-function-constructor.html" title="trusted-types/trusted-types-reporting-for-Window-function-constructor.html">trusted-types-reporting-for-Window-function-constructor.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Window-function-constructor.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Window-function-constructor.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting-for-Window-setTimeout-setInterval.html" title="trusted-types/trusted-types-reporting-for-Window-setTimeout-setInterval.html">trusted-types-reporting-for-Window-setTimeout-setInterval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting-for-Window-setTimeout-setInterval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting-for-Window-setTimeout-setInterval.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-reporting.html" title="trusted-types/trusted-types-reporting.html">trusted-types-reporting.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-reporting.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-reporting.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-sandbox-allow-scripts.html" title="trusted-types/trusted-types-sandbox-allow-scripts.html">trusted-types-sandbox-allow-scripts.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-sandbox-allow-scripts.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-sandbox-allow-scripts.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-sandbox-no-allow-scripts.html" title="trusted-types/trusted-types-sandbox-no-allow-scripts.html">trusted-types-sandbox-no-allow-scripts.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-sandbox-no-allow-scripts.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-sandbox-no-allow-scripts.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-source-file-path.html" title="trusted-types/trusted-types-source-file-path.html">trusted-types-source-file-path.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-source-file-path.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-source-file-path.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-svg-script-set-href.html" title="trusted-types/trusted-types-svg-script-set-href.html">trusted-types-svg-script-set-href.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-svg-script-set-href.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-svg-script-set-href.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/trusted-types-tojson.html" title="trusted-types/trusted-types-tojson.html">trusted-types-tojson.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/trusted-types-tojson.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/trusted-types-tojson.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/trusted-types/tt-block-eval.html" title="trusted-types/tt-block-eval.html">tt-block-eval.html</a> <a class="wpt-live" href="http://wpt.live/trusted-types/tt-block-eval.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/trusted-types/tt-block-eval.html"><small>(source)</small></a>
    </ul>
   </details>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><em>This section is not normative.</em></p>
   <p>Certain classes of vulnerabilities occur when a web application
takes a value from an attacker-controlled source (e.g. the
document URL parameter, or postMessage channel) and passes that value,
without appropriate sanitization to one of the
<a href="#injection-sinks">injection sinks</a> - various Web API functions with
powerful capabilities.</p>
   <p>These types of issues are traditionally difficult to prevent.
Applications commonly call those injection sinks with attacker-controlled
values without authors realizing it, since it’s not clear if the
input was attacker-controlled when invoking the injection sink.
Due to the dynamic nature of JavaScript it’s also difficult to ascertain
that such pattern is not present in a given program. It is often missed
during manual code reviews, and automated code analysis. As an example,
if <code>aString</code> contains untrusted data, <code>foo[bar] = aString</code> is a statement
that potentially can trigger a vulnerability, depending on a value
of <code>foo</code> and <code>bar</code>.</p>
   <p>This document focuses on preventing DOM-Based Cross-Site Scripting
that occurs when attacker-controlled data reaches
<a href="#dom-xss-injection-sinks">§ 2.1.1 DOM XSS injection sinks</a>, as that eventually causes execution of the
script payload controlled by the attacker. DOM XSS is prevalent in the
web applications as there are over 60 different
injection sinks (e.g. <code>Element.innerHTML</code>, or <code>Location.href</code> setters).</p>
   <p>This document defines <a href="#trusted-types">Trusted Types</a> - an API that allows applications
to lock down <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink">injection sinks</a> to only accept non-spoofable, typed values
in place of strings. These values can in turn only be created from
application-defined <a data-link-type="dfn" href="#policies" id="ref-for-policies">policies</a>, allowing the authors to define rules
guarding dangerous APIs, reducing the attack surface to small, isolated parts
of the web application codebase, which are substantially easier to safeguard,
monitor and review.</p>
   <h3 class="heading settled" data-level="1.1" id="goals"><span class="secno">1.1. </span><span class="content">Goals</span><a class="self-link" href="#goals"></a></h3>
   <ul>
    <li data-md>
     <p>Minimize the likelihood of client-side vulnerabilities that occur when
calling powerful Web APIs with untrusted data - for example,
minimize the likelihood of DOM XSS.</p>
    <li data-md>
     <p>Encourage a design in which security decisions are
encapsulated within a small part of the application.</p>
    <li data-md>
     <p>Reduce security review surface for complex web application
codebases.</p>
    <li data-md>
     <p>Allow the usability-preserving detection of vulnerabilities similar to how regular
programming errors are detected and surfaced to the developers, with the
assist of dynamic and static analysis tools.</p>
   </ul>
   <h3 class="heading settled" data-level="1.2" id="non-goals"><span class="secno">1.2. </span><span class="content">Non-goals</span><a class="self-link" href="#non-goals"></a></h3>
   <ul>
    <li data-md>
     <p>Prevent, or mitigate the result of injections into server-side generated
markup, in specific reflections into the body of the scripts running in a
document. To address server-side XSS vectors, we recommend existing
solutions like templating systems or <a data-link-type="biblio" href="#biblio-csp3" title="Content Security Policy Level 3">CSP</a>
<a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#script-src" id="ref-for-script-src">script-src</a>.</p>
    <li data-md>
     <p>Address resource confinement, e.g. to prevent data exfiltration, or
connecting to external sources via <a data-link-type="biblio" href="#biblio-fetch" title="Fetch Standard">[Fetch]</a>.</p>
    <li data-md>
     <p>Control subresource loading. Trusted Types aim to allow the authors to
control loading resources that can script the current document, but not
other subresources.</p>
    <li data-md>
     <p>Prevent <em>cross-origin</em> JavaScript execution (for example, Trusted Types
don’t guard loading new documents with JavaScript code via <code>data:</code> URLs).</p>
    <li data-md>
     <p>Prevent malicious authors of the web application’s JavaScript code
from being able to bypass the restrictions; attempting to protect against
malicious authors would result in an overly complex and not-practical
design.</p>
   </ul>
   <h3 class="heading settled" data-level="1.3" id="use-cases"><span class="secno">1.3. </span><span class="content">Use cases</span><a class="self-link" href="#use-cases"></a></h3>
   <ul>
    <li data-md>
     <p>An author maintains a complex web application written in a framework
that uses a secure templating system to generate the UI
components. The application also depends on 3rd party client-side
libraries that perform auxiliary tasks (e.g. analytics, performance
monitoring). To ensure that none of these components introduce DOM
XSS vulnerabilities, author defines a Trusted Type policy in the
templating library and enables the enforcement for the <a href="#dom-xss-injection-sinks">§ 2.1.1 DOM XSS injection sinks</a>.</p>
    <li data-md>
     <p>A website uses <a href="#dom-xss-injection-sinks">§ 2.1.1 DOM XSS injection sinks</a>. The website-developer adds trusted
types to it and monitors violations by using the
<a data-link-type="http-header" href="https://w3c.github.io/webappsec-csp/#header-content-security-policy-report-only" id="ref-for-header-content-security-policy-report-only">Content-Security-Policy-Report-Only</a> header field.
Violations are iteratively fixed by refactoring the code to use only safe
methods. Afterwards, no <a href="#dom-xss-injection-sinks">§ 2.1.1 DOM XSS injection sinks</a> are called anymore.
Hence, no trusted types are required anymore. The developer switches the
report-only mode off and disables trusted type policies with the
<a data-link-type="dfn" href="#trusted-types-directive" id="ref-for-trusted-types-directive">trusted-types</a> and the
<a data-link-type="dfn" href="#require-trusted-types-for-directive" id="ref-for-require-trusted-types-for-directive">require-trusted-types-for</a>
directives.
The website’s functionality was never impaired during the refactorings.</p>
    <li data-md>
     <p>A large team maintains a complex client-side application.
They create a number of Trusted Types policies that satisfy the security
requirements for the application. The team consolidates the policy
implementations and the safe abstractions that use them in a small number
of heavily reviewed files and requires extra approval for commits that
affect these files.</p>
     <p>The need to create trusted values to affect <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①">injection sinks</a>,
combined with additional scrutiny on changes that affect policy
code, incents developers to use safe abstractions instead of writing ad-hoc
string composition code when interacting with <a href="#dom-xss-injection-sinks">§ 2.1.1 DOM XSS injection sinks</a>.</p>
     <p>When considering the risk of DOM XSS, security auditors find a
small attack surface; they focus on the small amount of code that
crafts the CSP header and provides the safe abstractions, and ignore the
bulk of client-side application code.</p>
    <li data-md>
     <p>An existing web application interacts with the DOM mostly using XSS-safe
patterns (i.e. without using <a href="#dom-xss-injection-sinks">§ 2.1.1 DOM XSS injection sinks</a>). In a few places,
however, it resorts to using risky patterns like loading additional script using
JSONP, calling into <code>innerHTML</code> or <code>eval</code>.</p>
     <p>Review finds that those places do not cause XSS (e.g. because
user-controlled data is not part of the input to those sinks), but it’s
hard to migrate the application off using these patterns.</p>
     <p>As such, CSP cannot be enforced on this application (without resorting to
an unsafe version using <code>'unsafe-eval' 'unsafe-inline'</code>). Additionally,
it’s possible some codebase with DOM XSS flaws was not included in a review,
or will be introduced in the future.</p>
     <p>To address this risk, the author converts the reviewed parts to using
Trusted Types, and enables Trusted Type <a data-link-type="dfn" href="#enforcement" id="ref-for-enforcement">enforcement</a>. Additional places
using the injection sinks, should they exist in the future, are correctly
blocked and reported.</p>
    <li data-md>
     <p>A security team is tasked with assuring that the client-side heavy
application code does not contain XSS vulnerabilities. Since the server side
code is homogeneous (it’s mostly an API backend), and the application
enforces Trusted Types, the review only focuses on the Trusted Type
<a data-link-type="dfn" href="#policies" id="ref-for-policies①">policies</a> and their rules. Later on the reviewed policy names are
allowed in the 'trusted-types' CSP directive, safe for the developers to
use.</p>
     <p>Any additional code, including the code of often-changing dependencies,
can be excluded from the review, unless it creates a Trusted Type policy.
Without it, the code cannot cause a DOM XSS.</p>
   </ul>
   <h2 class="heading settled" data-level="2" id="framework"><span class="secno">2. </span><span class="content">Framework</span><a class="self-link" href="#framework"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="injection-sinks"><span class="secno">2.1. </span><span class="content">Injection sinks</span><a class="self-link" href="#injection-sinks"></a></h3>
   <p><em>This section is not normative.</em></p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="injection-sink">injection sink</dfn> is a powerful Web API function that should only
be called with trusted, validated or appropriately sanitized input.
Calling the injection sink with attacker-controlled (i.e. injected) inputs
has undesired consequences and is considered a security vulnerability.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The exact list of injection sinks covered by this document is defined in
<a href="#integrations">§ 4 Integrations</a>.</p>
   <p>It’s difficult to determine if a given application contains such a
vulnerability (e.g. if it is vulnerable to DOM XSS) only by analyzing
the invocations of <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②">injection sinks</a>, as their inputs (usually strings)
do not carry the information about their provenance. For example, while
the application might intentionally call <code>eval()</code> with dynamically created
inputs (e.g. for code obfuscation purposes), calling <code>eval()</code> on strings
supplied by the attacker is definitely a security vulnerability - but
it’s not easy to distinguish one from the other.</p>
   <p>This document organizes the injection sinks into groups, based on the
capabilities that sinks in a given group have. <a data-link-type="dfn" href="#enforcement" id="ref-for-enforcement①">Enforcement</a> for groups is controlled via <a data-link-type="dfn" href="#trusted-types-sink-group" id="ref-for-trusted-types-sink-group">trusted-types-sink-group</a> values.</p>
   <h4 class="heading settled" data-level="2.1.1" id="dom-xss-injection-sinks"><span class="secno">2.1.1. </span><span class="content">DOM XSS injection sinks</span><a class="self-link" href="#dom-xss-injection-sinks"></a></h4>
   <p><em>This section is not normative.</em></p>
   <p>DOM XSS <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink③">injection sinks</a>  evaluate an input string value in a way that could
result in DOM XSS if that value is untrusted.</p>
   <p>Examples include:</p>
   <ul>
    <li data-md>
     <p>Setters for <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code> attributes that accept a URL of the code to load
like <code class="idl"><a class="idl-code" data-link-type="attribute" href="#dom-htmlscriptelement-src" id="ref-for-dom-htmlscriptelement-src">HTMLScriptElement.src</a></code>,</p>
    <li data-md>
     <p>Setters for <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code> attributes that accept a code to execute like
<code class="idl"><a class="idl-code" data-link-type="attribute" href="#dom-htmlscriptelement-text" id="ref-for-dom-htmlscriptelement-text">HTMLScriptElement.text</a></code>,</p>
    <li data-md>
     <p>Functions that execute code directly like <code>eval</code>,</p>
    <li data-md>
     <p>Navigation to 'javascript:' URLs.</p>
   </ul>
   <p>Since HTML parsers can create arbitrary elements, including scripts, and set arbitrary attributes,
DOM XSS <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink④">injection sinks</a> also include HTML parsing sinks:</p>
   <ul>
    <li data-md>
     <p>Functions that parse &amp; insert HTML strings into the document like
<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-innerhtml" id="ref-for-dom-element-innerhtml">Element.innerHTML</a></code>,
<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-shadowroot-innerhtml" id="ref-for-dom-shadowroot-innerhtml">ShadowRoot.innerHTML</a></code>,
and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-outerhtml" id="ref-for-dom-element-outerhtml">Element.outerHTML</a></code> setters, or Document.write.</p>
    <li data-md>
     <p>Functions that create a new same-origin <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code> with caller-controlled
markup like <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring" id="ref-for-dom-domparser-parsefromstring">parseFromString()</a></code>.</p>
   </ul>
   <p>Guarding DOM XSS injection sinks is controlled by the <a data-link-type="dfn" href="#trusted-types-sink-group" id="ref-for-trusted-types-sink-group①">trusted-types-sink-group</a> named 'script'.</p>
   <h3 class="heading settled" data-level="2.2" id="trusted-types"><span class="secno">2.2. </span><span class="content">Trusted Types</span><a class="self-link" href="#trusted-types"></a></h3>
   <p>To allow the authors to control values reaching injection sinks,
we introduce <a href="#trusted-types">§ 2.2 Trusted Types</a>. The following list of
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="trusted-type">Trusted Type</dfn>s indicating that a given value is
trusted by the authors to be used with an <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink⑤">injection sink</a> in a certain context.</p>
   <p class="note" role="note"><span class="marker">Note:</span> <strong>Trusted</strong> in this context signifies the fact that the application author
is confident that a given value can be safely used with an injection sink - she
<em>trusts</em> it does not introduce a vulnerability. That does not imply that the
value is indeed <em>safe</em>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This allows the authors to specify the intention when creating a given
value, and the user agents to introduce checks based on the type of
such value to preserve the authors' intent. For example, if
authors intend a value to be used as an HTML snippet, an attempt to
load a script from that value would fail.</p>
   <p class="note" role="note"><span class="marker">Note:</span> All Trusted Types wrap over an immutable string, specified when the
objects are created. These objects are unforgeable in a sense that
there is no JavaScript-exposed way to replace the inner string value
of a given object - it’s stored in an internal slot with no setter
exposed.</p>
   <p class="note" role="note"><span class="marker">Note:</span> All Trusted Types stringifiers return the inner string value.
This makes it easy to incrementally migrate the application code into using
Trusted Types in place of DOM strings (it’s possible to start
producing types in parts of the application, while still using and
accepting strings in other parts of the codebase). In that sense,
Trusted Types are backwards-compatible with the regular DOM APIs.</p>
   <h4 class="heading settled" data-level="2.2.1" id="trusted-html"><span class="secno">2.2.1. </span><span class="content"><dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="trustedhtml"><code>TrustedHTML</code></dfn></span><a class="self-link" href="#trusted-html"></a></h4>
   <p>The TrustedHTML interface represents a string that a developer can
confidently insert into an <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink⑥">injection sink</a> that will render it as HTML.
These objects are immutable
wrappers around a string, constructed via a <code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy">TrustedTypePolicy</a></code>’s
<code class="idl"><a data-link-type="idl" href="#dom-trustedtypepolicy-createhtml" id="ref-for-dom-trustedtypepolicy-createhtml">createHTML</a></code> method.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#trustedhtml" id="ref-for-trustedhtml"><c- g>TrustedHTML</c-></a> {
  <a data-link-type="dfn" href="#trustedhtml-stringification-behavior" id="ref-for-trustedhtml-stringification-behavior"><c- b>stringifier</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="method" href="#dom-trustedhtml-tojson" id="ref-for-dom-trustedhtml-tojson"><c- g>toJSON</c-></a>();
};
</pre>
   <p>TrustedHTML objects have an associated string <dfn class="dfn-paneled" data-dfn-for="TrustedHTML" data-dfn-type="dfn" data-export id="trustedhtml-data">data</dfn>.
The value is set when the object is created, and will never change during its lifetime.</p>
   <p><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedHTML" data-dfn-type="method" data-export id="dom-trustedhtml-tojson"><code>toJSON()</code></dfn> method steps and the
<dfn class="dfn-paneled" data-dfn-for="TrustedHTML" data-dfn-type="dfn" data-lt="stringificationbehavior" data-noexport id="trustedhtml-stringification-behavior">stringification behavior</dfn> steps of a
TrustedHTML object are to return the associated <a data-link-type="dfn" href="#trustedhtml-data" id="ref-for-trustedhtml-data">data</a> value.</p>
   <h4 class="heading settled" data-level="2.2.2" id="trusted-script"><span class="secno">2.2.2. </span><span class="content"><dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="trustedscript"><code>TrustedScript</code></dfn></span><a class="self-link" href="#trusted-script"></a></h4>
   <p>The TrustedScript interface represents a string with an uncompiled
script body that a developer can confidently pass into an <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink⑦">injection sink</a>
that might lead to executing that script.
These objects are immutable wrappers
around a string, constructed via a <code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy①">TrustedTypePolicy</a></code>’s
<code class="idl"><a data-link-type="idl" href="#dom-trustedtypepolicy-createscript" id="ref-for-dom-trustedtypepolicy-createscript">createScript</a></code> method.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#trustedscript" id="ref-for-trustedscript"><c- g>TrustedScript</c-></a> {
  <a data-link-type="dfn" href="#trustedscript-stringification-behavior" id="ref-for-trustedscript-stringification-behavior"><c- b>stringifier</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="method" href="#dom-trustedscript-tojson" id="ref-for-dom-trustedscript-tojson"><c- g>toJSON</c-></a>();
};
</pre>
   <p>TrustedScript objects have an associated string <dfn class="dfn-paneled" data-dfn-for="TrustedScript" data-dfn-type="dfn" data-export id="trustedscript-data">data</dfn>.
The value is set when the object is created, and will never change during its lifetime.</p>
   <p><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedScript" data-dfn-type="method" data-export id="dom-trustedscript-tojson"><code>toJSON()</code></dfn> method steps and the
<dfn class="dfn-paneled" data-dfn-for="TrustedScript" data-dfn-type="dfn" data-lt="stringificationbehavior" data-noexport id="trustedscript-stringification-behavior">stringification behavior</dfn> steps of a
TrustedScript object are to return the associated <a data-link-type="dfn" href="#trustedscript-data" id="ref-for-trustedscript-data">data</a> value.</p>
   <h4 class="heading settled" data-level="2.2.3" id="trused-script-url"><span class="secno">2.2.3. </span><span class="content"><dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="trustedscripturl"><code>TrustedScriptURL</code></dfn></span><a class="self-link" href="#trused-script-url"></a></h4>
   <p>The TrustedScriptURL interface represents a string that a developer
can confidently pass into an <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink⑧">injection sink</a> that will parse it as a URL of
an external script resource.
These objects are immutable wrappers around a
string, constructed via a <code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy②">TrustedTypePolicy</a></code>’s
<code class="idl"><a data-link-type="idl" href="#dom-trustedtypepolicy-createscripturl" id="ref-for-dom-trustedtypepolicy-createscripturl">createScriptURL</a></code> method.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#trustedscripturl" id="ref-for-trustedscripturl"><c- g>TrustedScriptURL</c-></a> {
  <a data-link-type="dfn" href="#trustedscripturl-stringification-behavior" id="ref-for-trustedscripturl-stringification-behavior"><c- b>stringifier</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="method" href="#dom-trustedscripturl-tojson" id="ref-for-dom-trustedscripturl-tojson"><c- g>toJSON</c-></a>();
};
</pre>
   <p>TrustedScriptURL objects have an associated string <dfn class="dfn-paneled" data-dfn-for="TrustedScriptURL" data-dfn-type="dfn" data-export id="trustedscripturl-data">data</dfn>.
The value is set when the object is created, and will never change during its lifetime.</p>
   <p><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedScriptURL" data-dfn-type="method" data-export id="dom-trustedscripturl-tojson"><code>toJSON()</code></dfn> method steps and the
<dfn class="dfn-paneled" data-dfn-for="TrustedScriptURL" data-dfn-type="dfn" data-lt="stringificationbehavior" data-noexport id="trustedscripturl-stringification-behavior">stringification behavior</dfn> steps of a
TrustedScriptURL object are to return the associated <a data-link-type="dfn" href="#trustedscripturl-data" id="ref-for-trustedscripturl-data">data</a> value.</p>
   <h3 class="heading settled" data-level="2.3" id="policies-hdr"><span class="secno">2.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="policies">Policies</dfn></span><a class="self-link" href="#policies-hdr"></a></h3>
   <p>Trusted Types can only be created via user-defined
and immutable policies that define rules for converting a string into
a given Trusted Type object. Policies allows the authors to specify custom,
programmatic rules that Trusted Types must adhere to.</p>
   <div class="example" id="sanitizing-policy">
    <a class="self-link" href="#sanitizing-policy"></a>
Authors may define a
policy that will sanitize an HTML string, allowing only a subset of
tags and attributes that are known not to cause JavaScript
execution. Any <code class="idl"><a data-link-type="idl" href="#trustedhtml" id="ref-for-trustedhtml①">TrustedHTML</a></code> object created through this policy can then
be safely used in the application, and e.g. passed to <code>innerHTML</code>
setter - even if the input value was controlled by the attacker, the
policy rules neutralized it to adhere to policy-specific
contract.

<pre class="highlight"><c- a>const</c-> sanitizingPolicy <c- o>=</c-> trustedTypes<c- p>.</c->createPolicy<c- p>(</c-><c- t>'sanitize-html'</c-><c- p>,</c-> <c- p>{</c->
  createHTML<c- o>:</c-> <c- p>(</c->input<c- p>)</c-> <c- p>=></c-> myTrustedSanitizer<c- p>(</c->input<c- p>,</c-> <c- p>{</c-> superSafe<c- o>:</c-> <c- t>'ok'</c-><c- p>}),</c->
<c- p>});</c->

myDiv<c- p>.</c->innerHTML <c- o>=</c-> sanitizingPolicy<c- p>.</c->createHTML<c- p>(</c->untrustedValue<c- p>);</c->
</pre>
   </div>
   <p class="note" role="note"><span class="marker">Note:</span> <a data-link-type="dfn" href="#trusted-type" id="ref-for-trusted-type">Trusted Type</a> objects wrap values that are explicitly trusted by
the author. As such, creating a Trusted Type object instance becomes a de
facto <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink⑨">injection sink</a>, and hence code that creates a Trusted Type
instances is security-critical. To allow for strict control over Trusted Type
object creation we don’t expose the constructors of those
directly, but require authors to create them via <a data-link-type="dfn" href="#policies" id="ref-for-policies②">policies</a>.</p>
   <p>Multiple policies can be created in a given <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm" id="ref-for-concept-global-object-realm">Realm</a>, allowing the
applications to define different rules for different parts of the
codebase.</p>
   <div class="example" id="policy-reference">
    <a class="self-link" href="#policy-reference"></a>
Library initialized with a policy allowing it to load additional scripts from
a given host.

<pre class="highlight">
<c- a>const</c-> cdnScriptsPolicy <c- o>=</c-> trustedTypes<c- p>.</c->createPolicy<c- p>(</c-><c- t>'cdn-scripts'</c-><c- p>,</c-> <c- p>{</c->
  createScriptURL<c- p>(</c->url<c- p>)</c-> <c- p>{</c->
    <c- a>const</c-> parsed <c- o>=</c-> <c- ow>new</c-> URL<c- p>(</c->url<c- p>,</c-> document<c- p>.</c->baseURI<c- p>);</c->
    <c- k>if</c-> <c- p>(</c->parsed<c- p>.</c->origin <c- o>==</c-> <c- t>'https://mycdn.example'</c-><c- p>)</c-> <c- p>{</c->
      <c- k>return</c-> url<c- p>;</c->
    <c- p>}</c->
    <c- k>throw</c-> <c- ow>new</c-> <c- ne>TypeError</c-><c- p>(</c-><c- t>'invalid URL'</c-><c- p>);</c->
  <c- p>},</c->
<c- p>});</c->

myLibrary<c- p>.</c->init<c- p>({</c->policy<c- o>:</c-> cdnScriptsPolicy<c- p>});</c->
</pre>
   </div>
   <p class="note" role="note"><span class="marker">Note:</span> Trusted Type objects can only be created via policies. If
<a data-link-type="dfn" href="#enforcement" id="ref-for-enforcement②">enforcement</a> is enabled, only the policy code can trigger an action
of an <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①⓪">injection sink</a> and hence call-sites of the policies' <code>create*</code>
functions are the <em>only</em> security-sensitive code in the entire program
with regards to the actions of the <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①①">injection sinks</a>.
Only this typically small subset of the entire code base needs to be
security-reviewed - there’s no need to monitor or review
the <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①②">injection sinks</a> themselves, as User Agents <a data-link-type="dfn" href="#enforcement" id="ref-for-enforcement③">enforce</a> that
those sinks will only accept matching Trusted Type objects, and these in turn
can only be created via policies.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-trustedtypepolicyfactory-createpolicy" id="ref-for-dom-trustedtypepolicyfactory-createpolicy">createPolicy</a></code> function returns a policy object which <code>create*</code> functions
will create Trusted Type objects after applying the policy
rules.</p>
   <p class="note" role="note"><span class="marker">Note:</span> While it’s safe to freely use a policy that sanitizes its input anywhere in the application,
there might be a need to create lax policies to be used internally, and only to be
called with author-controlled input. For example, a client-side HTML
templating library, an HTML sanitizer library, or a JS asynchronous
code plugin loading subsystem each will likely need full control over
HTML or URLs. The API design facilitates that - each policy may only
be used if the callsite can obtain a reference to the policy (a return
value from <code class="idl"><a data-link-type="idl" href="#dom-trustedtypepolicyfactory-createpolicy" id="ref-for-dom-trustedtypepolicyfactory-createpolicy①">createPolicy()</a></code>). As such, policy
references can be treated as
<a href="https://en.wikipedia.org/wiki/Object-capability_model">capabilities</a>,
access to which can be controlled using JavaScript techniques
(e.g. via closures, internal function variables, or modules).</p>
   <div class="example" id="policy-capability">
    <a class="self-link" href="#policy-capability"></a>
Unsafe no-op policy reachable only from within a single code block to ascertain
that it’s called only with no attacker-controlled values.

<pre class="highlight"><c- p>(</c-><c- a>function</c-> renderFootnote<c- p>()</c-> <c- p>{</c->
  <c- a>const</c-> unsafePolicy <c- o>=</c-> trustedTypes<c- p>.</c->createPolicy<c- p>(</c-><c- t>'html'</c-><c- p>,</c-> <c- p>{</c->
    createHTML<c- o>:</c-> input <c- p>=></c-> input<c- p>,</c->
  <c- p>});</c->
  <c- a>const</c-> footnote <c- o>=</c-> <c- k>await</c-> fetch<c- p>(</c-><c- t>'/footnote.html'</c-><c- p>).</c->then<c- p>(</c->r <c- p>=></c-> r<c- p>.</c->text<c- p>());</c->
  footNote<c- p>.</c->innerHTML <c- o>=</c-> unsafePolicy<c- p>.</c->createHTML<c- p>(</c->footnote<c- p>);</c->
<c- p>})();</c->
</pre>
   </div>
   <h4 class="heading settled" data-level="2.3.1" id="trusted-type-policy-factory"><span class="secno">2.3.1. </span><span class="content"><dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="trustedtypepolicyfactory"><code>TrustedTypePolicyFactory</code></dfn></span><a class="self-link" href="#trusted-type-policy-factory"></a></h4>
   <p>TrustedTypePolicyFactory creates
<code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy③">policies</a></code> and verifies that Trusted Type object instances
were created via one of the policies.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This factory object is exposed to JavaScript through <code>trustedTypes</code> property
on the global object - see <a href="#extensions-to-the-windoworworkerglobalscope-interface">§ 4.1.1 Extensions to the WindowOrWorkerGlobalScope interface</a>.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed③"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)] <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#trustedtypepolicyfactory" id="ref-for-trustedtypepolicyfactory"><c- g>TrustedTypePolicyFactory</c-></a> {
    <a data-link-type="idl-name" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy④"><c- n>TrustedTypePolicy</c-></a> <a class="idl-code" data-link-type="method" href="#dom-trustedtypepolicyfactory-createpolicy" id="ref-for-dom-trustedtypepolicyfactory-createpolicy②"><c- g>createPolicy</c-></a>(
        <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/createPolicy(policyName, policyOptions), TrustedTypePolicyFactory/createPolicy(policyName)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-createpolicy-policyname-policyoptions-policyname"><code><c- g>policyName</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-trustedtypepolicyoptions" id="ref-for-dictdef-trustedtypepolicyoptions"><c- n>TrustedTypePolicyOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/createPolicy(policyName, policyOptions), TrustedTypePolicyFactory/createPolicy(policyName)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-createpolicy-policyname-policyoptions-policyoptions"><code><c- g>policyOptions</c-></code></dfn> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="method" href="#dom-trustedtypepolicyfactory-ishtml" id="ref-for-dom-trustedtypepolicyfactory-ishtml"><c- g>isHTML</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/isHTML(value)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-ishtml-value-value"><code><c- g>value</c-></code></dfn>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="method" href="#dom-trustedtypepolicyfactory-isscript" id="ref-for-dom-trustedtypepolicyfactory-isscript"><c- g>isScript</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/isScript(value)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-isscript-value-value"><code><c- g>value</c-></code></dfn>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="method" href="#dom-trustedtypepolicyfactory-isscripturl" id="ref-for-dom-trustedtypepolicyfactory-isscripturl"><c- g>isScriptURL</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/isScriptURL(value)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-isscripturl-value-value"><code><c- g>value</c-></code></dfn>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#trustedhtml" id="ref-for-trustedhtml②"><c- n>TrustedHTML</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="TrustedHTML" href="#dom-trustedtypepolicyfactory-emptyhtml" id="ref-for-dom-trustedtypepolicyfactory-emptyhtml"><c- g>emptyHTML</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#trustedscript" id="ref-for-trustedscript①"><c- n>TrustedScript</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="TrustedScript" href="#dom-trustedtypepolicyfactory-emptyscript" id="ref-for-dom-trustedtypepolicyfactory-emptyscript"><c- g>emptyScript</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a>? <a class="idl-code" data-link-type="method" href="#dom-trustedtypepolicyfactory-getattributetype" id="ref-for-dom-trustedtypepolicyfactory-getattributetype"><c- g>getAttributeType</c-></a>(
        <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/getAttributeType(tagName, attribute, elementNs, attrNs), TrustedTypePolicyFactory/getAttributeType(tagName, attribute, elementNs), TrustedTypePolicyFactory/getAttributeType(tagName, attribute)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-tagname"><code><c- g>tagName</c-></code></dfn>,
        <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/getAttributeType(tagName, attribute, elementNs, attrNs), TrustedTypePolicyFactory/getAttributeType(tagName, attribute, elementNs), TrustedTypePolicyFactory/getAttributeType(tagName, attribute)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-attribute"><code><c- g>attribute</c-></code></dfn>,
        <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑥"><c- b>DOMString</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/getAttributeType(tagName, attribute, elementNs, attrNs), TrustedTypePolicyFactory/getAttributeType(tagName, attribute, elementNs), TrustedTypePolicyFactory/getAttributeType(tagName, attribute)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-elementns"><code><c- g>elementNs</c-></code></dfn> = "",
        <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑦"><c- b>DOMString</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/getAttributeType(tagName, attribute, elementNs, attrNs), TrustedTypePolicyFactory/getAttributeType(tagName, attribute, elementNs), TrustedTypePolicyFactory/getAttributeType(tagName, attribute)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-attrns"><code><c- g>attrNs</c-></code></dfn> = "");
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑧"><c- b>DOMString</c-></a>? <a class="idl-code" data-link-type="method" href="#dom-trustedtypepolicyfactory-getpropertytype" id="ref-for-dom-trustedtypepolicyfactory-getpropertytype"><c- g>getPropertyType</c-></a>(
        <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑨"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/getPropertyType(tagName, property, elementNs), TrustedTypePolicyFactory/getPropertyType(tagName, property)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-tagname"><code><c- g>tagName</c-></code></dfn>,
        <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⓪"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/getPropertyType(tagName, property, elementNs), TrustedTypePolicyFactory/getPropertyType(tagName, property)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-property"><code><c- g>property</c-></code></dfn>,
        <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①①"><c- b>DOMString</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory/getPropertyType(tagName, property, elementNs), TrustedTypePolicyFactory/getPropertyType(tagName, property)" data-dfn-type="argument" data-export id="dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-elementns"><code><c- g>elementNs</c-></code></dfn> = "");
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy⑤"><c- n>TrustedTypePolicy</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="TrustedTypePolicy?" href="#dom-trustedtypepolicyfactory-defaultpolicy" id="ref-for-dom-trustedtypepolicyfactory-defaultpolicy"><c- g>defaultPolicy</c-></a>;
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#trustedtypepolicyfactory" id="ref-for-trustedtypepolicyfactory①">TrustedTypePolicyFactory</a></code> object has an associated <code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy⑥">TrustedTypePolicy</a></code> <dfn class="dfn-paneled" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="dfn" data-noexport id="trustedtypepolicyfactory-default-policy">default policy</dfn>.
Its value is initially null.</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#trustedtypepolicyfactory" id="ref-for-trustedtypepolicyfactory②">TrustedTypePolicyFactory</a></code> object has an associated <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">ordered set</a> of strings <dfn class="dfn-paneled" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="dfn" data-noexport id="trustedtypepolicyfactory-created-policy-names">created policy names</dfn>.
Its value is initially « ».</p>
   <div>
    <dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="method" data-export data-lt="createPolicy(policyName, policyOptions)|createPolicy(policyName)" id="dom-trustedtypepolicyfactory-createpolicy"><code>createPolicy(policyName, policyOptions)</code></dfn>
     <dd data-md>
      <p>Creates a policy object that will implement the rules
passed in the <code class="idl"><a data-link-type="idl" href="#dictdef-trustedtypepolicyoptions" id="ref-for-dictdef-trustedtypepolicyoptions①">TrustedTypePolicyOptions</a></code> <var>policyOptions</var> object.
The allowed policy names may be restricted by <a href="#content-security-policy-hdr">Content Security Policy</a>.
If the policy name is not on the allowlist defined in the <a data-link-type="dfn" href="#trusted-types-directive" id="ref-for-trusted-types-directive①">trusted-types</a> CSP directive,
the policy creation fails with a TypeError.
Also, if unique policy names are enforced (i.e. <code>'allow-duplicates'</code> is not used),
and <code>createPolicy</code> is called more than once with any given <code>policyName</code>,
policy creation fails with a TypeError.</p>
      <div class="example" id="create-policy-example">
       <a class="self-link" href="#create-policy-example"></a>

<pre class="highlight"><c- c1>// HTTP Response header: Content-Security-Policy: trusted-types foo</c->
trustedTypes<c- p>.</c->createPolicy<c- p>(</c-><c- u>"foo"</c-><c- p>,</c-> <c- p>{});</c-> <c- c1>// ok.</c->
trustedTypes<c- p>.</c->createPolicy<c- p>(</c-><c- u>"bar"</c-><c- p>,</c-> <c- p>{});</c-> <c- c1>// throws - name not on the allowlist.</c->
trustedTypes<c- p>.</c->createPolicy<c- p>(</c-><c- u>"foo"</c-><c- p>,</c-> <c- p>{});</c-> <c- c1>// throws - duplicate name.</c->
</pre>
      </div>
      <p>Returns the result of executing a <a data-link-type="abstract-op" href="#abstract-opdef-create-a-trusted-type-policy" id="ref-for-abstract-opdef-create-a-trusted-type-policy">Create a Trusted Type Policy</a> algorithm,
with the following arguments:</p>
      <dl>
       <dt>factory
       <dd><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a> value
       <dt>policyName
       <dd><var>policyName</var>
       <dt>options
       <dd><var>policyOptions</var>
       <dt>global
       <dd><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a> value’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a>
      </dl>
      <div class="example" id="create-and-used-unexposed-policy">
       <a class="self-link" href="#create-and-used-unexposed-policy"></a>

<pre class="highlight"><c- a>const</c-> myPolicy <c- o>=</c-> trustedTypes<c- p>.</c->createPolicy<c- p>(</c-><c- t>'myPolicy'</c-><c- p>,</c-> <c- p>{</c->
  <c- c1>// This security-critical code needs a security review;</c->
  <c- c1>// a flaw in this code could cause DOM XSS.</c->
  createHTML<c- p>(</c->input<c- p>)</c-> <c- p>{</c-> <c- k>return</c-> aSanitizer<c- p>.</c->sanitize<c- p>(</c->input<c- p>)</c-> <c- p>},</c->
  createScriptURL<c- p>(</c->input<c- p>)</c-> <c- p>{</c->
    <c- a>const</c-> u <c- o>=</c-> <c- ow>new</c-> URL<c- p>(</c->dirty<c- p>,</c-> document<c- p>.</c->baseURI<c- p>);</c->
    <c- k>if</c-> <c- p>(</c->APPLICATION_CONFIG<c- p>.</c->scriptOrigins<c- p>.</c->includes<c- p>(</c->u<c- p>.</c->origin<c- p>))</c-> <c- p>{</c->
      <c- k>return</c-> u<c- p>.</c->href<c- p>;</c->
    <c- p>}</c->
    <c- k>throw</c-> <c- ow>new</c-> <c- ne>Error</c-><c- p>(</c-><c- t>'Cannot load scripts from this origin'</c-><c- p>);</c->
  <c- p>},</c->
<c- p>});</c->

document<c- p>.</c->querySelector<c- p>(</c-><c- u>"#foo"</c-><c- p>).</c->innerHTML <c- o>=</c-> myPolicy<c- p>.</c->createHTML<c- p>(</c->aValue<c- p>);</c->
scriptElement<c- p>.</c->src <c- o>=</c-> myPolicy<c- p>.</c->createScriptURL<c- p>(</c->
    <c- t>'https://scripts.myapp.example/script.js'</c-><c- p>);</c->
</pre>
      </div>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="method" data-export id="dom-trustedtypepolicyfactory-ishtml"><code>isHTML(value)</code></dfn>
     <dd data-md>
      <p>Returns true if value is an instance of <code class="idl"><a data-link-type="idl" href="#trustedhtml" id="ref-for-trustedhtml③">TrustedHTML</a></code> and has an associated <a data-link-type="dfn" href="#trustedhtml-data" id="ref-for-trustedhtml-data①">data</a> value set, false otherwise.</p>
      <p class="note" role="note"><span class="marker">Note:</span> <code>is*</code> functions are used to check if a given object is truly a legitimate
<a data-link-type="dfn" href="#trusted-type" id="ref-for-trusted-type①">Trusted Type</a> object (i.e. it was created via one of the configured
policies). This is to be able to detect a forgery of the objects via
e.g. <a href="https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.create">Object.create</a>
or prototype chains manipulation.</p>
      <div class="example" id="is-html-example">
       <a class="self-link" href="#is-html-example"></a>

<pre class="highlight"><c- a>const</c-> html <c- o>=</c-> policy<c- p>.</c->createHTML<c- p>(</c-><c- t>'&lt;div>'</c-><c- p>);</c->
trustedTypes<c- p>.</c->isHTML<c- p>(</c->html<c- p>);</c-> <c- c1>// true</c->

<c- a>const</c-> fake <c- o>=</c-> Object<c- p>.</c->create<c- p>(</c->TrustedHTML<c- p>.</c->prototype<c- p>);</c->
trustedTypes<c- p>.</c->isHTML<c- p>(</c->fake<c- p>);</c-> <c- c1>// false</c->

trustedTypes<c- p>.</c->isHTML<c- p>(</c-><c- u>"&lt;div>plain string&lt;/div>"</c-><c- p>);</c-> <c- c1>// false</c->
</pre>
      </div>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="method" data-export id="dom-trustedtypepolicyfactory-isscript"><code>isScript(value)</code></dfn>
     <dd data-md>
      <p>Returns true if value is an instance of <code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript②">TrustedScript</a></code> and has an associated <a data-link-type="dfn" href="#trustedscript-data" id="ref-for-trustedscript-data①">data</a> value set, false otherwise.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="method" data-export id="dom-trustedtypepolicyfactory-isscripturl"><code>isScriptURL(value)</code></dfn>
     <dd data-md>
      <p>Returns true if value is an instance of <code class="idl"><a data-link-type="idl" href="#trustedscripturl" id="ref-for-trustedscripturl①">TrustedScriptURL</a></code> and has an associated <a data-link-type="dfn" href="#trustedscripturl-data" id="ref-for-trustedscripturl-data①">data</a> value set, false otherwise.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="method" data-export data-lt="getPropertyType(tagName, property, elementNs)|getPropertyType(tagName, property)" id="dom-trustedtypepolicyfactory-getpropertytype"><code>getPropertyType(tagName, property, elementNs)</code></dfn>
     <dd data-md>
      <p>Allows the authors to check if a Trusted Type is required for a given <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code>’s
property (IDL attribute).</p>
      <p>This function returns the result of the following algorithm:</p>
      <ol>
       <li data-md>
        <p>Set <var>localName</var> to <var>tagName</var> in <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-lowercase" id="ref-for-ascii-lowercase">ASCII lowercase</a>.</p>
       <li data-md>
        <p>If <var>elementNs</var> is null or an empty string, set <var>elementNs</var> to <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace">HTML namespace</a>.</p>
       <li data-md>
        <p>Let <var>interface</var> be the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-interface" id="ref-for-concept-element-interface">element interface</a> for <var>localName</var> and <var>elementNs</var>.</p>
       <li data-md>
        <p>Let <var>expectedType</var> be null.</p>
       <li data-md>
        <p>Find the row in the following table, where the first column is "*" or <var>interface</var>’s name, and <var>property</var> is in the second column.
If a matching row is found, set <var>expectedType</var> to the interface’s name of the value of the third column.</p>
        <table>
         <thead>
          <tr>
           <th>Element
           <th>Property name
           <th>TrustedType
  
         <tbody>
          <tr>
           <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement" id="ref-for-htmliframeelement">HTMLIFrameElement</a></code>
           <td>"srcdoc"
           <td><code class="idl"><a data-link-type="idl" href="#trustedhtml" id="ref-for-trustedhtml④">TrustedHTML</a></code>
    
          <tr>
           <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement">HTMLScriptElement</a></code>
           <td>"innerText"
           <td><code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript③">TrustedScript</a></code>
    
          <tr>
           <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement①">HTMLScriptElement</a></code>
           <td>"src"
           <td><code class="idl"><a data-link-type="idl" href="#trustedscripturl" id="ref-for-trustedscripturl②">TrustedScriptURL</a></code>
    
          <tr>
           <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement②">HTMLScriptElement</a></code>
           <td>"text"
           <td><code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript④">TrustedScript</a></code>
    
          <tr>
           <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement③">HTMLScriptElement</a></code>
           <td>"textContent"
           <td><code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript⑤">TrustedScript</a></code>
    
          <tr>
           <td>"*"
           <td>"innerHTML"
           <td><code class="idl"><a data-link-type="idl" href="#trustedhtml" id="ref-for-trustedhtml⑤">TrustedHTML</a></code>
    
          <tr>
           <td>"*"
           <td>"outerHTML"
           <td><code class="idl"><a data-link-type="idl" href="#trustedhtml" id="ref-for-trustedhtml⑥">TrustedHTML</a></code>
  
        </table>
       <li data-md>
        <p>Return <var>expectedType</var>.</p>
      </ol>
      <div class="example" id="get-property-type-example">
       <a class="self-link" href="#get-property-type-example"></a>

<pre class="highlight">trustedTypes<c- p>.</c->getPropertyType<c- p>(</c-><c- t>'div'</c-><c- p>,</c-> <c- t>'innerHTML'</c-><c- p>);</c-> <c- c1>// "TrustedHTML"</c->
trustedTypes<c- p>.</c->getPropertyType<c- p>(</c-><c- t>'foo'</c-><c- p>,</c-> <c- t>'bar'</c-><c- p>);</c-> <c- c1>// null</c->
</pre>
      </div>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="method" data-export data-lt="getAttributeType(tagName, attribute, elementNs, attrNs)|getAttributeType(tagName, attribute, elementNs)|getAttributeType(tagName, attribute)" id="dom-trustedtypepolicyfactory-getattributetype"><code>getAttributeType(tagName, attribute, elementNs, attrNs)</code></dfn>
     <dd data-md>
      <p>Allows the authors to check if, (and if so, which) Trusted Type is required
for a given <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③">Element</a></code>’s content attribute, such that later on the call
to <code>Element.setAttribute</code> passes the correct argument type.</p>
      <p>This function returns the result of the following algorithm:</p>
      <ol>
       <li data-md>
        <p>Set <var>localName</var> to <var>tagName</var> in <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-lowercase" id="ref-for-ascii-lowercase①">ASCII lowercase</a>.</p>
       <li data-md>
        <p>Set <var>attribute</var> to <var>attribute</var> in <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-lowercase" id="ref-for-ascii-lowercase②">ASCII lowercase</a>.</p>
       <li data-md>
        <p>If <var>elementNs</var> is null or an empty string, set <var>elementNs</var> to <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace①">HTML namespace</a>.</p>
       <li data-md>
        <p>If <var>attrNs</var> is an empty string, set <var>attrNs</var> to null.</p>
       <li data-md>
        <p>Let <var>interface</var> be the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-interface" id="ref-for-concept-element-interface①">element interface</a> for <var>localName</var> and <var>elementNs</var>.</p>
       <li data-md>
        <p>Let <var>expectedType</var> be null.</p>
       <li data-md>
        <p>Set <var>attributeData</var> to the result of <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-data-for-attribute" id="ref-for-abstract-opdef-get-trusted-type-data-for-attribute">Get Trusted Type data for attribute</a> algorithm, with the following arguments:</p>
        <ul>
         <li data-md>
          <p><var>interface</var> as <var>element</var></p>
         <li data-md>
          <p><var>attribute</var></p>
         <li data-md>
          <p><var>attrNs</var></p>
        </ul>
       <li data-md>
        <p>If <var>attributeData</var> is not null, then set <var>expectedType</var> to the interface’s name of the value of the fourth member of <var>attributeData</var>.</p>
       <li data-md>
        <p>Return <var>expectedType</var>.</p>
      </ol>
      <div class="example" id="get-attribute-type-example">
       <a class="self-link" href="#get-attribute-type-example"></a>

<pre class="highlight">trustedTypes<c- p>.</c->getAttributeType<c- p>(</c-><c- t>'script'</c-><c- p>,</c-> <c- t>'src'</c-><c- p>);</c-> <c- c1>// "TrustedScriptURL"</c->
trustedTypes<c- p>.</c->getAttributeType<c- p>(</c-><c- t>'foo'</c-><c- p>,</c-> <c- t>'bar'</c-><c- p>);</c-> <c- c1>// null</c->
</pre>
      </div>
    </dl>
   </div>
   <div>
    <dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="attribute" data-export id="dom-trustedtypepolicyfactory-emptyhtml"><code>emptyHTML</code></dfn>, <span> of type <a data-link-type="idl-name" href="#trustedhtml" id="ref-for-trustedhtml⑦">TrustedHTML</a>, readonly</span>
     <dd data-md>
      <p>is a <code class="idl"><a data-link-type="idl" href="#trustedhtml" id="ref-for-trustedhtml⑧">TrustedHTML</a></code> object with its <a data-link-type="dfn" href="#trustedhtml-data" id="ref-for-trustedhtml-data②">data</a> value set to an empty string.</p>
    </dl>
    <div class="example" id="empty-html-example">
     <a class="self-link" href="#empty-html-example"></a>

<pre class="highlight">anElement<c- p>.</c->innerHTML <c- o>=</c-> trustedTypes<c- p>.</c->emptyHTML<c- p>;</c-> <c- c1>// no need to create a policy</c->
</pre>
    </div>
    <dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="attribute" data-export id="dom-trustedtypepolicyfactory-emptyscript"><code>emptyScript</code></dfn>, <span> of type <a data-link-type="idl-name" href="#trustedscript" id="ref-for-trustedscript⑥">TrustedScript</a>, readonly</span>
     <dd data-md>
      <p>is a <code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript⑦">TrustedScript</a></code> object with its <a data-link-type="dfn" href="#trustedscript-data" id="ref-for-trustedscript-data②">data</a> value set to an empty string.</p>
    </dl>
    <p class="note" role="note"><span class="marker">Note:</span> This object can be used to detect if the runtime environment has support for dynamic code compilation.
While native Trusted Types implementation can support <code>eval(TrustedScript)</code>, it is impossible for a polyfill to
emulate that, as eval(TrustedScript) will return its input without unwrapping and evaluating the code.</p>
    <div class="example" id="empty-script-example">
     <a class="self-link" href="#empty-script-example"></a>

<pre class="highlight"><c- c1>// With native Trusted Types support eval(trustedTypes.emptyScript) will execute and return falsy undefined.</c->
<c- c1>// Without it, eval(trustedTypes.emptyScript) will return a truthy Object.</c->
<c- a>const</c-> supportsTS <c- o>=</c-> <c- o>!</c->eval<c- p>(</c->trustedTypes<c- p>.</c->emptyScript<c- p>);</c->

eval<c- p>(</c->supportsTS <c- o>?</c-> myTrustedScriptObj <c- o>:</c-> myTrustedScriptObj<c- p>.</c->toString<c- p>());</c->
</pre>
    </div>
    <dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyFactory" data-dfn-type="attribute" data-export id="dom-trustedtypepolicyfactory-defaultpolicy"><code>defaultPolicy</code></dfn>, <span> of type <a data-link-type="idl-name" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy⑦">TrustedTypePolicy</a>, readonly, nullable</span>
     <dd data-md>
      <p>Returns the value of <a data-link-type="dfn" href="#trustedtypepolicyfactory-default-policy" id="ref-for-trustedtypepolicyfactory-default-policy">default policy</a>.</p>
    </dl>
    <div class="example" id="defaultpolicy-example">
     <a class="self-link" href="#defaultpolicy-example"></a>

<pre class="highlight">trustedTypes<c- p>.</c->defaultPolicy <c- o>===</c-> <c- kc>null</c-><c- p>;</c->  <c- c1>// true</c->
<c- a>const</c-> dp <c- o>=</c-> trustedTypes<c- p>.</c->createPolicy<c- p>(</c-><c- t>'default'</c-><c- p>,</c-> <c- p>{});</c->
trustedTypes<c- p>.</c->defaultPolicy <c- o>===</c-> dp<c- p>;</c->  <c- c1>// true</c->
</pre>
    </div>
   </div>
   <h4 class="heading settled" data-level="2.3.2" id="trusted-type-policy"><span class="secno">2.3.2. </span><span class="content"><dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="trustedtypepolicy"><code>TrustedTypePolicy</code></dfn></span><a class="self-link" href="#trusted-type-policy"></a></h4>
   <p>Policy objects implement a TrustedTypePolicy interface and define a
group of functions creating Trusted Type objects.
Each of the <code>create*</code> functions converts a string value to a given Trusted Type variant, or
throws a TypeError if a conversion of a given value is disallowed.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed④"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy⑧"><c- g>TrustedTypePolicy</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicy" data-dfn-type="attribute" data-export data-readonly data-type="DOMString" id="dom-trustedtypepolicy-name"><code><c- g>name</c-></code></dfn>;
  <a data-link-type="idl-name" href="#trustedhtml" id="ref-for-trustedhtml⑨"><c- n>TrustedHTML</c-></a> <a class="idl-code" data-link-type="method" href="#dom-trustedtypepolicy-createhtml" id="ref-for-dom-trustedtypepolicy-createhtml①"><c- g>createHTML</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicy/createHTML(input, ...arguments), TrustedTypePolicy/createHTML(input)" data-dfn-type="argument" data-export id="dom-trustedtypepolicy-createhtml-input-arguments-input"><code><c- g>input</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③"><c- b>any</c-></a>... <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicy/createHTML(input, ...arguments), TrustedTypePolicy/createHTML(input)" data-dfn-type="argument" data-export id="dom-trustedtypepolicy-createhtml-input-arguments-arguments"><code><c- g>arguments</c-></code></dfn>);
  <a data-link-type="idl-name" href="#trustedscript" id="ref-for-trustedscript⑧"><c- n>TrustedScript</c-></a> <a class="idl-code" data-link-type="method" href="#dom-trustedtypepolicy-createscript" id="ref-for-dom-trustedtypepolicy-createscript①"><c- g>createScript</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicy/createScript(input, ...arguments), TrustedTypePolicy/createScript(input)" data-dfn-type="argument" data-export id="dom-trustedtypepolicy-createscript-input-arguments-input"><code><c- g>input</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any④"><c- b>any</c-></a>... <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicy/createScript(input, ...arguments), TrustedTypePolicy/createScript(input)" data-dfn-type="argument" data-export id="dom-trustedtypepolicy-createscript-input-arguments-arguments"><code><c- g>arguments</c-></code></dfn>);
  <a data-link-type="idl-name" href="#trustedscripturl" id="ref-for-trustedscripturl③"><c- n>TrustedScriptURL</c-></a> <a class="idl-code" data-link-type="method" href="#dom-trustedtypepolicy-createscripturl" id="ref-for-dom-trustedtypepolicy-createscripturl①"><c- g>createScriptURL</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicy/createScriptURL(input, ...arguments), TrustedTypePolicy/createScriptURL(input)" data-dfn-type="argument" data-export id="dom-trustedtypepolicy-createscripturl-input-arguments-input"><code><c- g>input</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑤"><c- b>any</c-></a>... <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicy/createScriptURL(input, ...arguments), TrustedTypePolicy/createScriptURL(input)" data-dfn-type="argument" data-export id="dom-trustedtypepolicy-createscripturl-input-arguments-arguments"><code><c- g>arguments</c-></code></dfn>);
};
</pre>
   <p>Each policy has a <dfn class="dfn-paneled" data-dfn-for="TrustedTypePolicy" data-dfn-type="dfn" data-noexport id="trustedtypepolicy-name">name</dfn>.</p>
   <p>Each TrustedTypePolicy object has an associated <code class="idl"><a data-link-type="idl" href="#dictdef-trustedtypepolicyoptions" id="ref-for-dictdef-trustedtypepolicyoptions②">TrustedTypePolicyOptions</a></code> <dfn class="dfn-paneled" data-dfn-for="TrustedTypePolicy" data-dfn-type="dfn" data-noexport id="trustedtypepolicy-options">options</dfn> object, describing the actual behavior of the policy.</p>
   <div>
    <dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicy" data-dfn-type="method" data-export data-lt="createHTML(input, ...arguments)|createHTML(input)" id="dom-trustedtypepolicy-createhtml"><code>createHTML(input, ...arguments)</code></dfn>
     <dd data-md>
      <p>Returns the
result of executing the <a data-link-type="abstract-op" href="#abstract-opdef-create-a-trusted-type" id="ref-for-abstract-opdef-create-a-trusted-type">Create a Trusted Type</a> algorithm, with the
following arguments:</p>
      <dl>
       <dt>policy
       <dd><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a> value
       <dt>trustedTypeName
       <dd><code>"TrustedHTML"</code>
       <dt>value
       <dd>input
       <dt>arguments
       <dd>arguments
      </dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicy" data-dfn-type="method" data-export data-lt="createScript(input, ...arguments)|createScript(input)" id="dom-trustedtypepolicy-createscript"><code>createScript(input, ...arguments)</code></dfn>
     <dd data-md>
      <p>Returns the
result of executing the <a data-link-type="abstract-op" href="#abstract-opdef-create-a-trusted-type" id="ref-for-abstract-opdef-create-a-trusted-type①">Create a Trusted Type</a> algorithm, with the
following arguments:</p>
      <dl>
       <dt>policy
       <dd><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a> value
       <dt>trustedTypeName
       <dd><code>"TrustedScript"</code>
       <dt>value
       <dd>input
       <dt>arguments
       <dd>arguments
      </dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicy" data-dfn-type="method" data-export data-lt="createScriptURL(input, ...arguments)|createScriptURL(input)" id="dom-trustedtypepolicy-createscripturl"><code>createScriptURL(input, ...arguments)</code></dfn>
     <dd data-md>
      <p>Returns the
result of executing the <a data-link-type="abstract-op" href="#abstract-opdef-create-a-trusted-type" id="ref-for-abstract-opdef-create-a-trusted-type②">Create a Trusted Type</a> algorithm, with the
following arguments:</p>
      <dl>
       <dt>policy
       <dd><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a> value
       <dt>trustedTypeName
       <dd><code>"TrustedScriptURL"</code>
       <dt>value
       <dd>input
       <dt>arguments
       <dd>arguments
      </dl>
    </dl>
   </div>
   <h4 class="heading settled" data-level="2.3.3" id="trusted-type-policy-options"><span class="secno">2.3.3. </span><span class="content"><dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-trustedtypepolicyoptions"><code>TrustedTypePolicyOptions</code></dfn></span><a class="self-link" href="#trusted-type-policy-options"></a></h4>
   <p>This dictionary holds author-defined functions for converting string
values into trusted values. These functions do not create <a data-link-type="dfn" href="#trusted-type" id="ref-for-trusted-type②">Trusted Type</a>
object instances directly - this behavior is provided by
<code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy⑨">TrustedTypePolicy</a></code>.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-trustedtypepolicyoptions" id="ref-for-dictdef-trustedtypepolicyoptions③"><c- g>TrustedTypePolicyOptions</c-></a> {
   <a data-link-type="idl-name" href="#callbackdef-createhtmlcallback" id="ref-for-callbackdef-createhtmlcallback"><c- n>CreateHTMLCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyOptions" data-dfn-type="dict-member" data-export data-type="CreateHTMLCallback" id="dom-trustedtypepolicyoptions-createhtml"><code><c- g>createHTML</c-></code></dfn>;
   <a data-link-type="idl-name" href="#callbackdef-createscriptcallback" id="ref-for-callbackdef-createscriptcallback"><c- n>CreateScriptCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyOptions" data-dfn-type="dict-member" data-export data-type="CreateScriptCallback" id="dom-trustedtypepolicyoptions-createscript"><code><c- g>createScript</c-></code></dfn>;
   <a data-link-type="idl-name" href="#callbackdef-createscripturlcallback" id="ref-for-callbackdef-createscripturlcallback"><c- n>CreateScriptURLCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrustedTypePolicyOptions" data-dfn-type="dict-member" data-export data-type="CreateScriptURLCallback" id="dom-trustedtypepolicyoptions-createscripturl"><code><c- g>createScriptURL</c-></code></dfn>;
};
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-createhtmlcallback"><code><c- g>CreateHTMLCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑥"><c- b>DOMString</c-></a>? (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑦"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CreateHTMLCallback" data-dfn-type="argument" data-export id="dom-createhtmlcallback-input"><code><c- g>input</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑥"><c- b>any</c-></a>... <dfn class="dfn-paneled idl-code" data-dfn-for="CreateHTMLCallback" data-dfn-type="argument" data-export id="dom-createhtmlcallback-arguments"><code><c- g>arguments</c-></code></dfn>);
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-createscriptcallback"><code><c- g>CreateScriptCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑧"><c- b>DOMString</c-></a>? (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑨"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CreateScriptCallback" data-dfn-type="argument" data-export id="dom-createscriptcallback-input"><code><c- g>input</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑦"><c- b>any</c-></a>... <dfn class="dfn-paneled idl-code" data-dfn-for="CreateScriptCallback" data-dfn-type="argument" data-export id="dom-createscriptcallback-arguments"><code><c- g>arguments</c-></code></dfn>);
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-createscripturlcallback"><code><c- g>CreateScriptURLCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①"><c- b>USVString</c-></a>? (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②⓪"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CreateScriptURLCallback" data-dfn-type="argument" data-export id="dom-createscripturlcallback-input"><code><c- g>input</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑧"><c- b>any</c-></a>... <dfn class="dfn-paneled idl-code" data-dfn-for="CreateScriptURLCallback" data-dfn-type="argument" data-export id="dom-createscripturlcallback-arguments"><code><c- g>arguments</c-></code></dfn>);
</pre>
   <h4 class="heading settled" data-level="2.3.4" id="default-policy-hdr"><span class="secno">2.3.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="default-policy-explanation" data-noexport id="default-policy-explanation">Default policy</dfn></span><a class="self-link" href="#default-policy-hdr"></a></h4>
   <p><em>This section is not normative.</em></p>
   <p>One of the policies, the policy with a <a data-link-type="dfn" href="#trustedtypepolicy-name" id="ref-for-trustedtypepolicy-name">name</a> <code>"default"</code>, is special;
When an <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①③">injection sink</a> is passed a string (instead of a
Trusted Type object), this policy will be implicitly called by
the user agent with the non trusted string value, Trusted Type of the sink and
the sink type, respectively.</p>
   <p>This allows the application to define a fallback behavior to use instead of
causing a violation. The intention is to allow the applications to recover from
an unexpected data flow, and sanitize the
potentially attacker-controlled string "as a last resort", or reject a value
if a safe value cannot be created. Errors thrown from within a policy are
propagated to the application.</p>
   <p>If the default policy doesn’t exist, or if its appropriate <code>create*</code> function
returns <em>null</em> or <em>undefined</em>, it will cause a CSP violation. In the
enforcing mode, an error will be thrown, but in report-only the original value
passed to the default policy will be used.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This optional behavior allows for introducing Trusted Type <a data-link-type="dfn" href="#enforcement" id="ref-for-enforcement④">enforcement</a>
to applications that are still using legacy code that uses injection sinks.
Needless to say, this policy should
necessarily be defined with very strict rules not to bypass the security
restrictions in unknown parts of the application. In an extreme
case, a lax, no-op default policy defeats all the benefits of using Trusted Types
to protect access to <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①④">injection sinks</a>. If possible,
authors should resort to a default policy in a transitional period
only, use it to detect and rewrite their dependencies that use injection
sinks unsafely and eventually phase out the usage of the default policy entirely.</p>
   <p class="note" role="note"><span class="marker">Note:</span> See <a href="#get-trusted-type-compliant-string-algorithm">§ 3.4 Get Trusted Type compliant string</a> for details on how
the default policy is applied.</p>
   <div class="example" id="default-policy-example">
    <a class="self-link" href="#default-policy-example"></a>

<pre class="highlight"><c- c1>// Content-Security-Policy: trusted-types default; require-trusted-types-for 'script'</c->

trustedTypes<c- p>.</c->createPolicy<c- p>(</c-><c- t>'default'</c-><c- p>,</c-> <c- p>{</c->
  createScriptURL<c- o>:</c-> <c- p>(</c->value<c- p>,</c-> type<c- p>,</c-> sink<c- p>)</c-> <c- p>=></c-> <c- p>{</c->
    console<c- p>.</c->log<c- p>(</c-><c- u>"Please refactor."</c-><c- p>);</c->
    <c- k>return</c-> value <c- o>+</c-> <c- t>'?default-policy-used&amp;type='</c-> <c- o>+</c-> encodeURIComponent<c- p>(</c->type<c- p>)</c-> <c- o>+</c->
          <c- t>'&amp;sink='</c-> <c- o>+</c-> encodeURIComponent<c- p>(</c->sink<c- p>);</c->
  <c- p>}</c->
<c- p>});</c->

aScriptElement<c- p>.</c->src <c- o>=</c-> <c- u>"https://cdn.example/script.js"</c-><c- p>;</c->
<c- c1>// Please refactor.</c->
console<c- p>.</c->log<c- p>(</c->aScriptElement<c- p>.</c->src<c- p>);</c->
<c- c1>// https://cdn.example/script.js?default-policy-used&amp;type=TrustedScriptURL&amp;sink=HTMLScriptElement%20src</c->
</pre>
   </div>
   <h3 class="heading settled" data-level="2.4" id="enforcement-hdr"><span class="secno">2.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="enforcement">Enforcement</dfn></span><a class="self-link" href="#enforcement-hdr"></a></h3>
   <p class="note" role="note"><span class="marker">Note:</span> Enforcement is the process of checking that a value
has an appropriate type before it reaches an <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①⑤">injection sink</a>.</p>
   <p>The JavaScript API that allows authors to create policies and Trusted Types objects from them is always
available (via <code class="idl"><a data-link-type="idl" href="#dom-windoworworkerglobalscope-trustedtypes" id="ref-for-dom-windoworworkerglobalscope-trustedtypes">trustedTypes</a></code>). Since <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①⑥">injection sinks</a> stringify their security sensitive
arguments, and <a data-link-type="dfn" href="#trusted-type" id="ref-for-trusted-type③">Trusted Type</a> objects stringify to their inner string values, this allows the authors
to use Trusted Types in place of strings.</p>
   <p>To secure the access to <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①⑦">injection sinks</a>, on top of the JavaScript code using the Trusted Types,
the user agent needs to enforce them i.e. assert that the injection sinks from a given group are <em>never</em>
called with string values, and Trusted Type values are used instead. This section describes how authors
may control this enforcing behavior.</p>
   <p>Authors may also control their <a data-link-type="dfn" href="#policies" id="ref-for-policies③">policies</a> by specifying rules around policy creation.</p>
   <h4 class="heading settled" data-level="2.4.1" id="content-security-policy-hdr"><span class="secno">2.4.1. </span><span class="content">Content Security Policy</span><a class="self-link" href="#content-security-policy-hdr"></a></h4>
   <p>Applications may control Trusted Type enforcement via <a href="https://w3c.github.io/webappsec-csp/#policy-delivery">configuring a Content Security Policy</a>. This document defines new directives that correspond to Trusted Types rules.
The <a data-link-type="dfn" href="#require-trusted-types-for-directive" id="ref-for-require-trusted-types-for-directive①">require-trusted-types-for</a> directive specifies the <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①⑧">injection sinks</a> groups, for which the types should be required. The <a href="#trusted-types-csp-directive">trusted-types</a> directive controls how <a data-link-type="dfn" href="#policies" id="ref-for-policies④">policies</a> can be created.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Using CSP mechanisms allows the authors to prepare their application for enforcing Trusted Types
via using the <a data-link-type="http-header" href="https://w3c.github.io/webappsec-csp/#header-content-security-policy-report-only" id="ref-for-header-content-security-policy-report-only①">Content-Security-Policy-Report-Only</a> HTTP Response header.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Most of the enforcement rules are defined as modifications of the
algorithms in other specifications, see <a href="#integrations">§ 4 Integrations</a>.</p>
   <h2 class="heading settled" data-level="3" id="algorithms"><span class="secno">3. </span><span class="content">Algorithms</span><a class="self-link" href="#algorithms"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="create-trusted-type-policy-algorithm"><span class="secno">3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-create-a-trusted-type-policy">Create a Trusted Type Policy</dfn></span><a class="self-link" href="#create-trusted-type-policy-algorithm"></a></h3>
   <p>To create a <code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy①⓪">TrustedTypePolicy</a></code>, given a <code class="idl"><a data-link-type="idl" href="#trustedtypepolicyfactory" id="ref-for-trustedtypepolicyfactory③">TrustedTypePolicyFactory</a></code> (<var>factory</var>),
a string (<var>policyName</var>), <code class="idl"><a data-link-type="idl" href="#dictdef-trustedtypepolicyoptions" id="ref-for-dictdef-trustedtypepolicyoptions④">TrustedTypePolicyOptions</a></code> dictionary (<var>options</var>), and a
<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global">global object</a> (<var>global</var>) run these steps:</p>
   <ol>
    <li data-md>
     <p>Let <var>allowedByCSP</var> be the result of executing <a data-link-type="abstract-op" href="#abstract-opdef-should-trusted-type-policy-creation-be-blocked-by-content-security-policy" id="ref-for-abstract-opdef-should-trusted-type-policy-creation-be-blocked-by-content-security-policy">Should Trusted Type policy creation be blocked by Content Security Policy?</a> algorithm with <var>global</var>,
<var>policyName</var> and <var>factory</var>’s <a data-link-type="dfn" href="#trustedtypepolicyfactory-created-policy-names" id="ref-for-trustedtypepolicyfactory-created-policy-names">created policy names</a> value.</p>
    <li data-md>
     <p>If <var>allowedByCSP</var> is <code>"Blocked"</code>, throw a TypeError and abort further steps.</p>
    <li data-md>
     <p>If <var>policyName</var> is <code>default</code> and the <var>factory</var>’s <a data-link-type="dfn" href="#trustedtypepolicyfactory-default-policy" id="ref-for-trustedtypepolicyfactory-default-policy①">default policy</a>
value is not null, throw a TypeError and abort further steps.</p>
    <li data-md>
     <p>Let <var>policy</var> be a new <code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy①①">TrustedTypePolicy</a></code> object.</p>
    <li data-md>
     <p>Set <var>policy</var>’s <code>name</code> property value to <var>policyName</var>.</p>
    <li data-md>
     <p>Set <var>policy</var>’s <a data-link-type="dfn" href="#trustedtypepolicy-options" id="ref-for-trustedtypepolicy-options">options</a> value to «[
  "createHTML" -> <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-trustedtypepolicyoptions-createhtml" id="ref-for-dom-trustedtypepolicyoptions-createhtml">createHTML</a></code>",
  "createScript" -> <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-trustedtypepolicyoptions-createscript" id="ref-for-dom-trustedtypepolicyoptions-createscript">createScript</a></code>",
  "createScriptURL" -> <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-trustedtypepolicyoptions-createscripturl" id="ref-for-dom-trustedtypepolicyoptions-createscripturl">createScriptURL</a></code>"
]».</p>
    <li data-md>
     <p>If the <var>policyName</var> is <code>default</code>, set the <var>factory</var>’s <a data-link-type="dfn" href="#trustedtypepolicyfactory-default-policy" id="ref-for-trustedtypepolicyfactory-default-policy②">default policy</a> value to <var>policy</var>.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">Append</a> <var>policyName</var> to <var>factory</var>’s <a data-link-type="dfn" href="#trustedtypepolicyfactory-created-policy-names" id="ref-for-trustedtypepolicyfactory-created-policy-names①">created policy names</a>.</p>
    <li data-md>
     <p>Return <var>policy</var>.</p>
   </ol>
   <h3 class="heading settled" data-level="3.2" id="create-a-trusted-type-algorithm"><span class="secno">3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-create-a-trusted-type">Create a Trusted Type</dfn></span><a class="self-link" href="#create-a-trusted-type-algorithm"></a></h3>
   <p>Given a <code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy①②">TrustedTypePolicy</a></code> <var>policy</var>, a type name <var>trustedTypeName</var>,
a string <var>value</var> and a list <var>arguments</var>, execute the following steps:</p>
   <ol>
    <li data-md>
     <p>Let <var>policyValue</var> be the result of executing <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-policy-value" id="ref-for-abstract-opdef-get-trusted-type-policy-value">Get Trusted Type policy value</a> with the same arguments as this algorithm and additionally true as <var>throwIfMissing</var>.</p>
    <li data-md>
     <p>If the algorithm threw an error, rethrow the error and abort the following steps.</p>
    <li data-md>
     <p>Let <var>dataString</var> be the result of stringifying <var>policyValue</var>.</p>
    <li data-md>
     <p>If <var>policyValue</var> is null or undefined, set <var>dataString</var> to the empty string.</p>
    <li data-md>
     <p>Return a new instance of an interface with a type
name <var>trustedTypeName</var>, with its associated data value set to <var>dataString</var>.</p>
   </ol>
   <h3 class="heading settled" data-level="3.3" id="get-trusted-type-policy-value-algorithm"><span class="secno">3.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-get-trusted-type-policy-value">Get Trusted Type policy value</dfn></span><a class="self-link" href="#get-trusted-type-policy-value-algorithm"></a></h3>
   <p>Given a <code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy①③">TrustedTypePolicy</a></code> <var>policy</var>, a type name <var>trustedTypeName</var>,
a string <var>value</var>, a list <var>arguments</var>, and a boolean <var>throwIfMissing</var>, execute the following steps:</p>
   <ol>
    <li data-md>
     <p>Let <var>functionName</var> be a function name for the given <var>trustedTypeName</var>,
based on the following table:</p>
     <table>
      <tbody>
       <tr>
        <th>Function name
        <th>Trusted Type name 
       <tr>
        <td>"createHTML"
        <td>"TrustedHTML"
       <tr>
        <td>"createScript"
        <td>"TrustedScript"
       <tr>
        <td>"createScriptURL"
        <td>"TrustedScriptURL"
     </table>
    <li data-md>
     <p>Let <var>function</var> be <var>policy</var>’s <a data-link-type="dfn" href="#trustedtypepolicy-options" id="ref-for-trustedtypepolicy-options①">options</a>[<var>functionName</var>].</p>
    <li data-md>
     <p>If <var>function</var> is <code>null</code>, then:</p>
     <ol>
      <li data-md>
       <p>If <var>throwIfMissing</var> throw a TypeError.</p>
      <li data-md>
       <p>Else return <code>null</code>.</p>
     </ol>
    <li data-md>
     <p>Let <var>policyValue</var> be the result of invoking <var>function</var> with
<var>value</var> as a first argument, items of <var>arguments</var> as subsequent arguments,
and <a href="https://tc39.es/ecma262/multipage/overview.html#sec-method">callback <strong>this</strong> value</a> set to <code>null</code>, rethrowing any exceptions.</p>
    <li data-md>
     <p>Return <var>policyValue</var>.</p>
   </ol>
   <h3 class="heading settled" data-level="3.4" id="get-trusted-type-compliant-string-algorithm"><span class="secno">3.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-get-trusted-type-compliant-string">Get Trusted Type compliant string</dfn></span><a class="self-link" href="#get-trusted-type-compliant-string-algorithm"></a></h3>
   <p>This algorithm will return a string that can be used with an
<a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink①⑨">injection sink</a>, optionally unwrapping it from a matching <a data-link-type="dfn" href="#trusted-type" id="ref-for-trusted-type④">Trusted Type</a>.
It will ensure that the Trusted Type <a data-link-type="dfn" href="#enforcement" id="ref-for-enforcement⑤">enforcement</a> rules were respected.</p>
   <p>Given a <code class="idl"><a data-link-type="idl" href="#typedefdef-trustedtype" id="ref-for-typedefdef-trustedtype">TrustedType</a></code> type (<var>expectedType</var>), a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①">global object</a> (<var>global</var>),
<code class="idl"><a data-link-type="idl" href="#typedefdef-trustedtype" id="ref-for-typedefdef-trustedtype①">TrustedType</a></code> or a string (<var>input</var>), a string (<var>sink</var>) and a string (<var>sinkGroup</var>), run these steps:</p>
   <ol>
    <li data-md>
     <p>If <var>input</var> is an instance of <var>expectedType</var>, return stringified
<var>input</var> and abort these steps.</p>
    <li data-md>
     <p>Let <var>requireTrustedTypes</var> be the result of executing <a data-link-type="abstract-op" href="#abstract-opdef-does-sink-type-require-trusted-types" id="ref-for-abstract-opdef-does-sink-type-require-trusted-types">Does sink type require trusted types?</a> algorithm,
passing <var>global</var>, <var>sinkGroup</var>, and true.</p>
    <li data-md>
     <p>If <var>requireTrustedTypes</var> is <code>false</code>, return stringified <var>input</var> and abort these steps.</p>
    <li data-md>
     <p>Let <var>convertedInput</var> be the result of executing <a data-link-type="abstract-op" href="#abstract-opdef-process-value-with-a-default-policy" id="ref-for-abstract-opdef-process-value-with-a-default-policy">Process value with a default policy</a> with the same arguments as this algorithm.</p>
    <li data-md>
     <p>If the algorithm threw an error, rethrow the error and abort the following steps.</p>
    <li data-md>
     <p>If <var>convertedInput</var> is <code>null</code> or <code>undefined</code>, execute the following steps:</p>
     <ol>
      <li data-md>
       <p>Let <var>disposition</var> be the result of executing <a data-link-type="abstract-op" href="#abstract-opdef-should-sink-type-mismatch-violation-be-blocked-by-content-security-policy" id="ref-for-abstract-opdef-should-sink-type-mismatch-violation-be-blocked-by-content-security-policy">Should sink type mismatch violation be blocked by Content Security Policy?</a> algorithm,
passing <var>global</var>, stringified <var>input</var> as <var>source</var>, <var>sinkGroup</var> and <var>sink</var>.</p>
      <li data-md>
       <p>If <var>disposition</var> is <code>“Allowed”</code>, return stringified <var>input</var> and abort further steps.</p>
       <p class="note" role="note"><span class="marker">Note:</span> This step assures that the default policy rejection will be reported, but ignored in a report-only mode.</p>
      <li data-md>
       <p>Throw a TypeError and abort further steps.</p>
     </ol>
    <li data-md>
     <p class="assertion">Assert: <var>convertedInput</var> is an instance of <var>expectedType</var>.</p>
    <li data-md>
     <p>Return stringified <var>convertedInput</var>.</p>
   </ol>
   <h3 class="heading settled" data-level="3.5" id="process-value-with-a-default-policy-algorithm"><span class="secno">3.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-process-value-with-a-default-policy">Process value with a default policy</dfn></span><a class="self-link" href="#process-value-with-a-default-policy-algorithm"></a></h3>
   <p>This algorithm routes a value to be assigned to an <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②⓪">injection sink</a>  through a default policy, should one exist.</p>
   <p>Given a <code class="idl"><a data-link-type="idl" href="#typedefdef-trustedtype" id="ref-for-typedefdef-trustedtype②">TrustedType</a></code> type (<var>expectedType</var>), a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②">global object</a> (<var>global</var>),
<code class="idl"><a data-link-type="idl" href="#typedefdef-trustedtype" id="ref-for-typedefdef-trustedtype③">TrustedType</a></code> or a string (<var>input</var>), and a string (<var>sink</var>), run these steps:</p>
   <ol>
    <li data-md>
     <p>Let <var>defaultPolicy</var> be the value of <var>global</var>’s <a data-link-type="dfn" href="#window-trusted-type-policy-factory" id="ref-for-window-trusted-type-policy-factory">trusted type policy factory</a>’s <a data-link-type="dfn" href="#trustedtypepolicyfactory-default-policy" id="ref-for-trustedtypepolicyfactory-default-policy③">default policy</a>.</p>
    <li data-md>
     <p>Let <var>policyValue</var> be the result of executing <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-policy-value" id="ref-for-abstract-opdef-get-trusted-type-policy-value①">Get Trusted Type policy value</a>, with the following arguments:</p>
     <ul>
      <li data-md>
       <p><var>defaultPolicy</var> as <var>policy</var></p>
      <li data-md>
       <p>stringified <var>input</var> as <var>value</var></p>
      <li data-md>
       <p><var>expectedType</var>’s type name as <var>trustedTypeName</var></p>
      <li data-md>
       <p>« <var>trustedTypeName</var>, <var>sink</var> » as <var>arguments</var></p>
      <li data-md>
       <p>false as <var>throwIfMissing</var></p>
     </ul>
    <li data-md>
     <p>If the algorithm threw an error, rethrow the error and abort the following steps.</p>
    <li data-md>
     <p>If <var>policyValue</var> is null or undefined, return <var>policyValue</var>.</p>
    <li data-md>
     <p>Let <var>dataString</var> be the result of stringifying <var>policyValue</var>.</p>
    <li data-md>
     <p>Return a new instance of an interface with a type
name <var>trustedTypeName</var>, with its associated data value set to <var>dataString</var>.</p>
   </ol>
   <h3 class="heading settled" data-level="3.6" id="prepare-script-text"><span class="secno">3.6. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-prepare-the-script-text">Prepare the script text</dfn></span><a class="self-link" href="#prepare-script-text"></a></h3>
   <p>Given an <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement④">HTMLScriptElement</a></code> or <code class="idl"><a data-link-type="idl" href="https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement" id="ref-for-InterfaceSVGScriptElement">SVGScriptElement</a></code> (<var>script</var>), this algorithm performs the following steps:</p>
   <ol>
    <li data-md>
     <p>Let <var>sink</var> be "<code>HTMLScriptElement text</code>" if <var>script</var> is an <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement⑤">HTMLScriptElement</a></code>; otherwise "<code>SVGScriptElement text</code>".</p>
    <li data-md>
     <p>If <var>script</var>’s <a data-link-type="dfn" href="#htmlscriptelement-script-text" id="ref-for-htmlscriptelement-script-text">script text</a> value is not equal to its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-child-text-content" id="ref-for-concept-child-text-content">child text content</a>,
set <var>script</var>’s <a data-link-type="dfn" href="#htmlscriptelement-script-text" id="ref-for-htmlscriptelement-script-text①">script text</a> to the result of executing <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-compliant-string" id="ref-for-abstract-opdef-get-trusted-type-compliant-string">Get Trusted Type compliant string</a>, with the following arguments:</p>
     <ul>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#trustedscripturl" id="ref-for-trustedscripturl④">TrustedScriptURL</a></code> as <var>expectedType</var>,</p>
      <li data-md>
       <p><var>script</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①">relevant global object</a> as <var>global</var>,</p>
      <li data-md>
       <p><var>script</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-child-text-content" id="ref-for-concept-child-text-content①">child text content</a> attribute value,</p>
      <li data-md>
       <p><var>sink</var>,</p>
      <li data-md>
       <p><code>'script'</code> as <var>sinkGroup</var>.</p>
     </ul>
     <p>If the algorithm threw an error, rethrow the error.</p>
   </ol>
   <h3 class="heading settled" data-level="3.7" id="validate-attribute-mutation"><span class="secno">3.7. </span><span class="content">Get Trusted Types-compliant attribute value</span><a class="self-link" href="#validate-attribute-mutation"></a></h3>
   
To <dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-get-trusted-types-compliant-attribute-value">get Trusted Types-compliant attribute value</dfn> on <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#attr" id="ref-for-attr">Attr</a></code> <var>attribute</var> with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element④">Element</a></code> <var>element</var> and <code class="idl"><a data-link-type="idl" href="#typedefdef-trustedtype" id="ref-for-typedefdef-trustedtype④">TrustedType</a></code> or a string <var>newValue</var>, perform the following steps:


   <ol>
    <li data-md>
     <p>Set <var>attributeData</var> to the result of <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-data-for-attribute" id="ref-for-abstract-opdef-get-trusted-type-data-for-attribute①">Get Trusted Type data for attribute</a> algorithm, with the following arguments:</p>
     <ul>
      <li data-md>
       <p><var>element</var></p>
      <li data-md>
       <p><var>attribute</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-attribute-local-name" id="ref-for-concept-attribute-local-name">local name</a> as <var>attribute</var></p>
      <li data-md>
       <p><var>attribute</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-attribute-namespace" id="ref-for-concept-attribute-namespace">namespace</a> as <var>attributeNs</var></p>
     </ul>
    <li data-md>
     <p>If <var>attributeData</var> is null, then:</p>
     <ol>
      <li data-md>
       <p>If <var>newValue</var> is a string, return <var>newValue</var>.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: <var>newValue</var> is <code class="idl"><a data-link-type="idl" href="#trustedhtml" id="ref-for-trustedhtml①⓪">TrustedHTML</a></code> or <code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript⑨">TrustedScript</a></code> or <code class="idl"><a data-link-type="idl" href="#trustedscripturl" id="ref-for-trustedscripturl⑤">TrustedScriptURL</a></code>.</p>
      <li data-md>
       <p>Return <var>value</var>’s associated data.</p>
     </ol>
    <li data-md>
     <p>Let <var>expectedType</var> be the value of the fourth member of <var>attributeData</var>.</p>
    <li data-md>
     <p>Let <var>sink</var> be the value of the fifth member of <var>attributeData</var>.</p>
    <li data-md>
     <p>Return the result of executing <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-compliant-string" id="ref-for-abstract-opdef-get-trusted-type-compliant-string①">Get Trusted Type compliant string</a> with the following arguments:</p>
     <ul>
      <li data-md>
       <p><var>expectedType</var></p>
      <li data-md>
       <p><var>newValue</var> as <var>input</var></p>
      <li data-md>
       <p><var>element</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②">relevant global object</a> as <var>global</var></p>
      <li data-md>
       <p><var>sink</var></p>
      <li data-md>
       <p>'script' as <var>sinkGroup</var></p>
     </ul>
   </ol>
   <p>If the algorithm threw an error, rethrow the error.</p>
   <h3 class="heading settled" data-level="3.8" id="get-trusted-type-data-for-attribute"><span class="secno">3.8. </span><span class="content">Get Trusted Type data for attribute</span><a class="self-link" href="#get-trusted-type-data-for-attribute"></a></h3>
   
To <dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-get-trusted-type-data-for-attribute">Get Trusted Type data for attribute</dfn> given <var>element</var>, <var>attribute</var>, <var>attributeNs</var>, perform the following steps:


   <p class="issue" id="issue-15b3006c"><a class="self-link" href="#issue-15b3006c"></a> The <a data-link-type="dfn" href="https://html.spec.whatwg.org/#event-handler-content-attributes" id="ref-for-event-handler-content-attributes">event handler content attribute</a> concept used below is ambiguous. This spec needs a better mechanism to identify event handler attributes. See <a href="https://github.com/w3c/trusted-types/issues/520">https://github.com/w3c/trusted-types/issues/520</a>.</p>
   <ol>
    <li data-md>
     <p>Let <var>data</var> be null.</p>
    <li data-md>
     <p>If <var>attributeNs</var> is null, « <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace②">HTML namespace</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#svg-namespace" id="ref-for-svg-namespace">SVG namespace</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#mathml-namespace" id="ref-for-mathml-namespace">MathML namespace</a> » <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> <var>element</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-namespace" id="ref-for-concept-element-namespace">namespace</a>, and <var>attribute</var> is the name of an <a data-link-type="dfn" href="https://html.spec.whatwg.org/#event-handler-content-attributes" id="ref-for-event-handler-content-attributes①">event handler content attribute</a>:</p>
     <ol>
      <li data-md>
       <p>Return (<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑤">Element</a></code>, null, <var>attribute</var>, <code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript①⓪">TrustedScript</a></code>, "Element " + <var>attribute</var>).</p>
     </ol>
    <li data-md>
     <p>Find the row in the following table, where <var>element</var> is in the first column, <var>attributeNs</var> is in the second column,
and <var>attribute</var> is in the third column.
If a matching row is found, set <var>data</var> to that row.</p>
     <table>
      <thead>
       <tr>
        <th>Element
        <th>Attribute namespace
        <th>Attribute local name
        <th>TrustedType
        <th>Sink
  
      <tbody>
       <tr>
        <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement" id="ref-for-htmliframeelement①">HTMLIFrameElement</a></code>
        <td>null
        <td>"srcdoc"
        <td><code class="idl"><a data-link-type="idl" href="#trustedhtml" id="ref-for-trustedhtml①①">TrustedHTML</a></code>
        <td>"HTMLIFrameElement srcdoc"
    
       <tr>
        <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement⑥">HTMLScriptElement</a></code>
        <td>null
        <td>"src"
        <td><code class="idl"><a data-link-type="idl" href="#trustedscripturl" id="ref-for-trustedscripturl⑥">TrustedScriptURL</a></code>
        <td>"HTMLScriptElement src"
    
       <tr>
        <td><code class="idl"><a data-link-type="idl" href="https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement" id="ref-for-InterfaceSVGScriptElement①">SVGScriptElement</a></code>
        <td>null
        <td>"href"
        <td><code class="idl"><a data-link-type="idl" href="#trustedscripturl" id="ref-for-trustedscripturl⑦">TrustedScriptURL</a></code>
        <td>"SVGScriptElement href"
    
       <tr>
        <td><code class="idl"><a data-link-type="idl" href="https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement" id="ref-for-InterfaceSVGScriptElement②">SVGScriptElement</a></code>
        <td><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#xlink-namespace" id="ref-for-xlink-namespace">XLink namespace</a>
        <td>"href"
        <td><code class="idl"><a data-link-type="idl" href="#trustedscripturl" id="ref-for-trustedscripturl⑧">TrustedScriptURL</a></code>
        <td>"SVGScriptElement href"
  
     </table>
    <li data-md>
     <p>Return <var>data</var>.</p>
   </ol>
   <h2 class="heading settled" data-level="4" id="integrations"><span class="secno">4. </span><span class="content">Integrations</span><a class="self-link" href="#integrations"></a></h2>
<pre class="idl highlight def"><c- b>typedef</c-> (<a data-link-type="idl-name" href="#trustedhtml" id="ref-for-trustedhtml①②"><c- n>TrustedHTML</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#trustedscript" id="ref-for-trustedscript①①"><c- n>TrustedScript</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#trustedscripturl" id="ref-for-trustedscripturl⑨"><c- n>TrustedScriptURL</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-trustedtype"><code><c- g>TrustedType</c-></code></dfn>;
</pre>
   <h3 class="heading settled" data-level="4.1" id="integration-with-html"><span class="secno">4.1. </span><span class="content">Integration with HTML</span><a class="self-link" href="#integration-with-html"></a></h3>
   <p><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#worker" id="ref-for-worker">Worker</a></code> objects have a <dfn class="dfn-paneled" data-dfn-for="Window" data-dfn-type="dfn" data-noexport id="window-trusted-type-policy-factory">trusted type policy factory</dfn>,
which is a <code class="idl"><a data-link-type="idl" href="#trustedtypepolicyfactory" id="ref-for-trustedtypepolicyfactory④">TrustedTypePolicyFactory</a></code> object.</p>
   <h4 class="heading settled" data-level="4.1.1" id="extensions-to-the-windoworworkerglobalscope-interface"><span class="secno">4.1.1. </span><span class="content">Extensions to the WindowOrWorkerGlobalScope interface</span><a class="self-link" href="#extensions-to-the-windoworworkerglobalscope-interface"></a></h4>
   <p>This document extends the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope">WindowOrWorkerGlobalScope</a></code> interface defined by <a data-link-type="biblio" href="#biblio-html5" title="HTML5">HTML</a>:</p>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope①"><c- g>WindowOrWorkerGlobalScope</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#trustedtypepolicyfactory" id="ref-for-trustedtypepolicyfactory⑤"><c- n>TrustedTypePolicyFactory</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="WindowOrWorkerGlobalScope" data-dfn-type="attribute" data-export data-readonly data-type="TrustedTypePolicyFactory" id="dom-windoworworkerglobalscope-trustedtypes"><code><c- g>trustedTypes</c-></code></dfn>;
};
</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-windoworworkerglobalscope-trustedtypes" id="ref-for-dom-windoworworkerglobalscope-trustedtypes①">trustedTypes</a></code> getter steps are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③">relevant global object</a>’s <a href="#integration-with-html">trusted
type policy factory</a>.</p>
   <h4 class="heading settled" data-level="4.1.2" id="enforcement-in-scripts"><span class="secno">4.1.2. </span><span class="content">Enforcement for scripts</span><a class="self-link" href="#enforcement-in-scripts"></a></h4>
   <p>This document modifies how <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement⑦">HTMLScriptElement</a></code> <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-child-text-content" id="ref-for-concept-child-text-content②">child text content</a> can be set to allow applications to control dynamically created scripts. It does so by
adding the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#dom-innertext" id="ref-for-dom-innertext">innerText</a></code> and <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-textcontent" id="ref-for-dom-node-textcontent">textContent</a></code> attributes directly on <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement⑧">HTMLScriptElement</a></code>. The behavior of the attributes remains the same
as in their original counterparts, apart from the additional behavior of calling <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-compliant-string" id="ref-for-abstract-opdef-get-trusted-type-compliant-string②">Get Trusted Type compliant string</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Using these IDL attributes is the recommended way of dynamically setting the URL or a text of a script. Manipulating attribute nodes or text nodes directly will call a default policy on the final value when the script is prepared.</p>
<pre class="exclude idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement⑨"><c- g>HTMLScriptElement</c-></a> {
 [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> (<a data-link-type="idl-name" href="#trustedscript" id="ref-for-trustedscript①②"><c- n>TrustedScript</c-></a> <c- b>or</c-> [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyNullToEmptyString" id="ref-for-LegacyNullToEmptyString"><c- g>LegacyNullToEmptyString</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②①"><c- b>DOMString</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export data-type="(TrustedScript or [LegacyNullToEmptyString] DOMString)" id="dom-htmlscriptelement-innertext"><code><c- g>innerText</c-></code></dfn>;
 [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions①"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> (<a data-link-type="idl-name" href="#trustedscript" id="ref-for-trustedscript①③"><c- n>TrustedScript</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②②"><c- b>DOMString</c-></a>)? <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export data-type="(TrustedScript or DOMString)?" id="dom-htmlscriptelement-textcontent"><code><c- g>textContent</c-></code></dfn>;
 [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions②"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> (<a data-link-type="idl-name" href="#trustedscripturl" id="ref-for-trustedscripturl①⓪"><c- n>TrustedScriptURL</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString②"><c- b>USVString</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export data-type="(TrustedScriptURL or USVString)" id="dom-htmlscriptelement-src"><code><c- g>src</c-></code></dfn>;
 [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions③"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> (<a data-link-type="idl-name" href="#trustedscript" id="ref-for-trustedscript①④"><c- n>TrustedScript</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②③"><c- b>DOMString</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export data-type="(TrustedScript or DOMString)" id="dom-htmlscriptelement-text"><code><c- g>text</c-></code></dfn>;
};
</pre>
   <h5 class="heading settled" data-level="4.1.2.1" id="slots-with-trusted-values"><span class="secno">4.1.2.1. </span><span class="content">Slots with trusted values</span><a class="self-link" href="#slots-with-trusted-values"></a></h5>
   <p>An <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement①⓪">HTMLScriptElement</a></code> and <code class="idl"><a data-link-type="idl" href="https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement" id="ref-for-InterfaceSVGScriptElement③">SVGScriptElement</a></code> have:</p>
   <dl>
    <dt data-md>an associated string <dfn class="dfn-paneled" data-dfn-for="HTMLScriptElement,SVGScriptElement" data-dfn-type="dfn" data-export id="htmlscriptelement-script-text">script text</dfn>.
    <dd data-md>
     <p>A string, containing the body of the script to execute that was set
through a compliant sink. Equivalent to script’s
<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-child-text-content" id="ref-for-concept-child-text-content③">child text content</a>. Initially an empty string.</p>
   </dl>
   <h5 class="heading settled" data-level="4.1.2.2" id="the-innerText-idl-attribute"><span class="secno">4.1.2.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-htmlscriptelement-innertext" id="ref-for-dom-htmlscriptelement-innertext">innerText</a></code> IDL attribute</span><a class="self-link" href="#the-innerText-idl-attribute"></a></h5>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-htmlscriptelement-innertext" id="ref-for-dom-htmlscriptelement-innertext①">innerText</a></code> setter steps are:</p>
   <ol>
    <li data-md>
     <p>Let <var>value</var> be the result of calling <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-compliant-string" id="ref-for-abstract-opdef-get-trusted-type-compliant-string③">Get Trusted Type compliant string</a> with
<code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript①⑤">TrustedScript</a></code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global④">relevant global object</a>, the given value, <code>HTMLScriptElement innerText</code>, and
<code>script</code>.</p>
    <li data-md>
     <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a>’s <a data-link-type="dfn" href="#htmlscriptelement-script-text" id="ref-for-htmlscriptelement-script-text②">script text</a> value to <var>value</var>.</p>
    <li data-md>
     <p>Run <a data-link-type="dfn" href="https://html.spec.whatwg.org/#set-the-inner-text-steps" id="ref-for-set-the-inner-text-steps">set the inner text steps</a> with <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a> and <var>value</var>.</p>
   </ol>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-htmlscriptelement-innertext" id="ref-for-dom-htmlscriptelement-innertext②">innerText</a></code> getter steps are:</p>
   <ol>
    <li data-md>
     <p>Return the result of running <a data-link-type="dfn" href="https://html.spec.whatwg.org/#get-the-text-steps" id="ref-for-get-the-text-steps">get the text steps</a> with <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a>.</p>
   </ol>
   <h5 class="heading settled" data-level="4.1.2.3" id="the-textContent-idl-attribute"><span class="secno">4.1.2.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-htmlscriptelement-textcontent" id="ref-for-dom-htmlscriptelement-textcontent">textContent</a></code> IDL attribute</span><a class="self-link" href="#the-textContent-idl-attribute"></a></h5>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-htmlscriptelement-textcontent" id="ref-for-dom-htmlscriptelement-textcontent①">textContent</a></code> setter steps are to, if the given value is null, act as if it was the
empty string instead, and then do as described below:</p>
   <ol>
    <li data-md>
     <p>Let <var>value</var> be the result of calling <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-compliant-string" id="ref-for-abstract-opdef-get-trusted-type-compliant-string④">Get Trusted Type compliant string</a> with
<code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript①⑥">TrustedScript</a></code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑤">relevant global object</a>, the given value, <code>HTMLScriptElement textContent</code>, and
<code>script</code>.</p>
    <li data-md>
     <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a>’s <a data-link-type="dfn" href="#htmlscriptelement-script-text" id="ref-for-htmlscriptelement-script-text③">script text</a> value to <var>value</var>.</p>
    <li data-md>
     <p>Run <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#set-text-content" id="ref-for-set-text-content">set text content</a> with <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a> and <var>value</var>.</p>
   </ol>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-htmlscriptelement-textcontent" id="ref-for-dom-htmlscriptelement-textcontent②">textContent</a></code> getter steps are:</p>
   <ol>
    <li data-md>
     <p>Return the result of running <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#get-text-content" id="ref-for-get-text-content">get text content</a> with <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>.</p>
   </ol>
   <p class="note" role="note"><span class="marker">Note:</span> Currently we don’t add an equivalent to <code class="idl"><a data-link-type="idl" href="https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement" id="ref-for-InterfaceSVGScriptElement④">SVGScriptElement</a></code>. See <a href="https://github.com/w3c/trusted-types/issues/512">https://github.com/w3c/trusted-types/issues/512</a>.</p>
   <h5 class="heading settled" data-level="4.1.2.4" id="the-text-idl-attribute"><span class="secno">4.1.2.4. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-htmlscriptelement-text" id="ref-for-dom-htmlscriptelement-text①">text</a></code> IDL attribute</span><a class="self-link" href="#the-text-idl-attribute"></a></h5>
   <p>Update the <code class="idl"><a data-link-type="idl" href="#dom-htmlscriptelement-text" id="ref-for-dom-htmlscriptelement-text②">text</a></code> setter steps algorithm as follows.</p>
   <ol>
    <li data-md>
     <ins>Let <var>value</var> be the result of calling <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-compliant-string" id="ref-for-abstract-opdef-get-trusted-type-compliant-string⑤">Get Trusted Type compliant string</a> with
<code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript①⑦">TrustedScript</a></code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑥">relevant global object</a>, the given value, <code>HTMLScriptElement text</code>, and
<code>script</code>.</ins>
    <li data-md>
     <ins>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a>’s <a data-link-type="dfn" href="#htmlscriptelement-script-text" id="ref-for-htmlscriptelement-script-text④">script text</a> value to the given value.</ins>
    <li data-md>
     <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#string-replace-all" id="ref-for-string-replace-all">String replace all</a> with the given value within <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑥">this</a>.</p>
   </ol>
   <h5 class="heading settled" data-level="4.1.2.5" id="the-src-idl-attribute"><span class="secno">4.1.2.5. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-htmlscriptelement-src" id="ref-for-dom-htmlscriptelement-src①">src</a></code> IDL attribute</span><a class="self-link" href="#the-src-idl-attribute"></a></h5>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-htmlscriptelement-src" id="ref-for-dom-htmlscriptelement-src②">src</a></code> setter steps are:</p>
   <ol>
    <li data-md>
     <ins>Let <var>value</var> be the result of calling <a data-link-type="abstract-op" href="#abstract-opdef-get-trusted-type-compliant-string" id="ref-for-abstract-opdef-get-trusted-type-compliant-string⑥">Get Trusted Type compliant string</a> with
<code class="idl"><a data-link-type="idl" href="#trustedscripturl" id="ref-for-trustedscripturl①①">TrustedScriptURL</a></code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑦">relevant global object</a>, the given value, <code>HTMLScriptElement src</code>, and
<code>script</code>.</ins>
    <li data-md>
     <ins>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/#attr-script-src" id="ref-for-attr-script-src">src</a> content attribute to <var>value</var>.</ins>
   </ol>
   <h5 class="heading settled" data-level="4.1.2.6" id="setting-slot-values-from-parser"><span class="secno">4.1.2.6. </span><span class="content">Setting slot values from parser</span><a class="self-link" href="#setting-slot-values-from-parser"></a></h5>
   <p>This document modifies the HTML parser to set the <a data-link-type="dfn" href="#htmlscriptelement-script-text" id="ref-for-htmlscriptelement-script-text⑤">script text</a> value when the script is created.</p>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/#parsing-main-incdata" id="ref-for-parsing-main-incdata">The text insertion mode</a> algorithm as follows:</p>
   <dl class="switch">
    <dt id="scriptEndTag"><a class="self-link" href="#scriptEndTag"></a>An end tag whose tag name is "script"
    <dd>
     <p>...</p>
     <ins>
      <p>Set <var>script</var>’s <a data-link-type="dfn" href="#htmlscriptelement-script-text" id="ref-for-htmlscriptelement-script-text⑥">script text</a> value to its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-child-text-content" id="ref-for-concept-child-text-content④">child text content</a>.</p>
     </ins>
     <p>If the <span>active speculative HTML parser</span> is null, then <span>prepare the script
        element</span> <var>script</var>. This might cause some script to execute, which might cause
        <span data-x="dom-document-write">new characters to be inserted into the tokenizer</span>, and
        might cause the tokenizer to output more tokens, resulting in a <a data-link-type="dfn" href="https://html.spec.whatwg.org/#nestedParsing" id="ref-for-nestedParsing">reentrant invocation of the parser</a>.</p>
     <p>...</p>
   </dl>
   <p class="issue" id="issue-d6e90040"><a class="self-link" href="#issue-d6e90040"></a> The above algorithm doesn’t account for the case when the script element’s content is changed mid-parse. Implementors must ensure they protect against this case. See <a href="https://github.com/w3c/trusted-types/issues/507">https://github.com/w3c/trusted-types/issues/507</a>.</p>
   <p class="issue" id="issue-c38e8ff0"><a class="self-link" href="#issue-c38e8ff0"></a> There’s no proper definition for the processing of SVG script elements. However, implementations must apply a similar change to the processing of <code class="idl"><a data-link-type="idl" href="https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement" id="ref-for-InterfaceSVGScriptElement⑤">SVGScriptElement</a></code>s.</p>
   <h5 class="heading settled" data-level="4.1.2.7" id="slot-value-verification"><span class="secno">4.1.2.7. </span><span class="content">Slot value verification</span><a class="self-link" href="#slot-value-verification"></a></h5>
   <p>The first few steps of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/#prepare-the-script-element" id="ref-for-prepare-the-script-element">prepare the script element</a> algorithm are modified as follows:</p>
   <ol>
    <li>
     <p>If <var>el</var>’s <a href="https://html.spec.whatwg.org/#already-started" id="script-processing-model:already-started-3">already started</a> is true, then return.
  </p>
    <li>
     <p>Let <var>parser document</var> be <var>el</var>’s <a href="https://html.spec.whatwg.org/#parser-document" id="script-processing-model:parser-document-2">parser document</a>.
  </p>
    <li>
     <p>Set <var>el</var>’s <a href="https://html.spec.whatwg.org/#parser-document" id="script-processing-model:parser-document-3">parser document</a> to null.</p>
     <p class="note" role="note">This is done so that if parser-inserted <code id="script-processing-model:the-script-element-27"><a href="https://html.spec.whatwg.org/#the-script-element">script</a></code> elements fail to run
    when the parser tries to run them, e.g. because they are empty or specify an unsupported
    scripting language, another script can later mutate them and cause them to run again.</p>
    <li>
     <p>If <var>parser document</var> is non-null and <var>el</var> does not have an <code id="script-processing-model:attr-script-async-4"><a href="https://html.spec.whatwg.org/#attr-script-async">async</a></code> attribute, then set <var>el</var>’s <a href="https://html.spec.whatwg.org/#script-force-async" id="script-processing-model:script-force-async-2">force async</a> to true.</p>
     <p class="note" role="note">This is done so that if a parser-inserted <code id="script-processing-model:the-script-element-28"><a href="https://html.spec.whatwg.org/#the-script-element">script</a></code> element fails to
    run when the parser tries to run it, but it is later executed after a script dynamically
    updates it, it will execute in an async fashion even if the <code id="script-processing-model:attr-script-async-5"><a href="https://html.spec.whatwg.org/#attr-script-async">async</a></code> attribute isn’t set.</p>
    <li>
     <ins>
      <p>Execute the <a data-link-type="abstract-op" href="#abstract-opdef-prepare-the-script-text" id="ref-for-abstract-opdef-prepare-the-script-text">Prepare the script text</a> algorithm on <var>el</var>. If that algorithm threw an error, then return.</p>
     </ins>
    <li>
     <p>
      Let <var>source text</var> be <var>el</var>’s 
      <del><a data-x-internal="child-text-content" href="https://dom.spec.whatwg.org/#concept-child-text-content" id="script-processing-model:child-text-content">child text content</a>.</del>
      <ins><a data-link-type="dfn" href="#htmlscriptelement-script-text" id="ref-for-htmlscriptelement-script-text⑦">script text</a> value.</ins>
     </p>
    <li>...
  
   </ol>
   <p class="issue" id="issue-c38e8ff0①"><a class="self-link" href="#issue-c38e8ff0①"></a> There’s no proper definition for the processing of SVG script elements. However, implementations must apply a similar change to the processing of <code class="idl"><a data-link-type="idl" href="https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement" id="ref-for-InterfaceSVGScriptElement⑥">SVGScriptElement</a></code>s.</p>
   <h3 class="heading settled" data-level="4.2" id="integration-with-dom"><span class="secno">4.2. </span><span class="content">Integration with DOM</span><a class="self-link" href="#integration-with-dom"></a></h3>
   <p class="note" role="note"><span class="marker">Note:</span> See <a href="https://github.com/whatwg/dom/pull/1268">https://github.com/whatwg/dom/pull/1268</a> which upstreams this integration.</p>
   <h3 class="heading settled" data-level="4.3" id="integration-with-content-security-policy"><span class="secno">4.3. </span><span class="content">Integration with Content Security Policy</span><a class="self-link" href="#integration-with-content-security-policy"></a></h3>
   <h4 class="heading settled" data-level="4.3.1" id="require-trusted-types-for-csp-directive"><span class="secno">4.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="require-trusted-types-for-directive" id="require-trusted-types-for-directive">require-trusted-types-for</dfn> directive</span><a class="self-link" href="#require-trusted-types-for-csp-directive"></a></h4>
   <p>This document defines <em>require-trusted-types-for</em> - a new <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives" id="ref-for-directives">Content Security Policy directive</a>.</p>
   <p><a data-link-type="dfn" href="#require-trusted-types-for-directive" id="ref-for-require-trusted-types-for-directive②">require-trusted-types-for</a> directive configures the Trusted
Types framework for all the <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②①">injection sinks</a> of certain groups in a current <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm" id="ref-for-concept-global-object-realm①">realm</a>.
Specifically, it defines what should be the behavior when a string value is passed to an <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②②">injection sink</a>
of a given group (i.e. should the type-based enforcement be enabled for such sinks).</p>
   <p class="note" role="note"><span class="marker">Note:</span> Currently, only the enforcement for <a href="#dom-xss-injection-sinks">§ 2.1.1 DOM XSS injection sinks</a> is specified.</p>
   <p>The syntax for the directive’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-name" id="ref-for-directive-name">name</a> and <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-value" id="ref-for-directive-value">value</a> is described by the following
ABNF:</p>
<pre>directive-name = "require-trusted-types-for"
directive-value = <a data-link-type="dfn" href="#trusted-types-sink-group-keyword" id="ref-for-trusted-types-sink-group-keyword">trusted-types-sink-group-keyword</a> *( <a href="https://w3c.github.io/webappsec-csp/#grammardef-required-ascii-whitespace">required-ascii-whitespace</a> <a data-link-type="dfn" href="#trusted-types-sink-group-keyword" id="ref-for-trusted-types-sink-group-keyword①">trusted-types-sink-group-keyword</a>)
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="trusted-types-sink-group-keyword">trusted-types-sink-group-keyword</dfn> = "'" <a data-link-type="dfn" href="#trusted-types-sink-group" id="ref-for-trusted-types-sink-group②">trusted-types-sink-group</a> "'"
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="trusted-types-sink-group">trusted-types-sink-group</dfn> = "script"
</pre>
   <div class="example" id="require-tt-for-script-header">
    <a class="self-link" href="#require-tt-for-script-header"></a>
Enforce Trusted Types at the DOM XSS injection sinks.


<pre class="http">Content-Security-Policy: require-trusted-types-for 'script'
</pre>
   </div>
   <h5 class="heading settled" data-level="4.3.1.1" id="require-trusted-types-for-pre-navigation-check"><span class="secno">4.3.1.1. </span><span class="content"><code>require-trusted-types-for</code> Pre-Navigation check</span><a class="self-link" href="#require-trusted-types-for-pre-navigation-check"></a></h5>
   <p>Given a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request">request</a> (<var>request</var>), a string <var>navigation type</var> and a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#content-security-policy-object" id="ref-for-content-security-policy-object">policy</a> (<var>policy</var>), this algorithm returns <code>"Blocked"</code>
if a navigation violates the <a data-link-type="dfn" href="#require-trusted-types-for-directive" id="ref-for-require-trusted-types-for-directive③">require-trusted-types-for</a> directive’s constraints and <code>"Allowed"</code>
otherwise. This constitutes the <a data-link-type="dfn" href="#require-trusted-types-for-directive" id="ref-for-require-trusted-types-for-directive④">require-trusted-types-for</a> directive’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-pre-navigation-check" id="ref-for-directive-pre-navigation-check">pre-navigation check</a>:</p>
   <p class="note" role="note"><span class="marker">Note:</span> This algorithm assures that the code to be executed by a navigation to a <code>javascript:</code> URL will have to pass through a
<a data-link-type="dfn" href="#default-policy-explanation" id="ref-for-default-policy-explanation">default policy</a>’s <code>createScript</code> function, in addition to all other restrictions imposed by other CSP directives.</p>
   <ol>
    <li data-md>
     <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url">url</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme">scheme</a> is not <code>"javascript"</code>, return <code>"Allowed"</code> and abort further steps.</p>
    <li data-md>
     <p>Let <var>urlString</var> be the result of running the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer">URL serializer</a> on <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url①">url</a>.</p>
    <li data-md>
     <p>Let <var>encodedScriptSource</var> be the result of removing the leading <code>"javascript:"</code> from <var>urlString</var>.</p>
    <li data-md>
     <p>Let <var>convertedScriptSource</var> be the result of executing <a data-link-type="abstract-op" href="#abstract-opdef-process-value-with-a-default-policy" id="ref-for-abstract-opdef-process-value-with-a-default-policy①">Process value with a default policy</a> algorithm, with the following arguments:</p>
     <ul>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript①⑧">TrustedScript</a></code> as <var>expectedType</var></p>
      <li data-md>
       <p><var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client">clients</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global">global object</a> as <var>global</var></p>
      <li data-md>
       <p><var>encodedScriptSource</var> as <var>input</var></p>
      <li data-md>
       <p><code>"Location href"</code> as <var>sink</var></p>
     </ul>
     <p>If that algorithm threw an error or <var>convertedScriptSource</var> is not a <code class="idl"><a data-link-type="idl" href="#trustedscript" id="ref-for-trustedscript①⑨">TrustedScript</a></code> object, return "Blocked" and abort further steps.</p>
    <li data-md>
     <p>Set <var>urlString</var> to be the result of prepending <code>"javascript:"</code> to stringified <var>convertedScriptSource</var>.</p>
    <li data-md>
     <p>Let <var>newURL</var> be the result of running the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser">URL parser</a> on <var>urlString</var>. If the parser returns a failure, return <code>"Blocked"</code> and abort further steps.</p>
    <li data-md>
     <p>Set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url②">url</a> to <var>newURL</var>.</p>
     <p class="note" role="note"><span class="marker">Note:</span> No other CSP directives operate on <code>javascript:</code> URLs in a pre-navigation check. Other directives that check javascript: URLs
       will operate on the modified URL later, in the <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-inline-check" id="ref-for-directive-inline-check">inline check</a>.</p>
    <li data-md>
     <p>Return <code>"Allowed"</code>.</p>
   </ol>
   <h4 class="heading settled" data-level="4.3.2" id="trusted-types-csp-directive"><span class="secno">4.3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="trusted-types-directive" id="trusted-types-directive">trusted-types</dfn> directive</span><a class="self-link" href="#trusted-types-csp-directive"></a></h4>
   <p>This document defines <em>trusted-types</em> - a new <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives" id="ref-for-directives①">Content Security Policy directive</a>. The <a data-link-type="dfn" href="#trusted-types-directive" id="ref-for-trusted-types-directive②">trusted-types</a> directive controls the creation of Trusted Type <a data-link-type="dfn" href="#policies" id="ref-for-policies⑤">policies</a>.</p>
   <p>The syntax for the directive’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-name" id="ref-for-directive-name①">name</a> and <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-value" id="ref-for-directive-value①">value</a> is described by the following
ABNF:</p>
<pre>directive-name = "trusted-types"
directive-value = <a data-link-type="dfn" href="#serialized-tt-configuration" id="ref-for-serialized-tt-configuration">serialized-tt-configuration</a>
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialized-tt-configuration">serialized-tt-configuration</dfn> = ( <a data-link-type="dfn" href="#tt-expression" id="ref-for-tt-expression">tt-expression</a> *( <a href="https://w3c.github.io/webappsec-csp/#grammardef-required-ascii-whitespace">required-ascii-whitespace</a> <a data-link-type="dfn" href="#tt-expression" id="ref-for-tt-expression①">tt-expression</a> ) )
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="tt-expression">tt-expression</dfn> = <a data-link-type="dfn" href="#tt-policy-name" id="ref-for-tt-policy-name">tt-policy-name</a>  / <a data-link-type="dfn" href="#tt-keyword" id="ref-for-tt-keyword">tt-keyword</a> / <a data-link-type="dfn" href="#tt-wildcard" id="ref-for-tt-wildcard">tt-wildcard</a>
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="tt-wildcard">tt-wildcard</dfn> = "*"
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="tt-policy-name">tt-policy-name</dfn> = 1*( <a href="https://tools.ietf.org/html/rfc5234#appendix-B.1">ALPHA</a> / <a href="https://tools.ietf.org/html/rfc5234#appendix-B.1">DIGIT</a> / "-" / "#" / "=" / "_" / "/" / "@" / "." / "%")
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="tt-keyword">tt-keyword</dfn> = "'allow-duplicates'" / "'none'"
</pre>
   <div class="example" id="allowlist-of-policy-names-in-header">
    <a class="self-link" href="#allowlist-of-policy-names-in-header"></a>
Types are enforced at sinks, and only two policies may be created: “one” and “two”.


<pre class="http">Content-Security-Policy: require-trusted-types-for 'script'; trusted-types one two
</pre>
   </div>
   <div class="example" id="header-that-allows-no-policy-names">
    <a class="self-link" href="#header-that-allows-no-policy-names"></a>
An empty <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives" id="ref-for-directives②">directive</a> <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-value" id="ref-for-directive-value②">value</a> indicates policies may not be created,
and sinks expect Trusted Type values, i.e. no DOM XSS <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②③">injection sinks</a> can be used
at all.

<pre class="http">Content-Security-Policy: trusted-types; require-trusted-types-for 'script'
</pre>
   </div>
   <p>The keyword <code>'none'</code> may be used to explicitly express the above:</p>
   <div class="example" id="header-with-none-that-allows-no-policy-names">
    <a class="self-link" href="#header-with-none-that-allows-no-policy-names"></a>

<pre class="http">Content-Security-Policy: trusted-types 'none'; require-trusted-types-for 'script'
</pre>
   </div>
   <p>Keyword <code>'allow-duplicates'</code> allows for creating policies with a name that was already used.</p>
   <div class="example" id="allow-duplicates-in-header">
    <a class="self-link" href="#allow-duplicates-in-header"></a>

<pre class="http">Content-Security-Policy: trusted-types foo bar 'allow-duplicates'
</pre>
   </div>
   <p>If the policy named <code>default</code> is present in the list, it refers to the <a data-link-type="dfn" href="#trustedtypepolicyfactory-default-policy" id="ref-for-trustedtypepolicyfactory-default-policy④">default policy</a>.
All strings passed to <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②④">injection sinks</a> will be passed through it instead of being rejected outright.</p>
   <div class="example" id="default-in-header">
    <a class="self-link" href="#default-in-header"></a>

<pre class="http">Content-Security-Policy: trusted-types one two default
</pre>
   </div>
   <h4 class="heading settled" data-level="4.3.3" id="does-sink-require-trusted-types"><span class="secno">4.3.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-does-sink-type-require-trusted-types">Does sink type require trusted types?</dfn></span><a class="self-link" href="#does-sink-require-trusted-types"></a></h4>
   <p>Given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③">global object</a> (<var>global</var>), a string (<var>sinkGroup</var>) and a boolean (<var>includeReportOnlyPolicies</var>), this algorithm
returns <code>true</code> if the <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②⑤">injection sink</a> requires a <a data-link-type="dfn" href="#trusted-type" id="ref-for-trusted-type⑤">Trusted Type</a>, and <code>false</code> otherwise.</p>
   <ol>
    <li data-md>
     <p>For each <var>policy</var> in <var>global</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#global-object-csp-list" id="ref-for-global-object-csp-list">CSP list</a>:</p>
     <ol>
      <li data-md>
       <p>If <var>policy</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#policy-directive-set" id="ref-for-policy-directive-set">directive set</a> does not contain a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives" id="ref-for-directives③">directive</a>
whose <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-name" id="ref-for-directive-name②">name</a> is <code>"require-trusted-types-for"</code>, skip to the next <var>policy</var>.</p>
      <li data-md>
       <p>Let <var>directive</var> be the <var>policy</var>’s <var>directive set</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives" id="ref-for-directives④">directive</a> whose name
is <code>"require-trusted-types-for"</code></p>
      <li data-md>
       <p>If <var>directive</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-value" id="ref-for-directive-value③">value</a> does not contain a <a data-link-type="dfn" href="#trusted-types-sink-group" id="ref-for-trusted-types-sink-group③">trusted-types-sink-group</a> which is a match
for <var>sinkGroup</var>, skip to the next <var>policy</var>.</p>
      <li data-md>
       <p>Let <var>enforced</var> be true if <var>policy</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#policy-disposition" id="ref-for-policy-disposition">disposition</a> is <code>"enforce"</code>, and false otherwise.</p>
      <li data-md>
       <p>If <var>enforced</var> is true, return true.</p>
      <li data-md>
       <p>If <var>includeReportOnlyPolicies</var> is true, return true.</p>
     </ol>
    <li data-md>
     <p>Return false.</p>
   </ol>
   <h4 class="heading settled" data-level="4.3.4" id="should-block-sink-type-mismatch"><span class="secno">4.3.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-should-sink-type-mismatch-violation-be-blocked-by-content-security-policy">Should sink type mismatch violation be blocked by Content Security Policy?</dfn></span><a class="self-link" href="#should-block-sink-type-mismatch"></a></h4>
   <p>Given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global④">global object</a> (<var>global</var>), a string (<var>sink</var>), a string (<var>sinkGroup</var>) and a string (<var>source</var>) this algorithm
returns <code>"Blocked"</code> if the <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②⑥">injection sink</a> requires a <a data-link-type="dfn" href="#trusted-type" id="ref-for-trusted-type⑥">Trusted Type</a>, and
<code>"Allowed"</code> otherwise.</p>
   <ol>
    <li data-md>
     <p>Let <var>result</var> be <code>"Allowed"</code>.</p>
    <li data-md>
     <p>Let <var>sample</var> be <var>source</var>.</p>
    <li data-md>
     <p>If <var>sink</var> is <code>"Function"</code>, then:</p>
     <ol>
      <li data-md>
       <p>If <var>sample</var> starts with <code>"function anonymous"</code>, strip that from <var>sample</var>.</p>
      <li data-md>
       <p>Otherwise if <var>sample</var> starts with <code>"async function anonymous"</code>, strip that from <var>sample</var>.</p>
      <li data-md>
       <p>Otherwise if <var>sample</var> starts with <code>"function* anonymous"</code>, strip that from <var>sample</var>.</p>
      <li data-md>
       <p>Otherwise if <var>sample</var> starts with <code>"async function* anonymous"</code>, strip that from <var>sample</var>.</p>
     </ol>
    <li data-md>
     <p>For each <var>policy</var> in <var>global</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#global-object-csp-list" id="ref-for-global-object-csp-list①">CSP list</a>:</p>
     <ol>
      <li data-md>
       <p>If <var>policy</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#policy-directive-set" id="ref-for-policy-directive-set①">directive set</a> does not contain a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives" id="ref-for-directives⑤">directive</a>
whose <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-name" id="ref-for-directive-name③">name</a> is <code>"require-trusted-types-for"</code>, skip to the next <var>policy</var>.</p>
      <li data-md>
       <p>Let <var>directive</var> be the <var>policy</var>’s <var>directive set</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives" id="ref-for-directives⑥">directive</a> whose name
is <code>"require-trusted-types-for"</code></p>
      <li data-md>
       <p>If <var>directive</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-value" id="ref-for-directive-value④">value</a> does not contain a <a data-link-type="dfn" href="#trusted-types-sink-group" id="ref-for-trusted-types-sink-group④">trusted-types-sink-group</a> which is a match
for <var>sinkGroup</var>, skip to the next <var>policy</var>.</p>
      <li data-md>
       <p>Let <var>violation</var> be the result of executing
<a href="https://w3c.github.io/webappsec-csp/#create-violation-for-global">Create a violation object for global, policy, and directive</a>
on <var>global</var>, <var>policy</var> and <code>"require-trusted-types-for"</code></p>
      <li data-md>
       <p>Set <var>violation</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#violation-resource" id="ref-for-violation-resource">resource</a> to <code>"trusted-types-sink"</code>.</p>
      <li data-md>
       <p>Let <var>trimmedSample</var> be the substring of <var>sample</var>, containing its first 40 characters.</p>
      <li data-md>
       <p>Set <var>violation</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#violation-sample" id="ref-for-violation-sample">sample</a> to be the result of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate" id="ref-for-string-concatenate">concatenating</a> the list « <var>sink</var>, <var>trimmedSample</var> « using <code>"|"</code> as a separator.</p>
      <li data-md>
       <p>Execute <a href="https://w3c.github.io/webappsec-csp/#report-violation">Report a violation</a> on <var>violation</var>.</p>
      <li data-md>
       <p>If <var>policy</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#policy-disposition" id="ref-for-policy-disposition①">disposition</a> is <code>"enforce"</code>, then set <var>result</var> to
<code>"Blocked"</code>.</p>
     </ol>
    <li data-md>
     <p>Return <var>result</var>.</p>
   </ol>
   <h4 class="heading settled" data-level="4.3.5" id="should-block-create-policy"><span class="secno">4.3.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="abstract-opdef-should-trusted-type-policy-creation-be-blocked-by-content-security-policy">Should Trusted Type policy creation be blocked by Content Security Policy?</dfn></span><a class="self-link" href="#should-block-create-policy"></a></h4>
   <p>Given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global⑤">global object</a> (<var>global</var>), a string (<var>policyName</var>) and a list of
strings (<var>createdPolicyNames</var>), this algorithm returns <code>"Blocked"</code> if the
<code class="idl"><a data-link-type="idl" href="#trustedtypepolicy" id="ref-for-trustedtypepolicy①④">TrustedTypePolicy</a></code> should not be created, and <code>"Allowed"</code> otherwise.</p>
   <ol>
    <li data-md>
     <p>Let <var>result</var> be <code>"Allowed"</code>.</p>
    <li data-md>
     <p>For each <var>policy</var> in <var>global</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#global-object-csp-list" id="ref-for-global-object-csp-list②">CSP list</a>:</p>
     <ol>
      <li data-md>
       <p>Let <var>createViolation</var> be false.</p>
      <li data-md>
       <p>If <var>policy</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#policy-directive-set" id="ref-for-policy-directive-set②">directive set</a> does not contain a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives" id="ref-for-directives⑦">directive</a>
which name is <code>"trusted-types"</code>, skip to the next <var>policy</var>.</p>
      <li data-md>
       <p>Let <var>directive</var> be the <var>policy</var>’s <var>directive set</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives" id="ref-for-directives⑧">directive</a> which name
is <code>"trusted-types"</code></p>
      <li data-md>
       <p>If <var>directive</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-value" id="ref-for-directive-value⑤">value</a> only contains a <a data-link-type="dfn" href="#tt-keyword" id="ref-for-tt-keyword①">tt-keyword</a> which
is a match for a value <code>'none'</code>, set <var>createViolation</var> to true.</p>
       <p class="note" role="note"><span class="marker">Note:</span> Like in other CSP directives, 'none' keyword will be ignored if other keywords or policy names are present.</p>
      <li data-md>
       <p>If <var>createdPolicyNames</var> contains <var>policyName</var> and <var>directive</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-value" id="ref-for-directive-value⑥">value</a> does not contain a <a data-link-type="dfn" href="#tt-keyword" id="ref-for-tt-keyword②">tt-keyword</a> which is a match
for a value <code>'allow-duplicates'</code>, set <var>createViolation</var> to true.</p>
       <p class="note" role="note"><span class="marker">Note:</span> <code>trusted-types policyA policyB 'allow-duplicates'</code> allows authors to create policies with
duplicated names.</p>
      <li data-md>
       <p>If <var>directive</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-value" id="ref-for-directive-value⑦">value</a> does not contain a <a data-link-type="dfn" href="#tt-policy-name" id="ref-for-tt-policy-name①">tt-policy-name</a>,
which value is <var>policyName</var>, and <var>directive</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directive-value" id="ref-for-directive-value⑧">value</a> does not contain a <a data-link-type="dfn" href="#tt-wildcard" id="ref-for-tt-wildcard①">tt-wildcard</a>, set <var>createViolation</var> to true.</p>
       <p class="note" role="note"><span class="marker">Note:</span> <code>trusted-types *</code> allows authors to create policies with any unique names. To allow for multiple policies with the same name, use
<code>trusted-types * 'allow-duplicates'</code> or don’t set the <code>trusted-types</code> directive at all.</p>
      <li data-md>
       <p>If <var>createViolation</var> is false, skip to the next <var>policy</var>.</p>
      <li data-md>
       <p>Let <var>violation</var> be the result of executing
<a href="https://w3c.github.io/webappsec-csp/#create-violation-for-global">Create a violation object for global, policy, and directive</a> on <var>global</var>, <var>policy</var> and
<code>"trusted-types"</code></p>
      <li data-md>
       <p>Set <var>violation</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#violation-resource" id="ref-for-violation-resource①">resource</a> to <code>"trusted-types-policy"</code>.</p>
      <li data-md>
       <p>Set <var>violation</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#violation-sample" id="ref-for-violation-sample①">sample</a> to the substring of <var>policyName</var>, containing its first 40 characters.</p>
      <li data-md>
       <p>Execute <a href="https://w3c.github.io/webappsec-csp/#report-violation">Report a violation</a> on <var>violation</var>.</p>
      <li data-md>
       <p>If <var>policy</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#policy-disposition" id="ref-for-policy-disposition②">disposition</a> is <code>"enforce"</code>, then set <var>result</var> to
<code>"Blocked"</code>.</p>
     </ol>
    <li data-md>
     <p>Return <var>result</var>.</p>
   </ol>
   <h2 class="heading settled" data-level="5" id="security-considerations"><span class="secno">5. </span><span class="content">Security Considerations</span><a class="self-link" href="#security-considerations"></a></h2>
   <p>Trusted Types are not intended to protect access to <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②⑦">injection sinks</a> in an
actively malicious execution environment. It’s assumed that the application is
written by non-malicious authors; the intent is to prevent developer mistakes
that could result in security bugs, and not to defend against first-party
malicious code actively trying to bypass policy restrictions. Below we enumerate
already identified vectors that remain risky even in environments with enforced
Trusted Types.</p>
   <h3 class="heading settled" data-level="5.1" id="cross-document-vectors"><span class="secno">5.1. </span><span class="content">Cross-document vectors</span><a class="self-link" href="#cross-document-vectors"></a></h3>
   <p>While the code running in a window in which Trusted Types are enforced cannot
dynamically create nodes that would bypass the policy restrictions, it is
possible that such nodes can be imported or adopted from documents in other
windows, that don’t have the same set of restrictions. In essence - it is
possible to bypass Trusted Types if a malicious author creates a setup in which
a restricted document colludes with an unrestricted one. In an extreme case, the
restricted document might create a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob">Blob</a></code> from strings and navigate to it.</p>
   <p>CSP propagation rules (see <a href="https://w3c.github.io/webappsec-csp/#security-inherit-csp"><cite>Content Security Policy 3</cite> § 7.8 CSP Inheriting to avoid bypasses</a> partially address this
issue, as new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#local-scheme" id="ref-for-local-scheme">local scheme</a> documents will inherit the same set of restrictions,
so - for example -  <code>script-src</code> restrictions could be used to make sure injections
into <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob①">Blob</a></code> contents would not execute scripts. To address this issue
comprehensively, other mechanisms like <a href="https://wicg.github.io/origin-policy/">Origin Policy</a>
should be used to ensure that baseline security rules are applied for the whole
origin.</p>
   <h3 class="heading settled" data-level="5.2" id="deprecated-features"><span class="secno">5.2. </span><span class="content">Deprecated features</span><a class="self-link" href="#deprecated-features"></a></h3>
   <p>Some long-deprecated and rarely used platform features are not subject to Trusted
Types, and could potentially be used by malicious authors to overcome the
restrictions:</p>
   <ul>
    <li data-md>
     <p><a href="https://wicg.github.io/webcomponents/spec/imports/">HTML imports</a></p>
   </ul>
   <h3 class="heading settled" data-level="5.3" id="script-gadgets"><span class="secno">5.3. </span><span class="content">Script gadgets</span><a class="self-link" href="#script-gadgets"></a></h3>
   <p>While Trusted Types logic is called on many operations that results in creating
DOM trees from string, it should not be treated as a mechanism for guarding all
DOM tree creation in a document. This is important especially in the presence of
<a href="https://github.com/google/security-research-pocs/tree/master/script-gadgets">script gadgets</a>,
where an application reacts to contents of usually benign DOM elements or attributes.
Developers using DOM API directly can trigger such gadgets without using
Trusted Types. However, in order for the gadget to trigger DOM XSS, it needs to
obtain a Trusted Type value via a policy. Authors need to ascertain that the data
passed to Trusted Type policies is indeed trustworthy, if the policy rules don’t
enforce constraints or validate the data themselves.</p>
   <h3 class="heading settled" data-level="5.4" id="best-practices-for-policy-design"><span class="secno">5.4. </span><span class="content">Best practices for policy design</span><a class="self-link" href="#best-practices-for-policy-design"></a></h3>
   <p>Trusted Types limit the scope of the code that can introduce
vulnerabilities via <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②⑧">injection sinks</a> to the implementation of <a data-link-type="dfn" href="#policies" id="ref-for-policies⑥">policies</a>.
In this design, insecure policies can still expose <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink②⑨">injection sinks</a> to untrusted data.
Special emphasis needs to be taken by use policies that are either secure for all
possible inputs, or limit the access to insecure policies, such that they are only
called with non-attacker controlled inputs.</p>
   <p>As policies are custom JavaScript code, they may be written in a way that heavily
depends on a global state. We advise against this. The policies should
be self-contained as much as possible. All objects that may alter security decisions
a policy makes effectively <em>become</em> the policy, and should be guarded &amp; reviewed
together.</p>
   <p class="issue" id="issue-2eb927d2"><a class="self-link" href="#issue-2eb927d2"></a> Refer to the external document on secure policy design.</p>
   <h2 class="heading settled" data-level="6" id="privacy-considerations"><span class="secno">6. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy-considerations"></a></h2>
   <p>The specification may partially observe and alter the behavior of scripts running
within the application, e.g. causing certain operations on <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink③⓪">injection sinks</a>
to fail, or monitoring and changing their effect with a <a data-link-type="dfn" href="#trustedtypepolicyfactory-default-policy" id="ref-for-trustedtypepolicyfactory-default-policy⑤">default policy</a>.
However, early-running scripts already have this capability by overriding
appropriate property descriptors.</p>
   <p>It is possible for the application to report violations of Trusted Types
restrictions. Violation reports would include the trimmed-down payload passed to
the injection sink (40 characters, including the sink name). These feature is
reusing the Content Security Policy reporting mechanisms.</p>
   <h2 class="heading settled" data-level="7" id="implementation-considerations"><span class="secno">7. </span><span class="content">Implementation Considerations</span><a class="self-link" href="#implementation-considerations"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="vendor-specific-extensions-and-addons"><span class="secno">7.1. </span><span class="content">Vendor-specific Extensions and Addons</span><a class="self-link" href="#vendor-specific-extensions-and-addons"></a></h3>
   <p>Restriction imposed by Trusted Types SHOULD
NOT interfere with the operation of user-agent features like addons,
extensions, or bookmarklets. These kinds of features generally advance
the user’s priority over page authors, as espoused in
<a data-link-type="biblio" href="#biblio-html-design-principles" title="HTML Design Principles">[html-design-principles]</a>. Specifically, extensions SHOULD be able to pass strings
to the <a data-link-type="dfn" href="#injection-sink" id="ref-for-injection-sink③①">injection sinks</a> without triggering <a data-link-type="dfn" href="#trustedtypepolicyfactory-default-policy" id="ref-for-trustedtypepolicyfactory-default-policy⑥">default policy</a>
execution, violation generation, or the rejection of the value.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification.

    </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a>

    </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this:

    </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a>
        
    <p>This is an example of an informative example.
    </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this:

    </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <details class="wpt-tests-block" dir="ltr" lang="en" open>
    <summary>Tests</summary>
    <p>Tests relating to the content of this specification
                     may be documented in “Tests” blocks like this one.
                     Any such block is non-normative.</p>
    <ul class="wpt-tests-list"></ul>
    <hr>
   </details>
   <section>
    <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
    <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm.

    </p>
    <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize.
</p>
   </section>
  </div>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#abstract-opdef-create-a-trusted-type">Create a Trusted Type</a><span>, in § 3.2</span>
   <li><a href="#abstract-opdef-create-a-trusted-type-policy">Create a Trusted Type Policy</a><span>, in § 3.1</span>
   <li><a href="#trustedtypepolicyfactory-created-policy-names">created policy names</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyoptions-createhtml">createHTML</a><span>, in § 2.3.3</span>
   <li><a href="#callbackdef-createhtmlcallback">CreateHTMLCallback</a><span>, in § 2.3.3</span>
   <li><a href="#dom-trustedtypepolicy-createhtml">createHTML(input)</a><span>, in § 2.3.2</span>
   <li><a href="#dom-trustedtypepolicy-createhtml">createHTML(input, ...arguments)</a><span>, in § 2.3.2</span>
   <li><a href="#dom-trustedtypepolicyfactory-createpolicy">createPolicy(policyName)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyfactory-createpolicy">createPolicy(policyName, policyOptions)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyoptions-createscript">createScript</a><span>, in § 2.3.3</span>
   <li><a href="#callbackdef-createscriptcallback">CreateScriptCallback</a><span>, in § 2.3.3</span>
   <li><a href="#dom-trustedtypepolicy-createscript">createScript(input)</a><span>, in § 2.3.2</span>
   <li><a href="#dom-trustedtypepolicy-createscript">createScript(input, ...arguments)</a><span>, in § 2.3.2</span>
   <li><a href="#dom-trustedtypepolicyoptions-createscripturl">createScriptURL</a><span>, in § 2.3.3</span>
   <li><a href="#callbackdef-createscripturlcallback">CreateScriptURLCallback</a><span>, in § 2.3.3</span>
   <li><a href="#dom-trustedtypepolicy-createscripturl">createScriptURL(input)</a><span>, in § 2.3.2</span>
   <li><a href="#dom-trustedtypepolicy-createscripturl">createScriptURL(input, ...arguments)</a><span>, in § 2.3.2</span>
   <li>
    data
    <ul>
     <li><a href="#trustedhtml-data">dfn for TrustedHTML</a><span>, in § 2.2.1</span>
     <li><a href="#trustedscript-data">dfn for TrustedScript</a><span>, in § 2.2.2</span>
     <li><a href="#trustedscripturl-data">dfn for TrustedScriptURL</a><span>, in § 2.2.3</span>
    </ul>
   <li><a href="#trustedtypepolicyfactory-default-policy">default policy</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyfactory-defaultpolicy">defaultPolicy</a><span>, in § 2.3.1</span>
   <li><a href="#default-policy-explanation">default-policy-explanation</a><span>, in § 2.3.4</span>
   <li><a href="#abstract-opdef-does-sink-type-require-trusted-types">Does sink type require trusted types?</a><span>, in § 4.3.3</span>
   <li><a href="#dom-trustedtypepolicyfactory-emptyhtml">emptyHTML</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyfactory-emptyscript">emptyScript</a><span>, in § 2.3.1</span>
   <li><a href="#enforcement">Enforcement</a><span>, in § 2.4</span>
   <li><a href="#dom-trustedtypepolicyfactory-getattributetype">getAttributeType(tagName, attribute)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyfactory-getattributetype">getAttributeType(tagName, attribute, elementNs)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyfactory-getattributetype">getAttributeType(tagName, attribute, elementNs, attrNs)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyfactory-getpropertytype">getPropertyType(tagName, property)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyfactory-getpropertytype">getPropertyType(tagName, property, elementNs)</a><span>, in § 2.3.1</span>
   <li><a href="#abstract-opdef-get-trusted-type-compliant-string">Get Trusted Type compliant string</a><span>, in § 3.4</span>
   <li><a href="#abstract-opdef-get-trusted-type-data-for-attribute">Get Trusted Type data for attribute</a><span>, in § 3.8</span>
   <li><a href="#abstract-opdef-get-trusted-type-policy-value">Get Trusted Type policy value</a><span>, in § 3.3</span>
   <li><a href="#abstract-opdef-get-trusted-types-compliant-attribute-value">get Trusted Types-compliant attribute value</a><span>, in § 3.7</span>
   <li><a href="#injection-sink">injection sink</a><span>, in § 2.1</span>
   <li><a href="#dom-htmlscriptelement-innertext">innerText</a><span>, in § 4.1.2</span>
   <li><a href="#dom-trustedtypepolicyfactory-ishtml">isHTML(value)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyfactory-isscripturl">isScriptURL(value)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-trustedtypepolicyfactory-isscript">isScript(value)</a><span>, in § 2.3.1</span>
   <li>
    name
    <ul>
     <li><a href="#dom-trustedtypepolicy-name">attribute for TrustedTypePolicy</a><span>, in § 2.3.2</span>
     <li><a href="#trustedtypepolicy-name">dfn for TrustedTypePolicy</a><span>, in § 2.3.2</span>
    </ul>
   <li><a href="#trustedtypepolicy-options">options</a><span>, in § 2.3.2</span>
   <li><a href="#policies">Policies</a><span>, in § 2.3</span>
   <li><a href="#abstract-opdef-prepare-the-script-text">Prepare the script text</a><span>, in § 3.6</span>
   <li><a href="#abstract-opdef-process-value-with-a-default-policy">Process value with a default policy</a><span>, in § 3.5</span>
   <li><a href="#require-trusted-types-for-directive">require-trusted-types-for-directive</a><span>, in § 4.3.1</span>
   <li><a href="#htmlscriptelement-script-text">script text</a><span>, in § 4.1.2.1</span>
   <li><a href="#serialized-tt-configuration">serialized-tt-configuration</a><span>, in § 4.3.2</span>
   <li><a href="#abstract-opdef-should-sink-type-mismatch-violation-be-blocked-by-content-security-policy">Should sink type mismatch violation be blocked by Content Security Policy?</a><span>, in § 4.3.4</span>
   <li><a href="#abstract-opdef-should-trusted-type-policy-creation-be-blocked-by-content-security-policy">Should Trusted Type policy creation be blocked by Content Security Policy?</a><span>, in § 4.3.5</span>
   <li><a href="#dom-htmlscriptelement-src">src</a><span>, in § 4.1.2</span>
   <li>
    stringificationbehavior
    <ul>
     <li><a href="#trustedhtml-stringification-behavior">dfn for TrustedHTML</a><span>, in § 2.2.1</span>
     <li><a href="#trustedscript-stringification-behavior">dfn for TrustedScript</a><span>, in § 2.2.2</span>
     <li><a href="#trustedscripturl-stringification-behavior">dfn for TrustedScriptURL</a><span>, in § 2.2.3</span>
    </ul>
   <li><a href="#dom-htmlscriptelement-text">text</a><span>, in § 4.1.2</span>
   <li><a href="#dom-htmlscriptelement-textcontent">textContent</a><span>, in § 4.1.2</span>
   <li>
    toJSON()
    <ul>
     <li><a href="#dom-trustedhtml-tojson">method for TrustedHTML</a><span>, in § 2.2.1</span>
     <li><a href="#dom-trustedscript-tojson">method for TrustedScript</a><span>, in § 2.2.2</span>
     <li><a href="#dom-trustedscripturl-tojson">method for TrustedScriptURL</a><span>, in § 2.2.3</span>
    </ul>
   <li><a href="#trustedhtml">TrustedHTML</a><span>, in § 2.2.1</span>
   <li><a href="#trustedscript">TrustedScript</a><span>, in § 2.2.2</span>
   <li><a href="#trustedscripturl">TrustedScriptURL</a><span>, in § 2.2.3</span>
   <li><a href="#trusted-type">Trusted Type</a><span>, in § 2.2</span>
   <li><a href="#typedefdef-trustedtype">TrustedType</a><span>, in § 4</span>
   <li><a href="#trustedtypepolicy">TrustedTypePolicy</a><span>, in § 2.3.2</span>
   <li><a href="#window-trusted-type-policy-factory">trusted type policy factory</a><span>, in § 4.1</span>
   <li><a href="#trustedtypepolicyfactory">TrustedTypePolicyFactory</a><span>, in § 2.3.1</span>
   <li><a href="#dictdef-trustedtypepolicyoptions">TrustedTypePolicyOptions</a><span>, in § 2.3.3</span>
   <li><a href="#dom-windoworworkerglobalscope-trustedtypes">trustedTypes</a><span>, in § 4.1.1</span>
   <li><a href="#trusted-types-directive">trusted-types-directive</a><span>, in § 4.3.2</span>
   <li><a href="#trusted-types-sink-group">trusted-types-sink-group</a><span>, in § 4.3.1</span>
   <li><a href="#trusted-types-sink-group-keyword">trusted-types-sink-group-keyword</a><span>, in § 4.3.1</span>
   <li><a href="#tt-expression">tt-expression</a><span>, in § 4.3.2</span>
   <li><a href="#tt-keyword">tt-keyword</a><span>, in § 4.3.2</span>
   <li><a href="#tt-policy-name">tt-policy-name</a><span>, in § 4.3.2</span>
   <li><a href="#tt-wildcard">tt-wildcard</a><span>, in § 4.3.2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSP3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="579a2f63">content security policy object</span>
     <li><span class="dfn-paneled" id="bb8563cb">Content-Security-Policy-Report-Only</span>
     <li><span class="dfn-paneled" id="138270ef">CSP list</span>
     <li><span class="dfn-paneled" id="3d7ed2c2">directive set</span>
     <li><span class="dfn-paneled" id="c80aa797">directives</span>
     <li><span class="dfn-paneled" id="4582ec82">disposition</span>
     <li><span class="dfn-paneled" id="e9ecb998">inline check</span>
     <li><span class="dfn-paneled" id="51218496">name</span>
     <li><span class="dfn-paneled" id="5c117fdd">pre-navigation check</span>
     <li><span class="dfn-paneled" id="24a8eb94">resource</span>
     <li><span class="dfn-paneled" id="dec095e6">sample</span>
     <li><span class="dfn-paneled" id="9e196595">script-src</span>
     <li><span class="dfn-paneled" id="461b765a">value</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="99573380">Attr</span>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="296f3551">Element</span>
     <li><span class="dfn-paneled" id="631f76db">child text content</span>
     <li><span class="dfn-paneled" id="f20f4175">element interface</span>
     <li><span class="dfn-paneled" id="e02495ec">element namespace</span>
     <li><span class="dfn-paneled" id="e1f8b538">get text content</span>
     <li><span class="dfn-paneled" id="e240317a">local name</span>
     <li><span class="dfn-paneled" id="b3955a25">namespace</span>
     <li><span class="dfn-paneled" id="5216e1a0">node document</span>
     <li><span class="dfn-paneled" id="9e1b2fe2">set text content</span>
     <li><span class="dfn-paneled" id="5dbae2b0">string replace all</span>
     <li><span class="dfn-paneled" id="421cd2a4">textContent</span>
    </ul>
   <li>
    <a data-link-type="biblio">[Fetch]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="857d5516">client</span>
     <li><span class="dfn-paneled" id="63340982">local scheme</span>
     <li><span class="dfn-paneled" id="55213b5b">request</span>
     <li><span class="dfn-paneled" id="dc1cd39b">URL</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FileAPI]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b7d73f5b">Blob</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="402ed79d">CEReactions</span>
     <li><span class="dfn-paneled" id="10e25f42">HTMLIFrameElement</span>
     <li><span class="dfn-paneled" id="ec4838d8">HTMLScriptElement</span>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="5f6d392d">WindowOrWorkerGlobalScope</span>
     <li><span class="dfn-paneled" id="bfc1c271">Worker</span>
     <li><span class="dfn-paneled" id="8d48cf32">event handler content attribute</span>
     <li><span class="dfn-paneled" id="40ed6102">get the text steps</span>
     <li><span class="dfn-paneled" id="8a30477b">global object <small>(for environment settings object)</small></span>
     <li><span class="dfn-paneled" id="168f1b6e">global object <small>(for realm)</small></span>
     <li><span class="dfn-paneled" id="d4127354">innerHTML <small>(for Element)</small></span>
     <li><span class="dfn-paneled" id="ef8bdfad">innerHTML <small>(for ShadowRoot)</small></span>
     <li><span class="dfn-paneled" id="a264b960">innerText</span>
     <li><span class="dfn-paneled" id="364094ea">outerHTML</span>
     <li><span class="dfn-paneled" id="b815ad04">parseFromString(string, type)</span>
     <li><span class="dfn-paneled" id="215d47ca">prepare the script element</span>
     <li><span class="dfn-paneled" id="b75a7d23">realm</span>
     <li><span class="dfn-paneled" id="e7762445">reentrant invocation of the parser</span>
     <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
     <li><span class="dfn-paneled" id="f7433a4f">set the inner text steps</span>
     <li><span class="dfn-paneled" id="ff5484a3">src</span>
     <li><span class="dfn-paneled" id="c62c4764">The text insertion mode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a3b18719">append</span>
     <li><span class="dfn-paneled" id="6f2dfa22">ASCII lowercase</span>
     <li><span class="dfn-paneled" id="77b4c09a">assert</span>
     <li><span class="dfn-paneled" id="4a3bf5fb">concatenate</span>
     <li><span class="dfn-paneled" id="f052b1ea">HTML namespace</span>
     <li><span class="dfn-paneled" id="c885c5c1">list contain</span>
     <li><span class="dfn-paneled" id="ead425bd">MathML namespace</span>
     <li><span class="dfn-paneled" id="692595fe">ordered set</span>
     <li><span class="dfn-paneled" id="85a289c7">SVG namespace</span>
     <li><span class="dfn-paneled" id="e19f3699">XLink namespace</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SVG2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d347f2e7">SVGScriptElement</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="3a711be7">scheme</span>
     <li><span class="dfn-paneled" id="ca3ca4ae">URL parser</span>
     <li><span class="dfn-paneled" id="5442ea33">URL serializer</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="2c4af168">LegacyNullToEmptyString</span>
     <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
     <li><span class="dfn-paneled" id="6c6b1005">any</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-csp3">[CSP3]
   <dd>Mike West; Antonio Sartori. <a href="https://w3c.github.io/webappsec-csp/"><cite>Content Security Policy Level 3</cite></a>. URL: <a href="https://w3c.github.io/webappsec-csp/">https://w3c.github.io/webappsec-csp/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
   <dt id="biblio-fetch">[Fetch]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-fileapi">[FileAPI]
   <dd>Marijn Kruisselbrink. <a href="https://w3c.github.io/FileAPI/"><cite>File API</cite></a>. URL: <a href="https://w3c.github.io/FileAPI/">https://w3c.github.io/FileAPI/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-svg2">[SVG2]
   <dd>Amelia Bellamy-Royds; et al. <a href="https://svgwg.org/svg2-draft/"><cite>Scalable Vector Graphics (SVG) 2</cite></a>. URL: <a href="https://svgwg.org/svg2-draft/">https://svgwg.org/svg2-draft/</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-html-design-principles">[HTML-DESIGN-PRINCIPLES]
   <dd>Anne van Kesteren; Maciej Stachowiak. <a href="https://www.w3.org/TR/html-design-principles/"><cite>HTML Design Principles</cite></a>. 26 November 2007. WD. URL: <a href="https://www.w3.org/TR/html-design-principles/">https://www.w3.org/TR/html-design-principles/</a>
   <dt id="biblio-html5">[HTML5]
   <dd>Ian Hickson; et al. <a href="https://www.w3.org/TR/html5/"><cite>HTML5</cite></a>. 27 March 2018. REC. URL: <a href="https://www.w3.org/TR/html5/">https://www.w3.org/TR/html5/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> The <a data-link-type="dfn" href="https://html.spec.whatwg.org/#event-handler-content-attributes">event handler content attribute</a> concept used below is ambiguous. This spec needs a better mechanism to identify event handler attributes. See <a href="https://github.com/w3c/trusted-types/issues/520">https://github.com/w3c/trusted-types/issues/520</a>. <a class="issue-return" href="#issue-15b3006c" title="Jump to section">↵</a></div>
   <div class="issue"> The above algorithm doesn’t account for the case when the script element’s content is changed mid-parse. Implementors must ensure they protect against this case. See <a href="https://github.com/w3c/trusted-types/issues/507">https://github.com/w3c/trusted-types/issues/507</a>. <a class="issue-return" href="#issue-d6e90040" title="Jump to section">↵</a></div>
   <div class="issue"> There’s no proper definition for the processing of SVG script elements. However, implementations must apply a similar change to the processing of <code class="idl"><a data-link-type="idl" href="https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement">SVGScriptElement</a></code>s. <a class="issue-return" href="#issue-c38e8ff0" title="Jump to section">↵</a></div>
   <div class="issue"> There’s no proper definition for the processing of SVG script elements. However, implementations must apply a similar change to the processing of <code class="idl"><a data-link-type="idl" href="https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement">SVGScriptElement</a></code>s. <a class="issue-return" href="#issue-c38e8ff0①" title="Jump to section">↵</a></div>
   <div class="issue"> Refer to the external document on secure policy design. <a class="issue-return" href="#issue-2eb927d2" title="Jump to section">↵</a></div>
  </div>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedhtml-tojson">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedHTML/toJSON" title="The toJSON() method of the TrustedHTML interface returns a JSON representation of the stored data.">TrustedHTML/toJSON</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>90+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>90+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="trustedhtml-stringification-behavior">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedHTML/toString" title="The toString() method of the TrustedHTML interface returns a string which may safely inserted into an injection sink.">TrustedHTML/toString</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="trusted-html">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedHTML" title="The TrustedHTML interface of the Trusted Types API represents a string that a developer can insert into an injection sink that will render it as HTML. These objects are created via TrustedTypePolicy.createHTML() and therefore have no constructor.">TrustedHTML</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedscript-tojson">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedScript/toJSON" title="The toJSON() method of the TrustedScript interface returns a JSON representation of the stored data.">TrustedScript/toJSON</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>90+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>90+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="trustedscripturl-stringification-behavior">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedScript/toString" title="The toString() method of the TrustedScript interface returns a string which may safely inserted into an injection sink.">TrustedScript/toString</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedScriptURL/toString" title="The toString() method of the TrustedScriptURL interface returns a string which may safely inserted into an injection sink.">TrustedScriptURL/toString</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="trusted-script">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedScript" title="The TrustedScript interface of the Trusted Types API represents a string with an uncompiled script body that a developer can insert into an injection sink that might execute the script. These objects are created via TrustedTypePolicy.createScript() and therefore have no constructor.">TrustedScript</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedscripturl-tojson">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedScriptURL/toJSON" title="The toJSON() method of the TrustedScriptURL interface returns a JSON representation of the stored data.">TrustedScriptURL/toJSON</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>90+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>90+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="trused-script-url">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedScriptURL" title="The TrustedScriptURL interface of the Trusted Types API represents a string that a developer can insert into an injection sink that will parse it as a URL of an external script. These objects are created via TrustedTypePolicy.createScriptURL() and therefore have no constructor.">TrustedScriptURL</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicy-createhtml">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicy/createHTML" title="The createHTML() method of the TrustedTypePolicy interface creates a TrustedHTML object using a policy created by TrustedTypePolicyFactory.createPolicy().">TrustedTypePolicy/createHTML</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicy-createscript">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicy/createScript" title="The createScript() method of the TrustedTypePolicy interface creates a TrustedScript object using a policy created by TrustedTypePolicyFactory.createPolicy().">TrustedTypePolicy/createScript</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicy-createscripturl">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicy/createScriptURL" title="The createScriptURL() method of the TrustedTypePolicy interface creates a TrustedScriptURL object using a policy created by TrustedTypePolicyFactory.createPolicy().">TrustedTypePolicy/createScriptURL</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicy-name">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicy/name" title="The name read-only property of the TrustedTypePolicy interface returns the name of the policy.">TrustedTypePolicy/name</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="trusted-type-policy">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicy" title="The TrustedTypePolicy interface of the Trusted Types API defines a group of functions which create TrustedType objects.">TrustedTypePolicy</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicyfactory-createpolicy">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicyFactory/createPolicy" title="The createPolicy() method of the TrustedTypePolicyFactory interface creates a TrustedTypePolicy object that implements the rules passed as policyOptions.">TrustedTypePolicyFactory/createPolicy</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicyfactory-defaultpolicy">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicyFactory/defaultPolicy" title="The defaultPolicy read-only property of the TrustedTypePolicyFactory interface returns the default TrustedTypePolicy or null if this is empty.">TrustedTypePolicyFactory/defaultPolicy</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicyfactory-emptyhtml">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicyFactory/emptyHTML" title="The emptyHTML read-only property of the TrustedTypePolicyFactory interface returns a TrustedHTML object containing an empty string.">TrustedTypePolicyFactory/emptyHTML</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicyfactory-emptyscript">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicyFactory/emptyScript" title="The emptyScript read-only property of the TrustedTypePolicyFactory interface returns a TrustedScript object containing an empty string.">TrustedTypePolicyFactory/emptyScript</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicyfactory-getattributetype">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicyFactory/getAttributeType" title="The getAttributeType() method of the TrustedTypePolicyFactory interface allows web developers to check if a Trusted Type is required for an element, and if so which Trusted Type is used.">TrustedTypePolicyFactory/getAttributeType</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicyfactory-getpropertytype">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicyFactory/getPropertyType" title="The getPropertyType() method of the TrustedTypePolicyFactory interface allows web developers to check if a Trusted Type is required for an element&apos;s property.">TrustedTypePolicyFactory/getPropertyType</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicyfactory-ishtml">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicyFactory/isHTML" title="The isHTML() method of the TrustedTypePolicyFactory interface returns true if it is passed a valid TrustedHTML object.">TrustedTypePolicyFactory/isHTML</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicyfactory-isscript">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicyFactory/isScript" title="The isScript() method of the TrustedTypePolicyFactory interface returns true if it is passed a valid TrustedScript object.">TrustedTypePolicyFactory/isScript</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-trustedtypepolicyfactory-isscripturl">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicyFactory/isScriptURL" title="The isScriptURL() method of the TrustedTypePolicyFactory interface returns true if it is passed a valid TrustedScriptURL object.">TrustedTypePolicyFactory/isScriptURL</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="trusted-type-policy-factory">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicyFactory" title="The TrustedTypePolicyFactory interface of the Trusted Types API creates policies and allows the verification of Trusted Type objects against created policies.">TrustedTypePolicyFactory</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="require-trusted-types-for-csp-directive">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/require-trusted-types-for" title="The HTTP Content-Security-Policy (CSP) require-trusted-types-for Experimental directive instructs user agents to control the data passed to DOM XSS sink functions, like Element.innerHTML setter.">Headers/Content-Security-Policy/require-trusted-types-for</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="trusted-types-csp-directive">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/trusted-types" title="The HTTP Content-Security-Policy (CSP) trusted-types Experimental directive instructs user agents to restrict the creation of Trusted Types policies - functions that build non-spoofable, typed values intended to be passed to DOM XSS sinks in place of strings.">Headers/Content-Security-Policy/trusted-types</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>None</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"10e25f42": {"dfnID":"10e25f42","dfnText":"HTMLIFrameElement","external":true,"refSections":[{"refs":[{"id":"ref-for-htmliframeelement"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-htmliframeelement\u2460"}],"title":"3.8. Get Trusted Type data for attribute"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement"},
"138270ef": {"dfnID":"138270ef","dfnText":"CSP list","external":true,"refSections":[{"refs":[{"id":"ref-for-global-object-csp-list"}],"title":"4.3.3. Does sink type require trusted types?"},{"refs":[{"id":"ref-for-global-object-csp-list\u2460"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"},{"refs":[{"id":"ref-for-global-object-csp-list\u2461"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"https://w3c.github.io/webappsec-csp/#global-object-csp-list"},
"168f1b6e": {"dfnID":"168f1b6e","dfnText":"global object (for realm)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-realm-global"}],"title":"3.1. Create a Trusted Type Policy"},{"refs":[{"id":"ref-for-concept-realm-global\u2460"}],"title":"3.4. Get Trusted Type compliant string"},{"refs":[{"id":"ref-for-concept-realm-global\u2461"}],"title":"3.5. Process value with a default policy"},{"refs":[{"id":"ref-for-concept-realm-global\u2462"}],"title":"4.3.3. Does sink type require trusted types?"},{"refs":[{"id":"ref-for-concept-realm-global\u2463"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"},{"refs":[{"id":"ref-for-concept-realm-global\u2464"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global"},
"215d47ca": {"dfnID":"215d47ca","dfnText":"prepare the script element","external":true,"refSections":[{"refs":[{"id":"ref-for-prepare-the-script-element"}],"title":"4.1.2.7. Slot value verification"}],"url":"https://html.spec.whatwg.org/#prepare-the-script-element"},
"24a8eb94": {"dfnID":"24a8eb94","dfnText":"resource","external":true,"refSections":[{"refs":[{"id":"ref-for-violation-resource"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"},{"refs":[{"id":"ref-for-violation-resource\u2460"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"https://w3c.github.io/webappsec-csp/#violation-resource"},
"296f3551": {"dfnID":"296f3551","dfnText":"Element","external":true,"refSections":[{"refs":[{"id":"ref-for-element"},{"id":"ref-for-element\u2460"}],"title":"2.1.1. DOM XSS injection sinks"},{"refs":[{"id":"ref-for-element\u2461"},{"id":"ref-for-element\u2462"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-element\u2463"}],"title":"3.7. Get Trusted Types-compliant attribute value"},{"refs":[{"id":"ref-for-element\u2464"}],"title":"3.8. Get Trusted Type data for attribute"}],"url":"https://dom.spec.whatwg.org/#element"},
"2c4af168": {"dfnID":"2c4af168","dfnText":"LegacyNullToEmptyString","external":true,"refSections":[{"refs":[{"id":"ref-for-LegacyNullToEmptyString"}],"title":"4.1.2. Enforcement for scripts"}],"url":"https://webidl.spec.whatwg.org/#LegacyNullToEmptyString"},
"364094ea": {"dfnID":"364094ea","dfnText":"outerHTML","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-element-outerhtml"}],"title":"2.1.1. DOM XSS injection sinks"}],"url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-outerhtml"},
"3a711be7": {"dfnID":"3a711be7","dfnText":"scheme","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-scheme"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"https://url.spec.whatwg.org/#concept-url-scheme"},
"3d7ed2c2": {"dfnID":"3d7ed2c2","dfnText":"directive set","external":true,"refSections":[{"refs":[{"id":"ref-for-policy-directive-set"}],"title":"4.3.3. Does sink type require trusted types?"},{"refs":[{"id":"ref-for-policy-directive-set\u2460"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"},{"refs":[{"id":"ref-for-policy-directive-set\u2461"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"https://w3c.github.io/webappsec-csp/#policy-directive-set"},
"4013a022": {"dfnID":"4013a022","dfnText":"this","external":true,"refSections":[{"refs":[{"id":"ref-for-this"},{"id":"ref-for-this\u2460"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-this\u2461"},{"id":"ref-for-this\u2462"},{"id":"ref-for-this\u2463"}],"title":"2.3.2. TrustedTypePolicy"},{"refs":[{"id":"ref-for-this\u2464"}],"title":"4.1.1. Extensions to the WindowOrWorkerGlobalScope interface"},{"refs":[{"id":"ref-for-this\u2465"},{"id":"ref-for-this\u2466"},{"id":"ref-for-this\u2467"},{"id":"ref-for-this\u2468"}],"title":"4.1.2.2. The innerText IDL attribute"},{"refs":[{"id":"ref-for-this\u2460\u24ea"},{"id":"ref-for-this\u2460\u2460"},{"id":"ref-for-this\u2460\u2461"},{"id":"ref-for-this\u2460\u2462"}],"title":"4.1.2.3. The textContent IDL attribute"},{"refs":[{"id":"ref-for-this\u2460\u2463"},{"id":"ref-for-this\u2460\u2464"},{"id":"ref-for-this\u2460\u2465"}],"title":"4.1.2.4. The text IDL attribute"},{"refs":[{"id":"ref-for-this\u2460\u2466"},{"id":"ref-for-this\u2460\u2467"}],"title":"4.1.2.5. The src IDL attribute"}],"url":"https://webidl.spec.whatwg.org/#this"},
"402ed79d": {"dfnID":"402ed79d","dfnText":"CEReactions","external":true,"refSections":[{"refs":[{"id":"ref-for-cereactions"},{"id":"ref-for-cereactions\u2460"},{"id":"ref-for-cereactions\u2461"},{"id":"ref-for-cereactions\u2462"}],"title":"4.1.2. Enforcement for scripts"}],"url":"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"},
"40ed6102": {"dfnID":"40ed6102","dfnText":"get the text steps","external":true,"refSections":[{"refs":[{"id":"ref-for-get-the-text-steps"}],"title":"4.1.2.2. The innerText IDL attribute"}],"url":"https://html.spec.whatwg.org/#get-the-text-steps"},
"421cd2a4": {"dfnID":"421cd2a4","dfnText":"textContent","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-node-textcontent"}],"title":"4.1.2. Enforcement for scripts"}],"url":"https://dom.spec.whatwg.org/#dom-node-textcontent"},
"4582ec82": {"dfnID":"4582ec82","dfnText":"disposition","external":true,"refSections":[{"refs":[{"id":"ref-for-policy-disposition"}],"title":"4.3.3. Does sink type require trusted types?"},{"refs":[{"id":"ref-for-policy-disposition\u2460"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"},{"refs":[{"id":"ref-for-policy-disposition\u2461"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"https://w3c.github.io/webappsec-csp/#policy-disposition"},
"461b765a": {"dfnID":"461b765a","dfnText":"value","external":true,"refSections":[{"refs":[{"id":"ref-for-directive-value"}],"title":"4.3.1. require-trusted-types-for directive"},{"refs":[{"id":"ref-for-directive-value\u2460"},{"id":"ref-for-directive-value\u2461"}],"title":"4.3.2. trusted-types directive"},{"refs":[{"id":"ref-for-directive-value\u2462"}],"title":"4.3.3. Does sink type require trusted types?"},{"refs":[{"id":"ref-for-directive-value\u2463"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"},{"refs":[{"id":"ref-for-directive-value\u2464"},{"id":"ref-for-directive-value\u2465"},{"id":"ref-for-directive-value\u2466"},{"id":"ref-for-directive-value\u2467"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"https://w3c.github.io/webappsec-csp/#directive-value"},
"4a3bf5fb": {"dfnID":"4a3bf5fb","dfnText":"concatenate","external":true,"refSections":[{"refs":[{"id":"ref-for-string-concatenate"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"}],"url":"https://infra.spec.whatwg.org/#string-concatenate"},
"51218496": {"dfnID":"51218496","dfnText":"name","external":true,"refSections":[{"refs":[{"id":"ref-for-directive-name"}],"title":"4.3.1. require-trusted-types-for directive"},{"refs":[{"id":"ref-for-directive-name\u2460"}],"title":"4.3.2. trusted-types directive"},{"refs":[{"id":"ref-for-directive-name\u2461"}],"title":"4.3.3. Does sink type require trusted types?"},{"refs":[{"id":"ref-for-directive-name\u2462"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"}],"url":"https://w3c.github.io/webappsec-csp/#directive-name"},
"5216e1a0": {"dfnID":"5216e1a0","dfnText":"node document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-node-document"}],"title":"3.7. Get Trusted Types-compliant attribute value"}],"url":"https://dom.spec.whatwg.org/#concept-node-document"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"},{"id":"ref-for-idl-boolean\u2460"},{"id":"ref-for-idl-boolean\u2461"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"5442ea33": {"dfnID":"5442ea33","dfnText":"URL serializer","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-serializer"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"https://url.spec.whatwg.org/#concept-url-serializer"},
"55213b5b": {"dfnID":"55213b5b","dfnText":"request","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"https://fetch.spec.whatwg.org/#concept-request"},
"579a2f63": {"dfnID":"579a2f63","dfnText":"content security policy object","external":true,"refSections":[{"refs":[{"id":"ref-for-content-security-policy-object"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"https://w3c.github.io/webappsec-csp/#content-security-policy-object"},
"5c117fdd": {"dfnID":"5c117fdd","dfnText":"pre-navigation check","external":true,"refSections":[{"refs":[{"id":"ref-for-directive-pre-navigation-check"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"https://w3c.github.io/webappsec-csp/#directive-pre-navigation-check"},
"5d7209e9": {"dfnID":"5d7209e9","dfnText":"Window","external":true,"refSections":[{"refs":[{"id":"ref-for-window"}],"title":"4.1. Integration with HTML"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"5dbae2b0": {"dfnID":"5dbae2b0","dfnText":"string replace all","external":true,"refSections":[{"refs":[{"id":"ref-for-string-replace-all"}],"title":"4.1.2.4. The text IDL attribute"}],"url":"https://dom.spec.whatwg.org/#string-replace-all"},
"5f6d392d": {"dfnID":"5f6d392d","dfnText":"WindowOrWorkerGlobalScope","external":true,"refSections":[{"refs":[{"id":"ref-for-windoworworkerglobalscope"},{"id":"ref-for-windoworworkerglobalscope\u2460"}],"title":"4.1.1. Extensions to the WindowOrWorkerGlobalScope interface"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope"},
"631f76db": {"dfnID":"631f76db","dfnText":"child text content","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-child-text-content"},{"id":"ref-for-concept-child-text-content\u2460"}],"title":"3.6. Prepare the script text"},{"refs":[{"id":"ref-for-concept-child-text-content\u2461"}],"title":"4.1.2. Enforcement for scripts"},{"refs":[{"id":"ref-for-concept-child-text-content\u2462"}],"title":"4.1.2.1. Slots with trusted values"},{"refs":[{"id":"ref-for-concept-child-text-content\u2463"}],"title":"4.1.2.6. Setting slot values from parser"},{"refs":[{"id":"script-processing-model:child-text-content"}],"title":"4.1.2.7. Slot value verification"}],"url":"https://dom.spec.whatwg.org/#concept-child-text-content"},
"63340982": {"dfnID":"63340982","dfnText":"local scheme","external":true,"refSections":[{"refs":[{"id":"ref-for-local-scheme"}],"title":"5.1. Cross-document vectors"}],"url":"https://fetch.spec.whatwg.org/#local-scheme"},
"692595fe": {"dfnID":"692595fe","dfnText":"ordered set","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-set"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"https://infra.spec.whatwg.org/#ordered-set"},
"6c6b1005": {"dfnID":"6c6b1005","dfnText":"any","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-any"},{"id":"ref-for-idl-any\u2460"},{"id":"ref-for-idl-any\u2461"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-idl-any\u2462"},{"id":"ref-for-idl-any\u2463"},{"id":"ref-for-idl-any\u2464"}],"title":"2.3.2. TrustedTypePolicy"},{"refs":[{"id":"ref-for-idl-any\u2465"},{"id":"ref-for-idl-any\u2466"},{"id":"ref-for-idl-any\u2467"}],"title":"2.3.3. TrustedTypePolicyOptions"}],"url":"https://webidl.spec.whatwg.org/#idl-any"},
"6f2dfa22": {"dfnID":"6f2dfa22","dfnText":"ASCII lowercase","external":true,"refSections":[{"refs":[{"id":"ref-for-ascii-lowercase"},{"id":"ref-for-ascii-lowercase\u2460"},{"id":"ref-for-ascii-lowercase\u2461"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"https://infra.spec.whatwg.org/#ascii-lowercase"},
"77b4c09a": {"dfnID":"77b4c09a","dfnText":"assert","external":true,"refSections":[{"refs":[{"id":"ref-for-assert"}],"title":"3.7. Get Trusted Types-compliant attribute value"}],"url":"https://infra.spec.whatwg.org/#assert"},
"85394472": {"dfnID":"85394472","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"}],"title":"2.1.1. DOM XSS injection sinks"},{"refs":[{"id":"ref-for-document\u2460"}],"title":"3.6. Prepare the script text"}],"url":"https://dom.spec.whatwg.org/#document"},
"857d5516": {"dfnID":"857d5516","dfnText":"client","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-client"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"https://fetch.spec.whatwg.org/#concept-request-client"},
"85a289c7": {"dfnID":"85a289c7","dfnText":"SVG namespace","external":true,"refSections":[{"refs":[{"id":"ref-for-svg-namespace"}],"title":"3.8. Get Trusted Type data for attribute"}],"url":"https://infra.spec.whatwg.org/#svg-namespace"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"}],"title":"2.2.1. TrustedHTML"},{"refs":[{"id":"ref-for-idl-DOMString\u2460"}],"title":"2.2.2. TrustedScript"},{"refs":[{"id":"ref-for-idl-DOMString\u2461"},{"id":"ref-for-idl-DOMString\u2462"},{"id":"ref-for-idl-DOMString\u2463"},{"id":"ref-for-idl-DOMString\u2464"},{"id":"ref-for-idl-DOMString\u2465"},{"id":"ref-for-idl-DOMString\u2466"},{"id":"ref-for-idl-DOMString\u2467"},{"id":"ref-for-idl-DOMString\u2468"},{"id":"ref-for-idl-DOMString\u2460\u24ea"},{"id":"ref-for-idl-DOMString\u2460\u2460"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-idl-DOMString\u2460\u2461"},{"id":"ref-for-idl-DOMString\u2460\u2462"},{"id":"ref-for-idl-DOMString\u2460\u2463"},{"id":"ref-for-idl-DOMString\u2460\u2464"}],"title":"2.3.2. TrustedTypePolicy"},{"refs":[{"id":"ref-for-idl-DOMString\u2460\u2465"},{"id":"ref-for-idl-DOMString\u2460\u2466"},{"id":"ref-for-idl-DOMString\u2460\u2467"},{"id":"ref-for-idl-DOMString\u2460\u2468"},{"id":"ref-for-idl-DOMString\u2461\u24ea"}],"title":"2.3.3. TrustedTypePolicyOptions"},{"refs":[{"id":"ref-for-idl-DOMString\u2461\u2460"},{"id":"ref-for-idl-DOMString\u2461\u2461"},{"id":"ref-for-idl-DOMString\u2461\u2462"}],"title":"4.1.2. Enforcement for scripts"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"2.2.1. TrustedHTML"},{"refs":[{"id":"ref-for-Exposed\u2460"}],"title":"2.2.2. TrustedScript"},{"refs":[{"id":"ref-for-Exposed\u2461"}],"title":"2.2.3. TrustedScriptURL"},{"refs":[{"id":"ref-for-Exposed\u2462"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-Exposed\u2463"}],"title":"2.3.2. TrustedTypePolicy"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"8a30477b": {"dfnID":"8a30477b","dfnText":"global object (for environment settings object)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-settings-object-global"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global"},
"8d48cf32": {"dfnID":"8d48cf32","dfnText":"event handler content attribute","external":true,"refSections":[{"refs":[{"id":"ref-for-event-handler-content-attributes"},{"id":"ref-for-event-handler-content-attributes\u2460"}],"title":"3.8. Get Trusted Type data for attribute"}],"url":"https://html.spec.whatwg.org/#event-handler-content-attributes"},
"99573380": {"dfnID":"99573380","dfnText":"Attr","external":true,"refSections":[{"refs":[{"id":"ref-for-attr"}],"title":"3.7. Get Trusted Types-compliant attribute value"}],"url":"https://dom.spec.whatwg.org/#attr"},
"9e196595": {"dfnID":"9e196595","dfnText":"script-src","external":true,"refSections":[{"refs":[{"id":"ref-for-script-src"}],"title":"1.2. Non-goals"}],"url":"https://w3c.github.io/webappsec-csp/#script-src"},
"9e1b2fe2": {"dfnID":"9e1b2fe2","dfnText":"set text content","external":true,"refSections":[{"refs":[{"id":"ref-for-set-text-content"}],"title":"4.1.2.3. The textContent IDL attribute"}],"url":"https://dom.spec.whatwg.org/#set-text-content"},
"a264b960": {"dfnID":"a264b960","dfnText":"innerText","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-innertext"}],"title":"4.1.2. Enforcement for scripts"}],"url":"https://html.spec.whatwg.org/multipage/dom.html#dom-innertext"},
"a3b18719": {"dfnID":"a3b18719","dfnText":"append","external":true,"refSections":[{"refs":[{"id":"ref-for-set-append"}],"title":"3.1. Create a Trusted Type Policy"}],"url":"https://infra.spec.whatwg.org/#set-append"},
"abstract-opdef-create-a-trusted-type": {"dfnID":"abstract-opdef-create-a-trusted-type","dfnText":"Create a Trusted Type","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-opdef-create-a-trusted-type"},{"id":"ref-for-abstract-opdef-create-a-trusted-type\u2460"},{"id":"ref-for-abstract-opdef-create-a-trusted-type\u2461"}],"title":"2.3.2. TrustedTypePolicy"}],"url":"#abstract-opdef-create-a-trusted-type"},
"abstract-opdef-create-a-trusted-type-policy": {"dfnID":"abstract-opdef-create-a-trusted-type-policy","dfnText":"Create a Trusted Type Policy","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-opdef-create-a-trusted-type-policy"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#abstract-opdef-create-a-trusted-type-policy"},
"abstract-opdef-does-sink-type-require-trusted-types": {"dfnID":"abstract-opdef-does-sink-type-require-trusted-types","dfnText":"Does sink type require trusted types?","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-opdef-does-sink-type-require-trusted-types"}],"title":"3.4. Get Trusted Type compliant string"}],"url":"#abstract-opdef-does-sink-type-require-trusted-types"},
"abstract-opdef-get-trusted-type-compliant-string": {"dfnID":"abstract-opdef-get-trusted-type-compliant-string","dfnText":"Get Trusted Type compliant string","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-compliant-string"}],"title":"3.6. Prepare the script text"},{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-compliant-string\u2460"}],"title":"3.7. Get Trusted Types-compliant attribute value"},{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-compliant-string\u2461"}],"title":"4.1.2. Enforcement for scripts"},{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-compliant-string\u2462"}],"title":"4.1.2.2. The innerText IDL attribute"},{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-compliant-string\u2463"}],"title":"4.1.2.3. The textContent IDL attribute"},{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-compliant-string\u2464"}],"title":"4.1.2.4. The text IDL attribute"},{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-compliant-string\u2465"}],"title":"4.1.2.5. The src IDL attribute"}],"url":"#abstract-opdef-get-trusted-type-compliant-string"},
"abstract-opdef-get-trusted-type-data-for-attribute": {"dfnID":"abstract-opdef-get-trusted-type-data-for-attribute","dfnText":"Get Trusted Type data for attribute","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-data-for-attribute"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-data-for-attribute\u2460"}],"title":"3.7. Get Trusted Types-compliant attribute value"}],"url":"#abstract-opdef-get-trusted-type-data-for-attribute"},
"abstract-opdef-get-trusted-type-policy-value": {"dfnID":"abstract-opdef-get-trusted-type-policy-value","dfnText":"Get Trusted Type policy value","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-policy-value"}],"title":"3.2. Create a Trusted Type"},{"refs":[{"id":"ref-for-abstract-opdef-get-trusted-type-policy-value\u2460"}],"title":"3.5. Process value with a default policy"}],"url":"#abstract-opdef-get-trusted-type-policy-value"},
"abstract-opdef-get-trusted-types-compliant-attribute-value": {"dfnID":"abstract-opdef-get-trusted-types-compliant-attribute-value","dfnText":"get Trusted Types-compliant attribute value","external":false,"refSections":[],"url":"#abstract-opdef-get-trusted-types-compliant-attribute-value"},
"abstract-opdef-prepare-the-script-text": {"dfnID":"abstract-opdef-prepare-the-script-text","dfnText":"Prepare the script text","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-opdef-prepare-the-script-text"}],"title":"4.1.2.7. Slot value verification"}],"url":"#abstract-opdef-prepare-the-script-text"},
"abstract-opdef-process-value-with-a-default-policy": {"dfnID":"abstract-opdef-process-value-with-a-default-policy","dfnText":"Process value with a default policy","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-opdef-process-value-with-a-default-policy"}],"title":"3.4. Get Trusted Type compliant string"},{"refs":[{"id":"ref-for-abstract-opdef-process-value-with-a-default-policy\u2460"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"#abstract-opdef-process-value-with-a-default-policy"},
"abstract-opdef-should-sink-type-mismatch-violation-be-blocked-by-content-security-policy": {"dfnID":"abstract-opdef-should-sink-type-mismatch-violation-be-blocked-by-content-security-policy","dfnText":"Should sink type mismatch violation be blocked by Content Security Policy?","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-opdef-should-sink-type-mismatch-violation-be-blocked-by-content-security-policy"}],"title":"3.4. Get Trusted Type compliant string"}],"url":"#abstract-opdef-should-sink-type-mismatch-violation-be-blocked-by-content-security-policy"},
"abstract-opdef-should-trusted-type-policy-creation-be-blocked-by-content-security-policy": {"dfnID":"abstract-opdef-should-trusted-type-policy-creation-be-blocked-by-content-security-policy","dfnText":"Should Trusted Type policy creation be blocked by Content Security Policy?","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-opdef-should-trusted-type-policy-creation-be-blocked-by-content-security-policy"}],"title":"3.1. Create a Trusted Type Policy"}],"url":"#abstract-opdef-should-trusted-type-policy-creation-be-blocked-by-content-security-policy"},
"b0d7f3c3": {"dfnID":"b0d7f3c3","dfnText":"USVString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-USVString"}],"title":"2.2.3. TrustedScriptURL"},{"refs":[{"id":"ref-for-idl-USVString\u2460"}],"title":"2.3.3. TrustedTypePolicyOptions"},{"refs":[{"id":"ref-for-idl-USVString\u2461"}],"title":"4.1.2. Enforcement for scripts"}],"url":"https://webidl.spec.whatwg.org/#idl-USVString"},
"b3955a25": {"dfnID":"b3955a25","dfnText":"namespace","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-attribute-namespace"}],"title":"3.7. Get Trusted Types-compliant attribute value"}],"url":"https://dom.spec.whatwg.org/#concept-attribute-namespace"},
"b75a7d23": {"dfnID":"b75a7d23","dfnText":"realm","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-global-object-realm"}],"title":"2.3. Policies"},{"refs":[{"id":"ref-for-concept-global-object-realm\u2460"}],"title":"4.3.1. require-trusted-types-for directive"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm"},
"b7d73f5b": {"dfnID":"b7d73f5b","dfnText":"Blob","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-Blob"},{"id":"ref-for-dfn-Blob\u2460"}],"title":"5.1. Cross-document vectors"}],"url":"https://w3c.github.io/FileAPI/#dfn-Blob"},
"b815ad04": {"dfnID":"b815ad04","dfnText":"parseFromString(string, type)","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-domparser-parsefromstring"}],"title":"2.1.1. DOM XSS injection sinks"}],"url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring"},
"bb8563cb": {"dfnID":"bb8563cb","dfnText":"Content-Security-Policy-Report-Only","external":true,"refSections":[{"refs":[{"id":"ref-for-header-content-security-policy-report-only"}],"title":"1.3. Use cases"},{"refs":[{"id":"ref-for-header-content-security-policy-report-only\u2460"}],"title":"2.4.1. Content Security Policy"}],"url":"https://w3c.github.io/webappsec-csp/#header-content-security-policy-report-only"},
"bfc1c271": {"dfnID":"bfc1c271","dfnText":"Worker","external":true,"refSections":[{"refs":[{"id":"ref-for-worker"}],"title":"4.1. Integration with HTML"}],"url":"https://html.spec.whatwg.org/multipage/workers.html#worker"},
"c62c4764": {"dfnID":"c62c4764","dfnText":"The text insertion mode","external":true,"refSections":[{"refs":[{"id":"ref-for-parsing-main-incdata"}],"title":"4.1.2.6. Setting slot values from parser"}],"url":"https://html.spec.whatwg.org/#parsing-main-incdata"},
"c80aa797": {"dfnID":"c80aa797","dfnText":"directives","external":true,"refSections":[{"refs":[{"id":"ref-for-directives"}],"title":"4.3.1. require-trusted-types-for directive"},{"refs":[{"id":"ref-for-directives\u2460"},{"id":"ref-for-directives\u2461"}],"title":"4.3.2. trusted-types directive"},{"refs":[{"id":"ref-for-directives\u2462"},{"id":"ref-for-directives\u2463"}],"title":"4.3.3. Does sink type require trusted types?"},{"refs":[{"id":"ref-for-directives\u2464"},{"id":"ref-for-directives\u2465"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"},{"refs":[{"id":"ref-for-directives\u2466"},{"id":"ref-for-directives\u2467"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"https://w3c.github.io/webappsec-csp/#directives"},
"c885c5c1": {"dfnID":"c885c5c1","dfnText":"list contain","external":true,"refSections":[{"refs":[{"id":"ref-for-list-contain"}],"title":"3.8. Get Trusted Type data for attribute"}],"url":"https://infra.spec.whatwg.org/#list-contain"},
"ca3ca4ae": {"dfnID":"ca3ca4ae","dfnText":"URL parser","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-parser"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"https://url.spec.whatwg.org/#concept-url-parser"},
"callbackdef-createhtmlcallback": {"dfnID":"callbackdef-createhtmlcallback","dfnText":"CreateHTMLCallback","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-createhtmlcallback"}],"title":"2.3.3. TrustedTypePolicyOptions"}],"url":"#callbackdef-createhtmlcallback"},
"callbackdef-createscriptcallback": {"dfnID":"callbackdef-createscriptcallback","dfnText":"CreateScriptCallback","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-createscriptcallback"}],"title":"2.3.3. TrustedTypePolicyOptions"}],"url":"#callbackdef-createscriptcallback"},
"callbackdef-createscripturlcallback": {"dfnID":"callbackdef-createscripturlcallback","dfnText":"CreateScriptURLCallback","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-createscripturlcallback"}],"title":"2.3.3. TrustedTypePolicyOptions"}],"url":"#callbackdef-createscripturlcallback"},
"d347f2e7": {"dfnID":"d347f2e7","dfnText":"SVGScriptElement","external":true,"refSections":[{"refs":[{"id":"ref-for-InterfaceSVGScriptElement"}],"title":"3.6. Prepare the script text"},{"refs":[{"id":"ref-for-InterfaceSVGScriptElement\u2460"},{"id":"ref-for-InterfaceSVGScriptElement\u2461"}],"title":"3.8. Get Trusted Type data for attribute"},{"refs":[{"id":"ref-for-InterfaceSVGScriptElement\u2462"}],"title":"4.1.2.1. Slots with trusted values"},{"refs":[{"id":"ref-for-InterfaceSVGScriptElement\u2463"}],"title":"4.1.2.3. The textContent IDL attribute"},{"refs":[{"id":"ref-for-InterfaceSVGScriptElement\u2464"}],"title":"4.1.2.6. Setting slot values from parser"},{"refs":[{"id":"ref-for-InterfaceSVGScriptElement\u2465"}],"title":"4.1.2.7. Slot value verification"}],"url":"https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement"},
"d4127354": {"dfnID":"d4127354","dfnText":"innerHTML (for Element)","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-element-innerhtml"}],"title":"2.1.1. DOM XSS injection sinks"}],"url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-innerhtml"},
"dc1cd39b": {"dfnID":"dc1cd39b","dfnText":"URL","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-url"},{"id":"ref-for-concept-request-url\u2460"},{"id":"ref-for-concept-request-url\u2461"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"https://fetch.spec.whatwg.org/#concept-request-url"},
"dec095e6": {"dfnID":"dec095e6","dfnText":"sample","external":true,"refSections":[{"refs":[{"id":"ref-for-violation-sample"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"},{"refs":[{"id":"ref-for-violation-sample\u2460"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"https://w3c.github.io/webappsec-csp/#violation-sample"},
"default-policy-explanation": {"dfnID":"default-policy-explanation","dfnText":"Default policy","external":false,"refSections":[{"refs":[{"id":"ref-for-default-policy-explanation"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"#default-policy-explanation"},
"dictdef-trustedtypepolicyoptions": {"dfnID":"dictdef-trustedtypepolicyoptions","dfnText":"TrustedTypePolicyOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-trustedtypepolicyoptions"},{"id":"ref-for-dictdef-trustedtypepolicyoptions\u2460"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-dictdef-trustedtypepolicyoptions\u2461"}],"title":"2.3.2. TrustedTypePolicy"},{"refs":[{"id":"ref-for-dictdef-trustedtypepolicyoptions\u2462"}],"title":"2.3.3. TrustedTypePolicyOptions"},{"refs":[{"id":"ref-for-dictdef-trustedtypepolicyoptions\u2463"}],"title":"3.1. Create a Trusted Type Policy"}],"url":"#dictdef-trustedtypepolicyoptions"},
"dom-createhtmlcallback-arguments": {"dfnID":"dom-createhtmlcallback-arguments","dfnText":"arguments","external":false,"refSections":[],"url":"#dom-createhtmlcallback-arguments"},
"dom-createhtmlcallback-input": {"dfnID":"dom-createhtmlcallback-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-createhtmlcallback-input"},
"dom-createscriptcallback-arguments": {"dfnID":"dom-createscriptcallback-arguments","dfnText":"arguments","external":false,"refSections":[],"url":"#dom-createscriptcallback-arguments"},
"dom-createscriptcallback-input": {"dfnID":"dom-createscriptcallback-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-createscriptcallback-input"},
"dom-createscripturlcallback-arguments": {"dfnID":"dom-createscripturlcallback-arguments","dfnText":"arguments","external":false,"refSections":[],"url":"#dom-createscripturlcallback-arguments"},
"dom-createscripturlcallback-input": {"dfnID":"dom-createscripturlcallback-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-createscripturlcallback-input"},
"dom-htmlscriptelement-innertext": {"dfnID":"dom-htmlscriptelement-innertext","dfnText":"innerText","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-htmlscriptelement-innertext"},{"id":"ref-for-dom-htmlscriptelement-innertext\u2460"},{"id":"ref-for-dom-htmlscriptelement-innertext\u2461"}],"title":"4.1.2.2. The innerText IDL attribute"}],"url":"#dom-htmlscriptelement-innertext"},
"dom-htmlscriptelement-src": {"dfnID":"dom-htmlscriptelement-src","dfnText":"src","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-htmlscriptelement-src"}],"title":"2.1.1. DOM XSS injection sinks"},{"refs":[{"id":"ref-for-dom-htmlscriptelement-src\u2460"},{"id":"ref-for-dom-htmlscriptelement-src\u2461"}],"title":"4.1.2.5. The src IDL attribute"}],"url":"#dom-htmlscriptelement-src"},
"dom-htmlscriptelement-text": {"dfnID":"dom-htmlscriptelement-text","dfnText":"text","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-htmlscriptelement-text"}],"title":"2.1.1. DOM XSS injection sinks"},{"refs":[{"id":"ref-for-dom-htmlscriptelement-text\u2460"},{"id":"ref-for-dom-htmlscriptelement-text\u2461"}],"title":"4.1.2.4. The text IDL attribute"}],"url":"#dom-htmlscriptelement-text"},
"dom-htmlscriptelement-textcontent": {"dfnID":"dom-htmlscriptelement-textcontent","dfnText":"textContent","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-htmlscriptelement-textcontent"},{"id":"ref-for-dom-htmlscriptelement-textcontent\u2460"},{"id":"ref-for-dom-htmlscriptelement-textcontent\u2461"}],"title":"4.1.2.3. The textContent IDL attribute"}],"url":"#dom-htmlscriptelement-textcontent"},
"dom-trustedhtml-tojson": {"dfnID":"dom-trustedhtml-tojson","dfnText":"toJSON()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedhtml-tojson"}],"title":"2.2.1. TrustedHTML"}],"url":"#dom-trustedhtml-tojson"},
"dom-trustedscript-tojson": {"dfnID":"dom-trustedscript-tojson","dfnText":"toJSON()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedscript-tojson"}],"title":"2.2.2. TrustedScript"}],"url":"#dom-trustedscript-tojson"},
"dom-trustedscripturl-tojson": {"dfnID":"dom-trustedscripturl-tojson","dfnText":"toJSON()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedscripturl-tojson"}],"title":"2.2.3. TrustedScriptURL"}],"url":"#dom-trustedscripturl-tojson"},
"dom-trustedtypepolicy-createhtml": {"dfnID":"dom-trustedtypepolicy-createhtml","dfnText":"createHTML(input, ...arguments)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicy-createhtml"}],"title":"2.2.1. TrustedHTML"},{"refs":[{"id":"ref-for-dom-trustedtypepolicy-createhtml\u2460"}],"title":"2.3.2. TrustedTypePolicy"}],"url":"#dom-trustedtypepolicy-createhtml"},
"dom-trustedtypepolicy-createhtml-input-arguments-arguments": {"dfnID":"dom-trustedtypepolicy-createhtml-input-arguments-arguments","dfnText":"arguments","external":false,"refSections":[],"url":"#dom-trustedtypepolicy-createhtml-input-arguments-arguments"},
"dom-trustedtypepolicy-createhtml-input-arguments-input": {"dfnID":"dom-trustedtypepolicy-createhtml-input-arguments-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-trustedtypepolicy-createhtml-input-arguments-input"},
"dom-trustedtypepolicy-createscript": {"dfnID":"dom-trustedtypepolicy-createscript","dfnText":"createScript(input, ...arguments)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicy-createscript"}],"title":"2.2.2. TrustedScript"},{"refs":[{"id":"ref-for-dom-trustedtypepolicy-createscript\u2460"}],"title":"2.3.2. TrustedTypePolicy"}],"url":"#dom-trustedtypepolicy-createscript"},
"dom-trustedtypepolicy-createscript-input-arguments-arguments": {"dfnID":"dom-trustedtypepolicy-createscript-input-arguments-arguments","dfnText":"arguments","external":false,"refSections":[],"url":"#dom-trustedtypepolicy-createscript-input-arguments-arguments"},
"dom-trustedtypepolicy-createscript-input-arguments-input": {"dfnID":"dom-trustedtypepolicy-createscript-input-arguments-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-trustedtypepolicy-createscript-input-arguments-input"},
"dom-trustedtypepolicy-createscripturl": {"dfnID":"dom-trustedtypepolicy-createscripturl","dfnText":"createScriptURL(input, ...arguments)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicy-createscripturl"}],"title":"2.2.3. TrustedScriptURL"},{"refs":[{"id":"ref-for-dom-trustedtypepolicy-createscripturl\u2460"}],"title":"2.3.2. TrustedTypePolicy"}],"url":"#dom-trustedtypepolicy-createscripturl"},
"dom-trustedtypepolicy-createscripturl-input-arguments-arguments": {"dfnID":"dom-trustedtypepolicy-createscripturl-input-arguments-arguments","dfnText":"arguments","external":false,"refSections":[],"url":"#dom-trustedtypepolicy-createscripturl-input-arguments-arguments"},
"dom-trustedtypepolicy-createscripturl-input-arguments-input": {"dfnID":"dom-trustedtypepolicy-createscripturl-input-arguments-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-trustedtypepolicy-createscripturl-input-arguments-input"},
"dom-trustedtypepolicy-name": {"dfnID":"dom-trustedtypepolicy-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-trustedtypepolicy-name"},
"dom-trustedtypepolicyfactory-createpolicy": {"dfnID":"dom-trustedtypepolicyfactory-createpolicy","dfnText":"createPolicy(policyName, policyOptions)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyfactory-createpolicy"},{"id":"ref-for-dom-trustedtypepolicyfactory-createpolicy\u2460"}],"title":"2.3. Policies"},{"refs":[{"id":"ref-for-dom-trustedtypepolicyfactory-createpolicy\u2461"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#dom-trustedtypepolicyfactory-createpolicy"},
"dom-trustedtypepolicyfactory-createpolicy-policyname-policyoptions-policyname": {"dfnID":"dom-trustedtypepolicyfactory-createpolicy-policyname-policyoptions-policyname","dfnText":"policyName","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-createpolicy-policyname-policyoptions-policyname"},
"dom-trustedtypepolicyfactory-createpolicy-policyname-policyoptions-policyoptions": {"dfnID":"dom-trustedtypepolicyfactory-createpolicy-policyname-policyoptions-policyoptions","dfnText":"policyOptions","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-createpolicy-policyname-policyoptions-policyoptions"},
"dom-trustedtypepolicyfactory-defaultpolicy": {"dfnID":"dom-trustedtypepolicyfactory-defaultpolicy","dfnText":"defaultPolicy","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyfactory-defaultpolicy"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#dom-trustedtypepolicyfactory-defaultpolicy"},
"dom-trustedtypepolicyfactory-emptyhtml": {"dfnID":"dom-trustedtypepolicyfactory-emptyhtml","dfnText":"emptyHTML","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyfactory-emptyhtml"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#dom-trustedtypepolicyfactory-emptyhtml"},
"dom-trustedtypepolicyfactory-emptyscript": {"dfnID":"dom-trustedtypepolicyfactory-emptyscript","dfnText":"emptyScript","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyfactory-emptyscript"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#dom-trustedtypepolicyfactory-emptyscript"},
"dom-trustedtypepolicyfactory-getattributetype": {"dfnID":"dom-trustedtypepolicyfactory-getattributetype","dfnText":"getAttributeType(tagName, attribute, elementNs, attrNs)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyfactory-getattributetype"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#dom-trustedtypepolicyfactory-getattributetype"},
"dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-attribute": {"dfnID":"dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-attribute","dfnText":"attribute","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-attribute"},
"dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-attrns": {"dfnID":"dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-attrns","dfnText":"attrNs","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-attrns"},
"dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-elementns": {"dfnID":"dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-elementns","dfnText":"elementNs","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-elementns"},
"dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-tagname": {"dfnID":"dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-tagname","dfnText":"tagName","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-getattributetype-tagname-attribute-elementns-attrns-tagname"},
"dom-trustedtypepolicyfactory-getpropertytype": {"dfnID":"dom-trustedtypepolicyfactory-getpropertytype","dfnText":"getPropertyType(tagName, property, elementNs)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyfactory-getpropertytype"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#dom-trustedtypepolicyfactory-getpropertytype"},
"dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-elementns": {"dfnID":"dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-elementns","dfnText":"elementNs","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-elementns"},
"dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-property": {"dfnID":"dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-property","dfnText":"property","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-property"},
"dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-tagname": {"dfnID":"dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-tagname","dfnText":"tagName","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-getpropertytype-tagname-property-elementns-tagname"},
"dom-trustedtypepolicyfactory-ishtml": {"dfnID":"dom-trustedtypepolicyfactory-ishtml","dfnText":"isHTML(value)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyfactory-ishtml"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#dom-trustedtypepolicyfactory-ishtml"},
"dom-trustedtypepolicyfactory-ishtml-value-value": {"dfnID":"dom-trustedtypepolicyfactory-ishtml-value-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-ishtml-value-value"},
"dom-trustedtypepolicyfactory-isscript": {"dfnID":"dom-trustedtypepolicyfactory-isscript","dfnText":"isScript(value)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyfactory-isscript"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#dom-trustedtypepolicyfactory-isscript"},
"dom-trustedtypepolicyfactory-isscript-value-value": {"dfnID":"dom-trustedtypepolicyfactory-isscript-value-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-isscript-value-value"},
"dom-trustedtypepolicyfactory-isscripturl": {"dfnID":"dom-trustedtypepolicyfactory-isscripturl","dfnText":"isScriptURL(value)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyfactory-isscripturl"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#dom-trustedtypepolicyfactory-isscripturl"},
"dom-trustedtypepolicyfactory-isscripturl-value-value": {"dfnID":"dom-trustedtypepolicyfactory-isscripturl-value-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-trustedtypepolicyfactory-isscripturl-value-value"},
"dom-trustedtypepolicyoptions-createhtml": {"dfnID":"dom-trustedtypepolicyoptions-createhtml","dfnText":"createHTML","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyoptions-createhtml"}],"title":"3.1. Create a Trusted Type Policy"}],"url":"#dom-trustedtypepolicyoptions-createhtml"},
"dom-trustedtypepolicyoptions-createscript": {"dfnID":"dom-trustedtypepolicyoptions-createscript","dfnText":"createScript","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyoptions-createscript"}],"title":"3.1. Create a Trusted Type Policy"}],"url":"#dom-trustedtypepolicyoptions-createscript"},
"dom-trustedtypepolicyoptions-createscripturl": {"dfnID":"dom-trustedtypepolicyoptions-createscripturl","dfnText":"createScriptURL","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-trustedtypepolicyoptions-createscripturl"}],"title":"3.1. Create a Trusted Type Policy"}],"url":"#dom-trustedtypepolicyoptions-createscripturl"},
"dom-windoworworkerglobalscope-trustedtypes": {"dfnID":"dom-windoworworkerglobalscope-trustedtypes","dfnText":"trustedTypes","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-windoworworkerglobalscope-trustedtypes"}],"title":"2.4. Enforcement"},{"refs":[{"id":"ref-for-dom-windoworworkerglobalscope-trustedtypes\u2460"}],"title":"4.1.1. Extensions to the WindowOrWorkerGlobalScope interface"}],"url":"#dom-windoworworkerglobalscope-trustedtypes"},
"e02495ec": {"dfnID":"e02495ec","dfnText":"element namespace","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element-namespace"}],"title":"3.8. Get Trusted Type data for attribute"}],"url":"https://dom.spec.whatwg.org/#concept-element-namespace"},
"e19f3699": {"dfnID":"e19f3699","dfnText":"XLink namespace","external":true,"refSections":[{"refs":[{"id":"ref-for-xlink-namespace"}],"title":"3.8. Get Trusted Type data for attribute"}],"url":"https://infra.spec.whatwg.org/#xlink-namespace"},
"e1f8b538": {"dfnID":"e1f8b538","dfnText":"get text content","external":true,"refSections":[{"refs":[{"id":"ref-for-get-text-content"}],"title":"4.1.2.3. The textContent IDL attribute"}],"url":"https://dom.spec.whatwg.org/#get-text-content"},
"e240317a": {"dfnID":"e240317a","dfnText":"local name","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-attribute-local-name"}],"title":"3.7. Get Trusted Types-compliant attribute value"}],"url":"https://dom.spec.whatwg.org/#concept-attribute-local-name"},
"e7762445": {"dfnID":"e7762445","dfnText":"reentrant invocation of the parser","external":true,"refSections":[{"refs":[{"id":"ref-for-nestedParsing"}],"title":"4.1.2.6. Setting slot values from parser"}],"url":"https://html.spec.whatwg.org/#nestedParsing"},
"e99bd18e": {"dfnID":"e99bd18e","dfnText":"relevant global object","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-global"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-concept-relevant-global\u2460"}],"title":"3.6. Prepare the script text"},{"refs":[{"id":"ref-for-concept-relevant-global\u2461"}],"title":"3.7. Get Trusted Types-compliant attribute value"},{"refs":[{"id":"ref-for-concept-relevant-global\u2462"}],"title":"4.1.1. Extensions to the WindowOrWorkerGlobalScope interface"},{"refs":[{"id":"ref-for-concept-relevant-global\u2463"}],"title":"4.1.2.2. The innerText IDL attribute"},{"refs":[{"id":"ref-for-concept-relevant-global\u2464"}],"title":"4.1.2.3. The textContent IDL attribute"},{"refs":[{"id":"ref-for-concept-relevant-global\u2465"}],"title":"4.1.2.4. The text IDL attribute"},{"refs":[{"id":"ref-for-concept-relevant-global\u2466"}],"title":"4.1.2.5. The src IDL attribute"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"e9ecb998": {"dfnID":"e9ecb998","dfnText":"inline check","external":true,"refSections":[{"refs":[{"id":"ref-for-directive-inline-check"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"https://w3c.github.io/webappsec-csp/#directive-inline-check"},
"ead425bd": {"dfnID":"ead425bd","dfnText":"MathML namespace","external":true,"refSections":[{"refs":[{"id":"ref-for-mathml-namespace"}],"title":"3.8. Get Trusted Type data for attribute"}],"url":"https://infra.spec.whatwg.org/#mathml-namespace"},
"ec4838d8": {"dfnID":"ec4838d8","dfnText":"HTMLScriptElement","external":true,"refSections":[{"refs":[{"id":"ref-for-htmlscriptelement"},{"id":"ref-for-htmlscriptelement\u2460"},{"id":"ref-for-htmlscriptelement\u2461"},{"id":"ref-for-htmlscriptelement\u2462"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-htmlscriptelement\u2463"},{"id":"ref-for-htmlscriptelement\u2464"}],"title":"3.6. Prepare the script text"},{"refs":[{"id":"ref-for-htmlscriptelement\u2465"}],"title":"3.8. Get Trusted Type data for attribute"},{"refs":[{"id":"ref-for-htmlscriptelement\u2466"},{"id":"ref-for-htmlscriptelement\u2467"},{"id":"ref-for-htmlscriptelement\u2468"}],"title":"4.1.2. Enforcement for scripts"},{"refs":[{"id":"ref-for-htmlscriptelement\u2460\u24ea"}],"title":"4.1.2.1. Slots with trusted values"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement"},
"ef8bdfad": {"dfnID":"ef8bdfad","dfnText":"innerHTML (for ShadowRoot)","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-shadowroot-innerhtml"}],"title":"2.1.1. DOM XSS injection sinks"}],"url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-shadowroot-innerhtml"},
"enforcement": {"dfnID":"enforcement","dfnText":"Enforcement","external":false,"refSections":[{"refs":[{"id":"ref-for-enforcement"}],"title":"1.3. Use cases"},{"refs":[{"id":"ref-for-enforcement\u2460"}],"title":"2.1. Injection sinks"},{"refs":[{"id":"ref-for-enforcement\u2461"},{"id":"ref-for-enforcement\u2462"}],"title":"2.3. Policies"},{"refs":[{"id":"ref-for-enforcement\u2463"}],"title":"2.3.4. Default policy"},{"refs":[{"id":"ref-for-enforcement\u2464"}],"title":"3.4. Get Trusted Type compliant string"}],"url":"#enforcement"},
"f052b1ea": {"dfnID":"f052b1ea","dfnText":"HTML namespace","external":true,"refSections":[{"refs":[{"id":"ref-for-html-namespace"},{"id":"ref-for-html-namespace\u2460"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-html-namespace\u2461"}],"title":"3.8. Get Trusted Type data for attribute"}],"url":"https://infra.spec.whatwg.org/#html-namespace"},
"f20f4175": {"dfnID":"f20f4175","dfnText":"element interface","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element-interface"},{"id":"ref-for-concept-element-interface\u2460"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"https://dom.spec.whatwg.org/#concept-element-interface"},
"f7433a4f": {"dfnID":"f7433a4f","dfnText":"set the inner text steps","external":true,"refSections":[{"refs":[{"id":"ref-for-set-the-inner-text-steps"}],"title":"4.1.2.2. The innerText IDL attribute"}],"url":"https://html.spec.whatwg.org/#set-the-inner-text-steps"},
"ff5484a3": {"dfnID":"ff5484a3","dfnText":"src","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-script-src"}],"title":"4.1.2.5. The src IDL attribute"}],"url":"https://html.spec.whatwg.org/#attr-script-src"},
"htmlscriptelement-script-text": {"dfnID":"htmlscriptelement-script-text","dfnText":"script text","external":false,"refSections":[{"refs":[{"id":"ref-for-htmlscriptelement-script-text"},{"id":"ref-for-htmlscriptelement-script-text\u2460"}],"title":"3.6. Prepare the script text"},{"refs":[{"id":"ref-for-htmlscriptelement-script-text\u2461"}],"title":"4.1.2.2. The innerText IDL attribute"},{"refs":[{"id":"ref-for-htmlscriptelement-script-text\u2462"}],"title":"4.1.2.3. The textContent IDL attribute"},{"refs":[{"id":"ref-for-htmlscriptelement-script-text\u2463"}],"title":"4.1.2.4. The text IDL attribute"},{"refs":[{"id":"ref-for-htmlscriptelement-script-text\u2464"},{"id":"ref-for-htmlscriptelement-script-text\u2465"}],"title":"4.1.2.6. Setting slot values from parser"},{"refs":[{"id":"ref-for-htmlscriptelement-script-text\u2466"}],"title":"4.1.2.7. Slot value verification"}],"url":"#htmlscriptelement-script-text"},
"injection-sink": {"dfnID":"injection-sink","dfnText":"injection sink","external":false,"refSections":[{"refs":[{"id":"ref-for-injection-sink"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-injection-sink\u2460"}],"title":"1.3. Use cases"},{"refs":[{"id":"ref-for-injection-sink\u2461"}],"title":"2.1. Injection sinks"},{"refs":[{"id":"ref-for-injection-sink\u2462"},{"id":"ref-for-injection-sink\u2463"}],"title":"2.1.1. DOM XSS injection sinks"},{"refs":[{"id":"ref-for-injection-sink\u2464"}],"title":"2.2. Trusted Types"},{"refs":[{"id":"ref-for-injection-sink\u2465"}],"title":"2.2.1. TrustedHTML"},{"refs":[{"id":"ref-for-injection-sink\u2466"}],"title":"2.2.2. TrustedScript"},{"refs":[{"id":"ref-for-injection-sink\u2467"}],"title":"2.2.3. TrustedScriptURL"},{"refs":[{"id":"ref-for-injection-sink\u2468"},{"id":"ref-for-injection-sink\u2460\u24ea"},{"id":"ref-for-injection-sink\u2460\u2460"},{"id":"ref-for-injection-sink\u2460\u2461"}],"title":"2.3. Policies"},{"refs":[{"id":"ref-for-injection-sink\u2460\u2462"},{"id":"ref-for-injection-sink\u2460\u2463"}],"title":"2.3.4. Default policy"},{"refs":[{"id":"ref-for-injection-sink\u2460\u2464"},{"id":"ref-for-injection-sink\u2460\u2465"},{"id":"ref-for-injection-sink\u2460\u2466"}],"title":"2.4. Enforcement"},{"refs":[{"id":"ref-for-injection-sink\u2460\u2467"}],"title":"2.4.1. Content Security Policy"},{"refs":[{"id":"ref-for-injection-sink\u2460\u2468"}],"title":"3.4. Get Trusted Type compliant string"},{"refs":[{"id":"ref-for-injection-sink\u2461\u24ea"}],"title":"3.5. Process value with a default policy"},{"refs":[{"id":"ref-for-injection-sink\u2461\u2460"},{"id":"ref-for-injection-sink\u2461\u2461"}],"title":"4.3.1. require-trusted-types-for directive"},{"refs":[{"id":"ref-for-injection-sink\u2461\u2462"},{"id":"ref-for-injection-sink\u2461\u2463"}],"title":"4.3.2. trusted-types directive"},{"refs":[{"id":"ref-for-injection-sink\u2461\u2464"}],"title":"4.3.3. Does sink type require trusted types?"},{"refs":[{"id":"ref-for-injection-sink\u2461\u2465"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"},{"refs":[{"id":"ref-for-injection-sink\u2461\u2466"}],"title":"5. Security Considerations"},{"refs":[{"id":"ref-for-injection-sink\u2461\u2467"},{"id":"ref-for-injection-sink\u2461\u2468"}],"title":"5.4. Best practices for policy design"},{"refs":[{"id":"ref-for-injection-sink\u2462\u24ea"}],"title":"6. Privacy Considerations"},{"refs":[{"id":"ref-for-injection-sink\u2462\u2460"}],"title":"7.1. Vendor-specific Extensions and Addons"}],"url":"#injection-sink"},
"policies": {"dfnID":"policies","dfnText":"Policies","external":false,"refSections":[{"refs":[{"id":"ref-for-policies"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-policies\u2460"}],"title":"1.3. Use cases"},{"refs":[{"id":"ref-for-policies\u2461"}],"title":"2.3. Policies"},{"refs":[{"id":"ref-for-policies\u2462"}],"title":"2.4. Enforcement"},{"refs":[{"id":"ref-for-policies\u2463"}],"title":"2.4.1. Content Security Policy"},{"refs":[{"id":"ref-for-policies\u2464"}],"title":"4.3.2. trusted-types directive"},{"refs":[{"id":"ref-for-policies\u2465"}],"title":"5.4. Best practices for policy design"}],"url":"#policies"},
"require-trusted-types-for-directive": {"dfnID":"require-trusted-types-for-directive","dfnText":"require-trusted-types-for","external":false,"refSections":[{"refs":[{"id":"ref-for-require-trusted-types-for-directive"}],"title":"1.3. Use cases"},{"refs":[{"id":"ref-for-require-trusted-types-for-directive\u2460"}],"title":"2.4.1. Content Security Policy"},{"refs":[{"id":"ref-for-require-trusted-types-for-directive\u2461"}],"title":"4.3.1. require-trusted-types-for directive"},{"refs":[{"id":"ref-for-require-trusted-types-for-directive\u2462"},{"id":"ref-for-require-trusted-types-for-directive\u2463"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"#require-trusted-types-for-directive"},
"serialized-tt-configuration": {"dfnID":"serialized-tt-configuration","dfnText":"serialized-tt-configuration","external":false,"refSections":[{"refs":[{"id":"ref-for-serialized-tt-configuration"}],"title":"4.3.2. trusted-types directive"}],"url":"#serialized-tt-configuration"},
"trusted-type": {"dfnID":"trusted-type","dfnText":"Trusted Type","external":false,"refSections":[{"refs":[{"id":"ref-for-trusted-type"}],"title":"2.3. Policies"},{"refs":[{"id":"ref-for-trusted-type\u2460"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-trusted-type\u2461"}],"title":"2.3.3. TrustedTypePolicyOptions"},{"refs":[{"id":"ref-for-trusted-type\u2462"}],"title":"2.4. Enforcement"},{"refs":[{"id":"ref-for-trusted-type\u2463"}],"title":"3.4. Get Trusted Type compliant string"},{"refs":[{"id":"ref-for-trusted-type\u2464"}],"title":"4.3.3. Does sink type require trusted types?"},{"refs":[{"id":"ref-for-trusted-type\u2465"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"}],"url":"#trusted-type"},
"trusted-types-directive": {"dfnID":"trusted-types-directive","dfnText":"trusted-types","external":false,"refSections":[{"refs":[{"id":"ref-for-trusted-types-directive"}],"title":"1.3. Use cases"},{"refs":[{"id":"ref-for-trusted-types-directive\u2460"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-trusted-types-directive\u2461"}],"title":"4.3.2. trusted-types directive"}],"url":"#trusted-types-directive"},
"trusted-types-sink-group": {"dfnID":"trusted-types-sink-group","dfnText":"trusted-types-sink-group","external":false,"refSections":[{"refs":[{"id":"ref-for-trusted-types-sink-group"}],"title":"2.1. Injection sinks"},{"refs":[{"id":"ref-for-trusted-types-sink-group\u2460"}],"title":"2.1.1. DOM XSS injection sinks"},{"refs":[{"id":"ref-for-trusted-types-sink-group\u2461"}],"title":"4.3.1. require-trusted-types-for directive"},{"refs":[{"id":"ref-for-trusted-types-sink-group\u2462"}],"title":"4.3.3. Does sink type require trusted types?"},{"refs":[{"id":"ref-for-trusted-types-sink-group\u2463"}],"title":"4.3.4. Should sink type mismatch violation be blocked by Content Security Policy?"}],"url":"#trusted-types-sink-group"},
"trusted-types-sink-group-keyword": {"dfnID":"trusted-types-sink-group-keyword","dfnText":"trusted-types-sink-group-keyword","external":false,"refSections":[{"refs":[{"id":"ref-for-trusted-types-sink-group-keyword"},{"id":"ref-for-trusted-types-sink-group-keyword\u2460"}],"title":"4.3.1. require-trusted-types-for directive"}],"url":"#trusted-types-sink-group-keyword"},
"trustedhtml": {"dfnID":"trustedhtml","dfnText":"TrustedHTML","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedhtml"}],"title":"2.2.1. TrustedHTML"},{"refs":[{"id":"ref-for-trustedhtml\u2460"}],"title":"2.3. Policies"},{"refs":[{"id":"ref-for-trustedhtml\u2461"},{"id":"ref-for-trustedhtml\u2462"},{"id":"ref-for-trustedhtml\u2463"},{"id":"ref-for-trustedhtml\u2464"},{"id":"ref-for-trustedhtml\u2465"},{"id":"ref-for-trustedhtml\u2466"},{"id":"ref-for-trustedhtml\u2467"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-trustedhtml\u2468"}],"title":"2.3.2. TrustedTypePolicy"},{"refs":[{"id":"ref-for-trustedhtml\u2460\u24ea"}],"title":"3.7. Get Trusted Types-compliant attribute value"},{"refs":[{"id":"ref-for-trustedhtml\u2460\u2460"}],"title":"3.8. Get Trusted Type data for attribute"},{"refs":[{"id":"ref-for-trustedhtml\u2460\u2461"}],"title":"4. Integrations"}],"url":"#trustedhtml"},
"trustedhtml-data": {"dfnID":"trustedhtml-data","dfnText":"data","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedhtml-data"}],"title":"2.2.1. TrustedHTML"},{"refs":[{"id":"ref-for-trustedhtml-data\u2460"},{"id":"ref-for-trustedhtml-data\u2461"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#trustedhtml-data"},
"trustedhtml-stringification-behavior": {"dfnID":"trustedhtml-stringification-behavior","dfnText":"stringification behavior","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedhtml-stringification-behavior"}],"title":"2.2.1. TrustedHTML"}],"url":"#trustedhtml-stringification-behavior"},
"trustedscript": {"dfnID":"trustedscript","dfnText":"TrustedScript","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedscript"}],"title":"2.2.2. TrustedScript"},{"refs":[{"id":"ref-for-trustedscript\u2460"},{"id":"ref-for-trustedscript\u2461"},{"id":"ref-for-trustedscript\u2462"},{"id":"ref-for-trustedscript\u2463"},{"id":"ref-for-trustedscript\u2464"},{"id":"ref-for-trustedscript\u2465"},{"id":"ref-for-trustedscript\u2466"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-trustedscript\u2467"}],"title":"2.3.2. TrustedTypePolicy"},{"refs":[{"id":"ref-for-trustedscript\u2468"}],"title":"3.7. Get Trusted Types-compliant attribute value"},{"refs":[{"id":"ref-for-trustedscript\u2460\u24ea"}],"title":"3.8. Get Trusted Type data for attribute"},{"refs":[{"id":"ref-for-trustedscript\u2460\u2460"}],"title":"4. Integrations"},{"refs":[{"id":"ref-for-trustedscript\u2460\u2461"},{"id":"ref-for-trustedscript\u2460\u2462"},{"id":"ref-for-trustedscript\u2460\u2463"}],"title":"4.1.2. Enforcement for scripts"},{"refs":[{"id":"ref-for-trustedscript\u2460\u2464"}],"title":"4.1.2.2. The innerText IDL attribute"},{"refs":[{"id":"ref-for-trustedscript\u2460\u2465"}],"title":"4.1.2.3. The textContent IDL attribute"},{"refs":[{"id":"ref-for-trustedscript\u2460\u2466"}],"title":"4.1.2.4. The text IDL attribute"},{"refs":[{"id":"ref-for-trustedscript\u2460\u2467"},{"id":"ref-for-trustedscript\u2460\u2468"}],"title":"4.3.1.1. require-trusted-types-for Pre-Navigation check"}],"url":"#trustedscript"},
"trustedscript-data": {"dfnID":"trustedscript-data","dfnText":"data","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedscript-data"}],"title":"2.2.2. TrustedScript"},{"refs":[{"id":"ref-for-trustedscript-data\u2460"},{"id":"ref-for-trustedscript-data\u2461"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#trustedscript-data"},
"trustedscript-stringification-behavior": {"dfnID":"trustedscript-stringification-behavior","dfnText":"stringification behavior","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedscript-stringification-behavior"}],"title":"2.2.2. TrustedScript"}],"url":"#trustedscript-stringification-behavior"},
"trustedscripturl": {"dfnID":"trustedscripturl","dfnText":"TrustedScriptURL","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedscripturl"}],"title":"2.2.3. TrustedScriptURL"},{"refs":[{"id":"ref-for-trustedscripturl\u2460"},{"id":"ref-for-trustedscripturl\u2461"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-trustedscripturl\u2462"}],"title":"2.3.2. TrustedTypePolicy"},{"refs":[{"id":"ref-for-trustedscripturl\u2463"}],"title":"3.6. Prepare the script text"},{"refs":[{"id":"ref-for-trustedscripturl\u2464"}],"title":"3.7. Get Trusted Types-compliant attribute value"},{"refs":[{"id":"ref-for-trustedscripturl\u2465"},{"id":"ref-for-trustedscripturl\u2466"},{"id":"ref-for-trustedscripturl\u2467"}],"title":"3.8. Get Trusted Type data for attribute"},{"refs":[{"id":"ref-for-trustedscripturl\u2468"}],"title":"4. Integrations"},{"refs":[{"id":"ref-for-trustedscripturl\u2460\u24ea"}],"title":"4.1.2. Enforcement for scripts"},{"refs":[{"id":"ref-for-trustedscripturl\u2460\u2460"}],"title":"4.1.2.5. The src IDL attribute"}],"url":"#trustedscripturl"},
"trustedscripturl-data": {"dfnID":"trustedscripturl-data","dfnText":"data","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedscripturl-data"}],"title":"2.2.3. TrustedScriptURL"},{"refs":[{"id":"ref-for-trustedscripturl-data\u2460"}],"title":"2.3.1. TrustedTypePolicyFactory"}],"url":"#trustedscripturl-data"},
"trustedscripturl-stringification-behavior": {"dfnID":"trustedscripturl-stringification-behavior","dfnText":"stringification behavior","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedscripturl-stringification-behavior"}],"title":"2.2.3. TrustedScriptURL"}],"url":"#trustedscripturl-stringification-behavior"},
"trustedtypepolicy": {"dfnID":"trustedtypepolicy","dfnText":"TrustedTypePolicy","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedtypepolicy"}],"title":"2.2.1. TrustedHTML"},{"refs":[{"id":"ref-for-trustedtypepolicy\u2460"}],"title":"2.2.2. TrustedScript"},{"refs":[{"id":"ref-for-trustedtypepolicy\u2461"}],"title":"2.2.3. TrustedScriptURL"},{"refs":[{"id":"ref-for-trustedtypepolicy\u2462"},{"id":"ref-for-trustedtypepolicy\u2463"},{"id":"ref-for-trustedtypepolicy\u2464"},{"id":"ref-for-trustedtypepolicy\u2465"},{"id":"ref-for-trustedtypepolicy\u2466"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-trustedtypepolicy\u2467"}],"title":"2.3.2. TrustedTypePolicy"},{"refs":[{"id":"ref-for-trustedtypepolicy\u2468"}],"title":"2.3.3. TrustedTypePolicyOptions"},{"refs":[{"id":"ref-for-trustedtypepolicy\u2460\u24ea"},{"id":"ref-for-trustedtypepolicy\u2460\u2460"}],"title":"3.1. Create a Trusted Type Policy"},{"refs":[{"id":"ref-for-trustedtypepolicy\u2460\u2461"}],"title":"3.2. Create a Trusted Type"},{"refs":[{"id":"ref-for-trustedtypepolicy\u2460\u2462"}],"title":"3.3. Get Trusted Type policy value"},{"refs":[{"id":"ref-for-trustedtypepolicy\u2460\u2463"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"#trustedtypepolicy"},
"trustedtypepolicy-name": {"dfnID":"trustedtypepolicy-name","dfnText":"name","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedtypepolicy-name"}],"title":"2.3.4. Default policy"}],"url":"#trustedtypepolicy-name"},
"trustedtypepolicy-options": {"dfnID":"trustedtypepolicy-options","dfnText":"options","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedtypepolicy-options"}],"title":"3.1. Create a Trusted Type Policy"},{"refs":[{"id":"ref-for-trustedtypepolicy-options\u2460"}],"title":"3.3. Get Trusted Type policy value"}],"url":"#trustedtypepolicy-options"},
"trustedtypepolicyfactory": {"dfnID":"trustedtypepolicyfactory","dfnText":"TrustedTypePolicyFactory","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedtypepolicyfactory"},{"id":"ref-for-trustedtypepolicyfactory\u2460"},{"id":"ref-for-trustedtypepolicyfactory\u2461"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-trustedtypepolicyfactory\u2462"}],"title":"3.1. Create a Trusted Type Policy"},{"refs":[{"id":"ref-for-trustedtypepolicyfactory\u2463"}],"title":"4.1. Integration with HTML"},{"refs":[{"id":"ref-for-trustedtypepolicyfactory\u2464"}],"title":"4.1.1. Extensions to the WindowOrWorkerGlobalScope interface"}],"url":"#trustedtypepolicyfactory"},
"trustedtypepolicyfactory-created-policy-names": {"dfnID":"trustedtypepolicyfactory-created-policy-names","dfnText":"created policy names","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedtypepolicyfactory-created-policy-names"},{"id":"ref-for-trustedtypepolicyfactory-created-policy-names\u2460"}],"title":"3.1. Create a Trusted Type Policy"}],"url":"#trustedtypepolicyfactory-created-policy-names"},
"trustedtypepolicyfactory-default-policy": {"dfnID":"trustedtypepolicyfactory-default-policy","dfnText":"default policy","external":false,"refSections":[{"refs":[{"id":"ref-for-trustedtypepolicyfactory-default-policy"}],"title":"2.3.1. TrustedTypePolicyFactory"},{"refs":[{"id":"ref-for-trustedtypepolicyfactory-default-policy\u2460"},{"id":"ref-for-trustedtypepolicyfactory-default-policy\u2461"}],"title":"3.1. Create a Trusted Type Policy"},{"refs":[{"id":"ref-for-trustedtypepolicyfactory-default-policy\u2462"}],"title":"3.5. Process value with a default policy"},{"refs":[{"id":"ref-for-trustedtypepolicyfactory-default-policy\u2463"}],"title":"4.3.2. trusted-types directive"},{"refs":[{"id":"ref-for-trustedtypepolicyfactory-default-policy\u2464"}],"title":"6. Privacy Considerations"},{"refs":[{"id":"ref-for-trustedtypepolicyfactory-default-policy\u2465"}],"title":"7.1. Vendor-specific Extensions and Addons"}],"url":"#trustedtypepolicyfactory-default-policy"},
"tt-expression": {"dfnID":"tt-expression","dfnText":"tt-expression","external":false,"refSections":[{"refs":[{"id":"ref-for-tt-expression"},{"id":"ref-for-tt-expression\u2460"}],"title":"4.3.2. trusted-types directive"}],"url":"#tt-expression"},
"tt-keyword": {"dfnID":"tt-keyword","dfnText":"tt-keyword","external":false,"refSections":[{"refs":[{"id":"ref-for-tt-keyword"}],"title":"4.3.2. trusted-types directive"},{"refs":[{"id":"ref-for-tt-keyword\u2460"},{"id":"ref-for-tt-keyword\u2461"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"#tt-keyword"},
"tt-policy-name": {"dfnID":"tt-policy-name","dfnText":"tt-policy-name","external":false,"refSections":[{"refs":[{"id":"ref-for-tt-policy-name"}],"title":"4.3.2. trusted-types directive"},{"refs":[{"id":"ref-for-tt-policy-name\u2460"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"#tt-policy-name"},
"tt-wildcard": {"dfnID":"tt-wildcard","dfnText":"tt-wildcard","external":false,"refSections":[{"refs":[{"id":"ref-for-tt-wildcard"}],"title":"4.3.2. trusted-types directive"},{"refs":[{"id":"ref-for-tt-wildcard\u2460"}],"title":"4.3.5. Should Trusted Type policy creation be blocked by Content Security Policy?"}],"url":"#tt-wildcard"},
"typedefdef-trustedtype": {"dfnID":"typedefdef-trustedtype","dfnText":"TrustedType","external":false,"refSections":[{"refs":[{"id":"ref-for-typedefdef-trustedtype"},{"id":"ref-for-typedefdef-trustedtype\u2460"}],"title":"3.4. Get Trusted Type compliant string"},{"refs":[{"id":"ref-for-typedefdef-trustedtype\u2461"},{"id":"ref-for-typedefdef-trustedtype\u2462"}],"title":"3.5. Process value with a default policy"},{"refs":[{"id":"ref-for-typedefdef-trustedtype\u2463"}],"title":"3.7. Get Trusted Types-compliant attribute value"}],"url":"#typedefdef-trustedtype"},
"window-trusted-type-policy-factory": {"dfnID":"window-trusted-type-policy-factory","dfnText":"trusted type policy factory","external":false,"refSections":[{"refs":[{"id":"ref-for-window-trusted-type-policy-factory"}],"title":"3.5. Process value with a default policy"}],"url":"#window-trusted-type-policy-factory"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{
function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    hydratePanels(panels);
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}
function hydratePanels(panels) {
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    // First display them all, if they're not already visible.
    for(const panel of panels) {
        panel.classList.remove("unpositioned");
    }
    // Measure them all
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        panel.dfn = dfn;
        panel.top = window.scrollY + dfn.getBoundingClientRect().top;
        let panelRect = panel.getBoundingClientRect();
        panel.height = panelRect.height;
        if(main) {
            panel.overlappingMain = panelRect.left < mainRect.right;
        } else {
            panel.overlappingMain = false;
        }
    }
    // And finally position them
    for(const panel of panels) {
        const dfn = panel.dfn;
        if(!dfn) continue;
        panel.style.top = panel.top + "px";
        panel.classList.toggle("overlapping-main", panel.overlappingMain);
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#abstract-opdef-create-a-trusted-type": {"displayText":"Create a Trusted Type","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"Create a Trusted Type","type":"abstract-op","url":"#abstract-opdef-create-a-trusted-type"},
"#abstract-opdef-create-a-trusted-type-policy": {"displayText":"Create a Trusted Type Policy","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"Create a Trusted Type Policy","type":"abstract-op","url":"#abstract-opdef-create-a-trusted-type-policy"},
"#abstract-opdef-does-sink-type-require-trusted-types": {"displayText":"Does sink type require trusted types?","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"Does sink type require trusted types?","type":"abstract-op","url":"#abstract-opdef-does-sink-type-require-trusted-types"},
"#abstract-opdef-get-trusted-type-compliant-string": {"displayText":"Get Trusted Type compliant string","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"Get Trusted Type compliant string","type":"abstract-op","url":"#abstract-opdef-get-trusted-type-compliant-string"},
"#abstract-opdef-get-trusted-type-data-for-attribute": {"displayText":"Get Trusted Type data for attribute","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"Get Trusted Type data for attribute","type":"abstract-op","url":"#abstract-opdef-get-trusted-type-data-for-attribute"},
"#abstract-opdef-get-trusted-type-policy-value": {"displayText":"Get Trusted Type policy value","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"Get Trusted Type policy value","type":"abstract-op","url":"#abstract-opdef-get-trusted-type-policy-value"},
"#abstract-opdef-prepare-the-script-text": {"displayText":"Prepare the script text","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"Prepare the script text","type":"abstract-op","url":"#abstract-opdef-prepare-the-script-text"},
"#abstract-opdef-process-value-with-a-default-policy": {"displayText":"Process value with a default policy","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"Process value with a default policy","type":"abstract-op","url":"#abstract-opdef-process-value-with-a-default-policy"},
"#abstract-opdef-should-sink-type-mismatch-violation-be-blocked-by-content-security-policy": {"displayText":"Should sink type mismatch violation be blocked by Content Security Policy?","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"Should sink type mismatch violation be blocked by Content Security Policy?","type":"abstract-op","url":"#abstract-opdef-should-sink-type-mismatch-violation-be-blocked-by-content-security-policy"},
"#abstract-opdef-should-trusted-type-policy-creation-be-blocked-by-content-security-policy": {"displayText":"Should Trusted Type policy creation be blocked by Content Security Policy?","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"Should Trusted Type policy creation be blocked by Content Security Policy?","type":"abstract-op","url":"#abstract-opdef-should-trusted-type-policy-creation-be-blocked-by-content-security-policy"},
"#callbackdef-createhtmlcallback": {"displayText":"CreateHTMLCallback","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"CreateHTMLCallback","type":"callback","url":"#callbackdef-createhtmlcallback"},
"#callbackdef-createscriptcallback": {"displayText":"CreateScriptCallback","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"CreateScriptCallback","type":"callback","url":"#callbackdef-createscriptcallback"},
"#callbackdef-createscripturlcallback": {"displayText":"CreateScriptURLCallback","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"CreateScriptURLCallback","type":"callback","url":"#callbackdef-createscripturlcallback"},
"#default-policy-explanation": {"displayText":"default-policy-explanation","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"default-policy-explanation","type":"dfn","url":"#default-policy-explanation"},
"#dictdef-trustedtypepolicyoptions": {"displayText":"TrustedTypePolicyOptions","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"TrustedTypePolicyOptions","type":"dictionary","url":"#dictdef-trustedtypepolicyoptions"},
"#dom-htmlscriptelement-innertext": {"displayText":"innerText","export":true,"for_":["HTMLScriptElement"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"innerText","type":"attribute","url":"#dom-htmlscriptelement-innertext"},
"#dom-htmlscriptelement-src": {"displayText":"src","export":true,"for_":["HTMLScriptElement"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"src","type":"attribute","url":"#dom-htmlscriptelement-src"},
"#dom-htmlscriptelement-text": {"displayText":"text","export":true,"for_":["HTMLScriptElement"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"text","type":"attribute","url":"#dom-htmlscriptelement-text"},
"#dom-htmlscriptelement-textcontent": {"displayText":"textContent","export":true,"for_":["HTMLScriptElement"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"textContent","type":"attribute","url":"#dom-htmlscriptelement-textcontent"},
"#dom-trustedhtml-tojson": {"displayText":"toJSON()","export":true,"for_":["TrustedHTML"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"toJSON()","type":"method","url":"#dom-trustedhtml-tojson"},
"#dom-trustedscript-tojson": {"displayText":"toJSON()","export":true,"for_":["TrustedScript"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"toJSON()","type":"method","url":"#dom-trustedscript-tojson"},
"#dom-trustedscripturl-tojson": {"displayText":"toJSON()","export":true,"for_":["TrustedScriptURL"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"toJSON()","type":"method","url":"#dom-trustedscripturl-tojson"},
"#dom-trustedtypepolicy-createhtml": {"displayText":"createHTML(input)","export":true,"for_":["TrustedTypePolicy"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"createHTML(input)","type":"method","url":"#dom-trustedtypepolicy-createhtml"},
"#dom-trustedtypepolicy-createscript": {"displayText":"createScript(input)","export":true,"for_":["TrustedTypePolicy"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"createScript(input)","type":"method","url":"#dom-trustedtypepolicy-createscript"},
"#dom-trustedtypepolicy-createscripturl": {"displayText":"createScriptURL(input)","export":true,"for_":["TrustedTypePolicy"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"createScriptURL(input)","type":"method","url":"#dom-trustedtypepolicy-createscripturl"},
"#dom-trustedtypepolicyfactory-createpolicy": {"displayText":"createPolicy(policyName)","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"createPolicy(policyName)","type":"method","url":"#dom-trustedtypepolicyfactory-createpolicy"},
"#dom-trustedtypepolicyfactory-defaultpolicy": {"displayText":"defaultPolicy","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"defaultPolicy","type":"attribute","url":"#dom-trustedtypepolicyfactory-defaultpolicy"},
"#dom-trustedtypepolicyfactory-emptyhtml": {"displayText":"emptyHTML","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"emptyHTML","type":"attribute","url":"#dom-trustedtypepolicyfactory-emptyhtml"},
"#dom-trustedtypepolicyfactory-emptyscript": {"displayText":"emptyScript","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"emptyScript","type":"attribute","url":"#dom-trustedtypepolicyfactory-emptyscript"},
"#dom-trustedtypepolicyfactory-getattributetype": {"displayText":"getAttributeType(tagName, attribute, elementNs, attrNs)","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"getAttributeType(tagName, attribute, elementNs, attrNs)","type":"method","url":"#dom-trustedtypepolicyfactory-getattributetype"},
"#dom-trustedtypepolicyfactory-getpropertytype": {"displayText":"getPropertyType(tagName, property, elementNs)","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"getPropertyType(tagName, property, elementNs)","type":"method","url":"#dom-trustedtypepolicyfactory-getpropertytype"},
"#dom-trustedtypepolicyfactory-ishtml": {"displayText":"isHTML(value)","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"isHTML(value)","type":"method","url":"#dom-trustedtypepolicyfactory-ishtml"},
"#dom-trustedtypepolicyfactory-isscript": {"displayText":"isScript(value)","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"isScript(value)","type":"method","url":"#dom-trustedtypepolicyfactory-isscript"},
"#dom-trustedtypepolicyfactory-isscripturl": {"displayText":"isScriptURL(value)","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"isScriptURL(value)","type":"method","url":"#dom-trustedtypepolicyfactory-isscripturl"},
"#dom-trustedtypepolicyoptions-createhtml": {"displayText":"createHTML","export":true,"for_":["TrustedTypePolicyOptions"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"createHTML","type":"dict-member","url":"#dom-trustedtypepolicyoptions-createhtml"},
"#dom-trustedtypepolicyoptions-createscript": {"displayText":"createScript","export":true,"for_":["TrustedTypePolicyOptions"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"createScript","type":"dict-member","url":"#dom-trustedtypepolicyoptions-createscript"},
"#dom-trustedtypepolicyoptions-createscripturl": {"displayText":"createScriptURL","export":true,"for_":["TrustedTypePolicyOptions"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"createScriptURL","type":"dict-member","url":"#dom-trustedtypepolicyoptions-createscripturl"},
"#dom-windoworworkerglobalscope-trustedtypes": {"displayText":"trustedTypes","export":true,"for_":["WindowOrWorkerGlobalScope"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"trustedTypes","type":"attribute","url":"#dom-windoworworkerglobalscope-trustedtypes"},
"#enforcement": {"displayText":"enforcement","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"enforcement","type":"dfn","url":"#enforcement"},
"#htmlscriptelement-script-text": {"displayText":"script text","export":true,"for_":["HTMLScriptElement","SVGScriptElement"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"script text","type":"dfn","url":"#htmlscriptelement-script-text"},
"#injection-sink": {"displayText":"injection sink","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"injection sink","type":"dfn","url":"#injection-sink"},
"#policies": {"displayText":"policies","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"policies","type":"dfn","url":"#policies"},
"#require-trusted-types-for-directive": {"displayText":"require-trusted-types-for-directive","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"require-trusted-types-for-directive","type":"dfn","url":"#require-trusted-types-for-directive"},
"#serialized-tt-configuration": {"displayText":"serialized-tt-configuration","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"serialized-tt-configuration","type":"dfn","url":"#serialized-tt-configuration"},
"#trusted-type": {"displayText":"trusted type","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"trusted type","type":"dfn","url":"#trusted-type"},
"#trusted-types-directive": {"displayText":"trusted-types-directive","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"trusted-types-directive","type":"dfn","url":"#trusted-types-directive"},
"#trusted-types-sink-group": {"displayText":"trusted-types-sink-group","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"trusted-types-sink-group","type":"dfn","url":"#trusted-types-sink-group"},
"#trusted-types-sink-group-keyword": {"displayText":"trusted-types-sink-group-keyword","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"trusted-types-sink-group-keyword","type":"dfn","url":"#trusted-types-sink-group-keyword"},
"#trustedhtml": {"displayText":"TrustedHTML","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"TrustedHTML","type":"interface","url":"#trustedhtml"},
"#trustedhtml-data": {"displayText":"data","export":true,"for_":["TrustedHTML"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"data","type":"dfn","url":"#trustedhtml-data"},
"#trustedhtml-stringification-behavior": {"displayText":"stringification behavior","export":true,"for_":["TrustedHTML"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"stringification behavior","type":"dfn","url":"#trustedhtml-stringification-behavior"},
"#trustedscript": {"displayText":"TrustedScript","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"TrustedScript","type":"interface","url":"#trustedscript"},
"#trustedscript-data": {"displayText":"data","export":true,"for_":["TrustedScript"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"data","type":"dfn","url":"#trustedscript-data"},
"#trustedscript-stringification-behavior": {"displayText":"stringification behavior","export":true,"for_":["TrustedScript"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"stringification behavior","type":"dfn","url":"#trustedscript-stringification-behavior"},
"#trustedscripturl": {"displayText":"TrustedScriptURL","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"TrustedScriptURL","type":"interface","url":"#trustedscripturl"},
"#trustedscripturl-data": {"displayText":"data","export":true,"for_":["TrustedScriptURL"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"data","type":"dfn","url":"#trustedscripturl-data"},
"#trustedscripturl-stringification-behavior": {"displayText":"stringification behavior","export":true,"for_":["TrustedScriptURL"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"stringification behavior","type":"dfn","url":"#trustedscripturl-stringification-behavior"},
"#trustedtypepolicy": {"displayText":"TrustedTypePolicy","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"TrustedTypePolicy","type":"interface","url":"#trustedtypepolicy"},
"#trustedtypepolicy-name": {"displayText":"name","export":true,"for_":["TrustedTypePolicy"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"name","type":"dfn","url":"#trustedtypepolicy-name"},
"#trustedtypepolicy-options": {"displayText":"options","export":true,"for_":["TrustedTypePolicy"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"options","type":"dfn","url":"#trustedtypepolicy-options"},
"#trustedtypepolicyfactory": {"displayText":"TrustedTypePolicyFactory","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"TrustedTypePolicyFactory","type":"interface","url":"#trustedtypepolicyfactory"},
"#trustedtypepolicyfactory-created-policy-names": {"displayText":"created policy names","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"created policy names","type":"dfn","url":"#trustedtypepolicyfactory-created-policy-names"},
"#trustedtypepolicyfactory-default-policy": {"displayText":"default policy","export":true,"for_":["TrustedTypePolicyFactory"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"default policy","type":"dfn","url":"#trustedtypepolicyfactory-default-policy"},
"#tt-expression": {"displayText":"tt-expression","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"tt-expression","type":"dfn","url":"#tt-expression"},
"#tt-keyword": {"displayText":"tt-keyword","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"tt-keyword","type":"dfn","url":"#tt-keyword"},
"#tt-policy-name": {"displayText":"tt-policy-name","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"tt-policy-name","type":"dfn","url":"#tt-policy-name"},
"#tt-wildcard": {"displayText":"tt-wildcard","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"tt-wildcard","type":"dfn","url":"#tt-wildcard"},
"#typedefdef-trustedtype": {"displayText":"TrustedType","export":true,"for_":[],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"TrustedType","type":"typedef","url":"#typedefdef-trustedtype"},
"#window-trusted-type-policy-factory": {"displayText":"trusted type policy factory","export":true,"for_":["Window"],"level":"","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"local","text":"trusted type policy factory","type":"dfn","url":"#window-trusted-type-policy-factory"},
"https://dom.spec.whatwg.org/#attr": {"displayText":"Attr","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Attr","type":"interface","url":"https://dom.spec.whatwg.org/#attr"},
"https://dom.spec.whatwg.org/#concept-attribute-local-name": {"displayText":"local name","export":true,"for_":["Attr"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"local name","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-attribute-local-name"},
"https://dom.spec.whatwg.org/#concept-attribute-namespace": {"displayText":"namespace","export":true,"for_":["Attr"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"namespace","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-attribute-namespace"},
"https://dom.spec.whatwg.org/#concept-child-text-content": {"displayText":"child text content","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"child text content","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-child-text-content"},
"https://dom.spec.whatwg.org/#concept-element-interface": {"displayText":"element interface","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"element interface","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-element-interface"},
"https://dom.spec.whatwg.org/#concept-element-namespace": {"displayText":"element namespace","export":true,"for_":[],"level":"","normative":true,"shortname":"dom","spec":"dom","status":"anchor-block","text":"element namespace","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-element-namespace"},
"https://dom.spec.whatwg.org/#concept-node-document": {"displayText":"node document","export":true,"for_":["Node"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"node document","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-node-document"},
"https://dom.spec.whatwg.org/#document": {"displayText":"Document","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Document","type":"interface","url":"https://dom.spec.whatwg.org/#document"},
"https://dom.spec.whatwg.org/#dom-node-textcontent": {"displayText":"textContent","export":true,"for_":["Node"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"textContent","type":"attribute","url":"https://dom.spec.whatwg.org/#dom-node-textcontent"},
"https://dom.spec.whatwg.org/#element": {"displayText":"Element","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Element","type":"interface","url":"https://dom.spec.whatwg.org/#element"},
"https://dom.spec.whatwg.org/#get-text-content": {"displayText":"get text content","export":true,"for_":[],"level":"","normative":true,"shortname":"dom","spec":"dom","status":"anchor-block","text":"get text content","type":"dfn","url":"https://dom.spec.whatwg.org/#get-text-content"},
"https://dom.spec.whatwg.org/#set-text-content": {"displayText":"set text content","export":true,"for_":[],"level":"","normative":true,"shortname":"dom","spec":"dom","status":"anchor-block","text":"set text content","type":"dfn","url":"https://dom.spec.whatwg.org/#set-text-content"},
"https://dom.spec.whatwg.org/#string-replace-all": {"displayText":"string replace all","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"string replace all","type":"dfn","url":"https://dom.spec.whatwg.org/#string-replace-all"},
"https://fetch.spec.whatwg.org/#concept-request": {"displayText":"request","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"request","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request"},
"https://fetch.spec.whatwg.org/#concept-request-client": {"displayText":"client","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"client","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-client"},
"https://fetch.spec.whatwg.org/#concept-request-url": {"displayText":"URL","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"url","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-url"},
"https://fetch.spec.whatwg.org/#local-scheme": {"displayText":"local scheme","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"local scheme","type":"dfn","url":"https://fetch.spec.whatwg.org/#local-scheme"},
"https://html.spec.whatwg.org/#attr-script-src": {"displayText":"src","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"src","type":"dfn","url":"https://html.spec.whatwg.org/#attr-script-src"},
"https://html.spec.whatwg.org/#event-handler-content-attributes": {"displayText":"event handler content attribute","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"event handler content attribute","type":"dfn","url":"https://html.spec.whatwg.org/#event-handler-content-attributes"},
"https://html.spec.whatwg.org/#get-the-text-steps": {"displayText":"get the text steps","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"get the text steps","type":"dfn","url":"https://html.spec.whatwg.org/#get-the-text-steps"},
"https://html.spec.whatwg.org/#nestedParsing": {"displayText":"reentrant invocation of the parser","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"reentrant invocation of the parser","type":"dfn","url":"https://html.spec.whatwg.org/#nestedParsing"},
"https://html.spec.whatwg.org/#parsing-main-incdata": {"displayText":"The text insertion mode","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"the text insertion mode","type":"dfn","url":"https://html.spec.whatwg.org/#parsing-main-incdata"},
"https://html.spec.whatwg.org/#prepare-the-script-element": {"displayText":"prepare the script element","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"prepare the script element","type":"dfn","url":"https://html.spec.whatwg.org/#prepare-the-script-element"},
"https://html.spec.whatwg.org/#set-the-inner-text-steps": {"displayText":"set the inner text steps","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"set the inner text steps","type":"dfn","url":"https://html.spec.whatwg.org/#set-the-inner-text-steps"},
"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions": {"displayText":"CEReactions","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"CEReactions","type":"extended-attribute","url":"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"},
"https://html.spec.whatwg.org/multipage/dom.html#dom-innertext": {"displayText":"innerText","export":true,"for_":["HTMLElement"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"innerText","type":"attribute","url":"https://html.spec.whatwg.org/multipage/dom.html#dom-innertext"},
"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring": {"displayText":"parseFromString(string, type)","export":true,"for_":["DOMParser"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"parseFromString(string, type)","type":"method","url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring"},
"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-innerhtml": {"displayText":"innerHTML","export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"innerHTML","type":"attribute","url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-innerhtml"},
"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-outerhtml": {"displayText":"outerHTML","export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"outerHTML","type":"attribute","url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-outerhtml"},
"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-shadowroot-innerhtml": {"displayText":"innerHTML","export":true,"for_":["ShadowRoot"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"innerHTML","type":"attribute","url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-shadowroot-innerhtml"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement": {"displayText":"HTMLIFrameElement","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"HTMLIFrameElement","type":"interface","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": {"displayText":"Window","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Window","type":"interface","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement": {"displayText":"HTMLScriptElement","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"HTMLScriptElement","type":"interface","url":"https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm": {"displayText":"realm","export":true,"for_":["global object"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"realm","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global": {"displayText":"global object","export":true,"for_":["realm"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": {"displayText":"relevant global object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global": {"displayText":"global object","export":true,"for_":["environment settings object"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope": {"displayText":"WindowOrWorkerGlobalScope","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"WindowOrWorkerGlobalScope","type":"interface","url":"https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope"},
"https://html.spec.whatwg.org/multipage/workers.html#worker": {"displayText":"Worker","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Worker","type":"interface","url":"https://html.spec.whatwg.org/multipage/workers.html#worker"},
"https://infra.spec.whatwg.org/#ascii-lowercase": {"displayText":"ASCII lowercase","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ascii lowercase","type":"dfn","url":"https://infra.spec.whatwg.org/#ascii-lowercase"},
"https://infra.spec.whatwg.org/#assert": {"displayText":"assert","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"assert","type":"dfn","url":"https://infra.spec.whatwg.org/#assert"},
"https://infra.spec.whatwg.org/#html-namespace": {"displayText":"HTML namespace","export":true,"for_":[],"level":"","normative":true,"shortname":"infra","spec":"infra","status":"anchor-block","text":"html namespace","type":"dfn","url":"https://infra.spec.whatwg.org/#html-namespace"},
"https://infra.spec.whatwg.org/#list-contain": {"displayText":"list contain","export":true,"for_":[],"level":"","normative":true,"shortname":"infra","spec":"infra","status":"anchor-block","text":"list contain","type":"dfn","url":"https://infra.spec.whatwg.org/#list-contain"},
"https://infra.spec.whatwg.org/#mathml-namespace": {"displayText":"MathML namespace","export":true,"for_":[],"level":"","normative":true,"shortname":"infra","spec":"infra","status":"anchor-block","text":"mathml namespace","type":"dfn","url":"https://infra.spec.whatwg.org/#mathml-namespace"},
"https://infra.spec.whatwg.org/#ordered-set": {"displayText":"ordered set","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ordered set","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-set"},
"https://infra.spec.whatwg.org/#set-append": {"displayText":"append","export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#set-append"},
"https://infra.spec.whatwg.org/#string-concatenate": {"displayText":"concatenate","export":true,"for_":["string"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"concatenate","type":"dfn","url":"https://infra.spec.whatwg.org/#string-concatenate"},
"https://infra.spec.whatwg.org/#svg-namespace": {"displayText":"SVG namespace","export":true,"for_":[],"level":"","normative":true,"shortname":"infra","spec":"infra","status":"anchor-block","text":"svg namespace","type":"dfn","url":"https://infra.spec.whatwg.org/#svg-namespace"},
"https://infra.spec.whatwg.org/#xlink-namespace": {"displayText":"XLink namespace","export":true,"for_":[],"level":"","normative":true,"shortname":"infra","spec":"infra","status":"anchor-block","text":"xlink namespace","type":"dfn","url":"https://infra.spec.whatwg.org/#xlink-namespace"},
"https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement": {"displayText":"SVGScriptElement","export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"SVGScriptElement","type":"interface","url":"https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement"},
"https://url.spec.whatwg.org/#concept-url-parser": {"displayText":"URL parser","export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"url parser","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-parser"},
"https://url.spec.whatwg.org/#concept-url-scheme": {"displayText":"scheme","export":true,"for_":["url"],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"scheme","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-scheme"},
"https://url.spec.whatwg.org/#concept-url-serializer": {"displayText":"URL serializer","export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"url serializer","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-serializer"},
"https://w3c.github.io/FileAPI/#dfn-Blob": {"displayText":"Blob","export":true,"for_":[],"level":"1","normative":true,"shortname":"fileapi","spec":"fileapi","status":"current","text":"Blob","type":"interface","url":"https://w3c.github.io/FileAPI/#dfn-Blob"},
"https://w3c.github.io/webappsec-csp/#content-security-policy-object": {"displayText":"content security policy object","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"content security policy object","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#content-security-policy-object"},
"https://w3c.github.io/webappsec-csp/#directive-inline-check": {"displayText":"inline check","export":true,"for_":["directive"],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"inline check","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#directive-inline-check"},
"https://w3c.github.io/webappsec-csp/#directive-name": {"displayText":"name","export":true,"for_":["directive"],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"name","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#directive-name"},
"https://w3c.github.io/webappsec-csp/#directive-pre-navigation-check": {"displayText":"pre-navigation check","export":true,"for_":["directive"],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"pre-navigation check","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#directive-pre-navigation-check"},
"https://w3c.github.io/webappsec-csp/#directive-value": {"displayText":"value","export":true,"for_":["directive"],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"value","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#directive-value"},
"https://w3c.github.io/webappsec-csp/#directives": {"displayText":"directives","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"directives","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#directives"},
"https://w3c.github.io/webappsec-csp/#global-object-csp-list": {"displayText":"CSP list","export":false,"for_":["global object"],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"csp list","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#global-object-csp-list"},
"https://w3c.github.io/webappsec-csp/#header-content-security-policy-report-only": {"displayText":"Content-Security-Policy-Report-Only","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"content-security-policy-report-only","type":"http-header","url":"https://w3c.github.io/webappsec-csp/#header-content-security-policy-report-only"},
"https://w3c.github.io/webappsec-csp/#policy-directive-set": {"displayText":"directive set","export":true,"for_":["policy"],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"directive set","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#policy-directive-set"},
"https://w3c.github.io/webappsec-csp/#policy-disposition": {"displayText":"disposition","export":true,"for_":["policy"],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"disposition","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#policy-disposition"},
"https://w3c.github.io/webappsec-csp/#script-src": {"displayText":"script-src","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"script-src","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#script-src"},
"https://w3c.github.io/webappsec-csp/#violation-resource": {"displayText":"resource","export":true,"for_":["violation"],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"resource","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#violation-resource"},
"https://w3c.github.io/webappsec-csp/#violation-sample": {"displayText":"sample","export":true,"for_":["violation"],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"sample","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#violation-sample"},
"https://webidl.spec.whatwg.org/#Exposed": {"displayText":"Exposed","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#LegacyNullToEmptyString": {"displayText":"LegacyNullToEmptyString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"LegacyNullToEmptyString","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#LegacyNullToEmptyString"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"displayText":"DOMString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-USVString": {"displayText":"USVString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"USVString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-USVString"},
"https://webidl.spec.whatwg.org/#idl-any": {"displayText":"any","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"any","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-any"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"displayText":"boolean","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#this": {"displayText":"this","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"this","type":"dfn","url":"https://webidl.spec.whatwg.org/#this"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const refHintKey = link.getAttribute("data-refhint-key");
    let key = url;
    if(refHintKey) {
        key = refHintKey + "_" + url;
    }
    const ref = refsData[key];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-wpt */
"use strict";
{
let wptData = {
"paths": ["/trusted-types/"],
};

document.addEventListener("DOMContentLoaded", async ()=>{
    if(wptData.paths.length == 0) return;

    const runsUrl = "https://wpt.fyi/api/runs?label=master&label=stable&max-count=1&product=chrome&product=firefox&product=safari&product=edge";
    const runs = await (await fetch(runsUrl)).json();

    let testResults = [];
    for(const pathPrefix of wptData.paths) {
        const pathResults = await (await fetch("https://wpt.fyi/api/search", {
            method:"POST",
            headers:{
                "Content-Type":"application/json",
            },
            body: JSON.stringify({
                "run_ids": runs.map(x=>x.id),
                "query": {"path": pathPrefix},
            })
        })).json();
        testResults = testResults.concat(pathResults.results);
    }

    const browsers = runs.map(x=>({name:x.browser_name, version:x.browser_version, passes:0, total: 0}));
    const resultsFromPath = new Map(testResults.map(result=>{
        const testPath = result.test;
        const passes = result.legacy_status.map(x=>[x.passes, x.total]);
        return [testPath, passes];
    }));
    const seenTests = new Set();
    document.querySelectorAll(".wpt-name").forEach(nameEl=>{
        const passData = resultsFromPath.get("/" + nameEl.getAttribute("title"));
        if(!passData) {
            console.log("Couldn't find test in results:", nameEl);
            return
        }
        const numTests = passData[0][1];
        if(numTests > 1) {
            nameEl.insertAdjacentElement("beforeend",
                mk.small({}, ` (${numTests} tests)`));
        }
        if(passData == undefined) return;
        const resultsEl = mk.span({"class":"wpt-results"},
            ...passData.map((p,i) => mk.span(
            {
                "title": `${browsers[i].name} ${p[0]}/${p[1]}`,
                "class": "wpt-result",
                "style": `background: conic-gradient(forestgreen ${p[0]/p[1]*360}deg, darkred 0deg);`,
            })),
        );
        nameEl.insertAdjacentElement("afterend", resultsEl);

        // Only update the summary pass/total count if we haven't seen this
        // test before, to support authors listing the same test multiple times
        // in a spec.
        if (!seenTests.has(nameEl.getAttribute("title"))) {
            seenTests.add(nameEl.getAttribute("title"));
            passData.forEach((p,i) => {
                browsers[i].passes += p[0];
                browsers[i].total += p[1];
            });
        }
    });
    const overview = document.querySelector(".wpt-overview");
    if(overview) {
        overview.appendChild(mk.ul({}, ...browsers.map(formatWptResult)));
        document.head.appendChild(mk.style({},
            `.wpt-overview ul { display: flex; flex-flow: row wrap; gap: .2em; justify-content: start; list-style: none; padding: 0; margin: 0;}
             .wpt-overview li { padding: .25em 1em; color: black; text-align: center; }
             .wpt-overview img { height: 1.5em; height: max(1.5em, 32px); background: transparent; }
             .wpt-overview .browser { font-weight: bold; }
             .wpt-overview .passes-none { background: #e57373; }
             .wpt-overview .passes-hardly { background: #ffb74d; }
             .wpt-overview .passes-a-few { background: #ffd54f; }
             .wpt-overview .passes-half { background: #fff176; }
             .wpt-overview .passes-lots { background: #dce775; }
             .wpt-overview .passes-most { background: #aed581; }
             .wpt-overview .passes-all { background: #81c784; }`));
    }
});

function formatWptResult({name, version, passes, total}) {
    const passRate = passes/total;
    let passClass = "";
    if(passRate == 0)      passClass = "passes-none";
    else if(passRate < .2) passClass = "passes-hardly";
    else if(passRate < .4) passClass = "passes-a-few";
    else if(passRate < .6) passClass = "passes-half";
    else if(passRate < .8) passClass = "passes-lots";
    else if(passRate < 1)  passClass = "passes-most";
    else                   passClass = "passes-all";

    name = name[0].toUpperCase() + name.slice(1);
    const shortVersion = /^\d+/.exec(version);
    const icon = []

    if(name == "Chrome") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/chrome_64x64.png"}));
    if(name == "Edge") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/edge_64x64.png"}));
    if(name == "Safari") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/safari_64x64.png"}));
    if(name == "Firefox") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/firefox_64x64.png"}));

    return mk.li({"class":passClass},
        mk.nobr({'class':'browser'}, ...icon, ` ${name} ${shortVersion}`),
        mk.br(),
        mk.nobr({'class':'pass-rate'}, `${passes}/${total}`)
    );
}
}
</script>